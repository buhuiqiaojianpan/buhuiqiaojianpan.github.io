<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-调试/Fiddler抓包" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/24/%E8%B0%83%E8%AF%95/Fiddler%E6%8A%93%E5%8C%85/" class="article-date">
  <time class="dt-published" datetime="2021-04-24T10:09:17.000Z" itemprop="datePublished">2021-04-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/24/%E8%B0%83%E8%AF%95/Fiddler%E6%8A%93%E5%8C%85/">Fiddler 抓包分析</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、Fiddler简介"><a href="#一、Fiddler简介" class="headerlink" title="一、Fiddler简介"></a>一、Fiddler简介</h2><blockquote>
<p><code>Fiddler</code>是位于客户端和服务器端的<code>HTTP</code>代理，也是目前最常用的<code>http</code>抓包工具之一 。 它能够记录客户端和服务器之间的所有 <code>HTTP</code>请求，可以针对特定的<code>HTTP</code>请求，分析请求数据、设置断点、调试<code>web</code>应用、修改请求的数据，甚至可以修改服务器返回的数据，功能非常强大，是<code>web</code>调试的利器</p>
</blockquote>
<ul>
<li>客户端的所有请求都要先经过<code>Fiddler</code>，然后转发到相应的服务器，反之，服务器端的所有响应，也都会先经过<code>Fiddler</code>然后发送到客户端</li>
<li>使用了<code>Fiddler</code>之后，web客户端和服务器的请求如下所示</li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/187.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/188.png" alt="img"></p>
<p><strong>主界面中主要包括四个常用的块</strong></p>
<ul>
<li><code>Fiddler</code>的菜单栏，上图绿色部分。包括捕获<code>http</code>请求，停止捕获请求，保存<code>http</code>请求，载入本地<code>session</code>、设置捕获规则等功能。</li>
<li><code>Fiddler</code>的工具栏,上图红色部分。包括<code>Fiddler</code>针对当前<code>view</code>的操作（暂停，清除<code>session</code>,<code>decode</code>模式、清除缓存等）。</li>
<li><code>web Session</code>面板，上图黄色区域，主要是<code>Fiddler</code>抓取到的每条<code>http</code>请求（每一条称为一个<code>session</code>）,主要包含了请求的<code>url</code>，协议，状态码，<code>body</code>等信息，详细的字段含义如下图所示</li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/189.png" alt="img"></p>
<h2 id="二、HTTP请求图标说明"><a href="#二、HTTP请求图标说明" class="headerlink" title="二、HTTP请求图标说明"></a>二、HTTP请求图标说明</h2><p><img src="https://poetries1.gitee.io/img-repo/2019/10/190.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/191.png" alt="img"></p>
<h2 id="三、Statistic"><a href="#三、Statistic" class="headerlink" title="三、Statistic"></a>三、Statistic</h2><blockquote>
<p>关于HTTP请求的性能和其他数据分析</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/192.png" alt="img"></p>
<blockquote>
<p>我们可以从中看出一些基本性能数据：如DNS解析的时间消耗是<code>8ms</code>,建立<code>TCP/IP</code>连接的时间消耗是<code>8ms</code>等等信息</p>
</blockquote>
<h2 id="四、Inspectors"><a href="#四、Inspectors" class="headerlink" title="四、Inspectors"></a>四、Inspectors</h2><blockquote>
<p>分为上下两个部分，上半部分是请求头部分，下半部分是响应头部分。对于每一部分，提供了多种不同格式查看每个请求和响应的内容。</p>
</blockquote>
<ul>
<li>JPG 格式使用 ImageView 就可以看到图片</li>
<li>HTML&#x2F;JS&#x2F;CSS 使用 TextView可以看到响应的内容。</li>
<li>Raw标签可以查看原始的符合HTTP标准的请求和响应头。</li>
<li>Auth则可以查看授权Proxy-Authorization 和 Authorization的相关信息。</li>
<li>Cookies标签可以看到请求的cookie和响应的set-cookie头信息</li>
</ul>
<h2 id="五、Composer"><a href="#五、Composer" class="headerlink" title="五、Composer"></a>五、Composer</h2><blockquote>
<p>老版本的<code>fiddler</code>中叫<code>request-builder</code>.顾名思义，可以构建相应的请求，有两种常用的方式构建请求</p>
</blockquote>
<ul>
<li><code>Parsed 输入请求的url之后</code>executed<code>即可，也可以修改相应的头信息（如添加常用的</code>accept<code>,</code>host<code>,</code>referrer<code>,</code>cookie<code>，</code>cache-control<code>等头部）后</code>execute&#96;.</li>
<li><code>Raw</code>。使用HTTP头部信息构建<code>http</code>请求。与上类似</li>
</ul>
<h2 id="六、fiddler过滤会话"><a href="#六、fiddler过滤会话" class="headerlink" title="六、fiddler过滤会话"></a>六、fiddler过滤会话</h2><blockquote>
<p>问题：每次使用<code>Fiddler</code>,<br>打开一个网站，都能在<code>Fiddler</code>中看到几十个会话，看得眼花缭乱。</p>
</blockquote>
<ul>
<li>期望：只想抓取自己想要的请求</li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/193.png" alt="img"></p>
<h2 id="七、Response乱码时的处理方法"><a href="#七、Response乱码时的处理方法" class="headerlink" title="七、Response乱码时的处理方法"></a>七、Response乱码时的处理方法</h2><blockquote>
<p>问题：有时候我们看到<code>Response</code>中的<code>HTML</code>是乱码的， 这是因为<code>HTML</code>被压缩了， 我们可以通过两种方法去解压缩</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/194.png" alt="img"></p>
<ul>
<li>方法二：选中工具栏中的”Decode”。 这样会自动解压缩</li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/195.png" alt="img"></p>
<h2 id="八、反向代理-AutoResponder"><a href="#八、反向代理-AutoResponder" class="headerlink" title="八、反向代理-AutoResponder"></a>八、反向代理-AutoResponder</h2><blockquote>
<p>原理：利用<code>fiddler</code>作為反向代理。意思就是将外界的<code>request</code>请求端口修改掉！ 改写返回数据，最实用的功能</p>
</blockquote>
<ul>
<li>用浏览器随意输入一个网址，如<code>http://www.baidu.com/</code></li>
<li>选中序号<code>16</code>记录，右击-勾选<code>“Unlock fo Editing”</code>,选择<code>Fiddler</code>右侧<code>reponse</code>块下的<code>TextView</code>，这里修改<code>title</code>,如图：</li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/196.png" alt="img"></p>
<ul>
<li>选择<code>Fiddler</code>右侧<code>reponse</code>块下的<code>TextView</code>，这里修改<code>title</code>,如图：</li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/197.png" alt="img"></p>
<ul>
<li>去掉<code>“Unlock for Editing”</code>，再选择右侧上方的<code>AutoResponder</code>,勾选下方的<code>checkbox</code>选框，并将序号<code>16</code>托到下方，同时，里面会多条记录，如下图：</li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/198.png" alt="img"></p>
<ul>
<li>回到浏览器，刷新页面，如图，标题变为上面改的内容</li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/199.png" alt="img"></p>
<h2 id="九、fiddler提供了一个功能，让我们模拟低速网路环境"><a href="#九、fiddler提供了一个功能，让我们模拟低速网路环境" class="headerlink" title="九、fiddler提供了一个功能，让我们模拟低速网路环境"></a>九、fiddler提供了一个功能，让我们模拟低速网路环境</h2><blockquote>
<p>启用方法如：Rules → Performances → Simulate Modem Speeds</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/200.png" alt="img"></p>
<h2 id="十、直接在fiddler上配置host"><a href="#十、直接在fiddler上配置host" class="headerlink" title="十、直接在fiddler上配置host"></a>十、直接在fiddler上配置host</h2><blockquote>
<p>点击<code>tools&gt;&gt;hosts</code>,在里面填写自己想要设置的<code>host</code>即可</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/201.png" alt="img"></p>
<h2 id="十一、Fiddler显示请求服务器的ip及系统环境的配置方法"><a href="#十一、Fiddler显示请求服务器的ip及系统环境的配置方法" class="headerlink" title="十一、Fiddler显示请求服务器的ip及系统环境的配置方法"></a>十一、Fiddler显示请求服务器的ip及系统环境的配置方法</h2><ul>
<li>打开<code>Rules——&gt;Customize Rules</code></li>
<li>找到如下这段代码</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">static function Main()</span><br><span class="line">&#123;</span><br><span class="line">var today: Date = new Date();</span><br><span class="line">FiddlerObject.StatusText = &quot; CustomRules.js was loaded at: &quot; + today;</span><br><span class="line">// Uncomment to add a &quot;Server&quot; column containing the response &quot;Server&quot; header, if present</span><br><span class="line"></span><br><span class="line">在这一行后面添加如下代码：</span><br><span class="line"></span><br><span class="line">// 显示服务器web环境</span><br><span class="line">FiddlerObject.UI.lvSessions.AddBoundColumn(&quot;Server&quot;, 50, &quot;@response.server&quot;);</span><br><span class="line">// 显示服务器IP地址</span><br><span class="line">FiddlerObject.UI.lvSessions.AddBoundColumn(&quot;HostIP&quot;, 50, &quot;x-hostIP&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>设置后重启<code>fiddler</code>，效果如下</li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/202.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/203.png" alt="img"></p>
<h2 id="十二、fiddler断点调试"><a href="#十二、fiddler断点调试" class="headerlink" title="十二、fiddler断点调试"></a>十二、fiddler断点调试</h2><blockquote>
<p>第一种方法：菜单栏 <code>Rules</code> –》 <code>Automatic Breakpoints</code> –》 <code>Before Requests</code>(请求被发送到服务器端之前)；或者 <code>After Responses</code>(响应返回客户端之前)，这种设置对客户机发出的所有请求都进行拦截</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/204.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/205.png" alt="img"></p>
<h2 id="十三、配合SwitchySharp插件使用"><a href="#十三、配合SwitchySharp插件使用" class="headerlink" title="十三、配合SwitchySharp插件使用"></a>十三、配合SwitchySharp插件使用</h2><blockquote>
<p>为<code>fiddler</code>创建一个规则，代理到本地的<code>8888</code>端口（<code>fiddler</code>所用的端口）<br><code>google</code>设置代理的方法：下载<code>SwitchySharp</code>插件，设置如下：</p>
</blockquote>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/206.png" alt="img"></p>
<ul>
<li>接着点击保存即可~ 这样在需要的时候可以切换到<code>Fiddler</code></li>
</ul>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/207.png" alt="img"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/24/%E8%B0%83%E8%AF%95/Fiddler%E6%8A%93%E5%8C%85/" data-id="cl7k9sbko00nc98u0harmfhr8" data-title="Fiddler 抓包分析" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%8A%93%E5%8C%85/" rel="tag">抓包</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-性能优化/图解前端性能优化" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/30/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E8%A7%A3%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="article-date">
  <time class="dt-published" datetime="2021-03-30T08:35:48.000Z" itemprop="datePublished">2021-03-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">前端性能优化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/30/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E8%A7%A3%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">图解前端性能优化</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、css和js的装载与执行"><a href="#一、css和js的装载与执行" class="headerlink" title="一、css和js的装载与执行"></a>一、css和js的装载与执行</h2><h3 id="1-1-HTML-页面加载渲染的过程"><a href="#1-1-HTML-页面加载渲染的过程" class="headerlink" title="1.1 HTML 页面加载渲染的过程"></a>1.1 HTML 页面加载渲染的过程</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/119.png" alt="img"></p>
<h3 id="1-2-HTML渲染过程的一些特点"><a href="#1-2-HTML渲染过程的一些特点" class="headerlink" title="1.2 HTML渲染过程的一些特点"></a>1.2 HTML渲染过程的一些特点</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/120.png" alt="img"></p>
<h3 id="1-3-css-阻塞和-js-阻塞"><a href="#1-3-css-阻塞和-js-阻塞" class="headerlink" title="1.3 css 阻塞和 js 阻塞"></a>1.3 css 阻塞和 js 阻塞</h3><h4 id="1-3-1-CSS阻塞"><a href="#1-3-1-CSS阻塞" class="headerlink" title="1.3.1 CSS阻塞"></a>1.3.1 CSS阻塞</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/121.png" alt="img"></p>
<h4 id="1-3-2-JS阻塞"><a href="#1-3-2-JS阻塞" class="headerlink" title="1.3.2 JS阻塞"></a>1.3.2 JS阻塞</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/122.png" alt="img"></p>
<h2 id="二、资源的压缩与合并"><a href="#二、资源的压缩与合并" class="headerlink" title="二、资源的压缩与合并"></a>二、资源的压缩与合并</h2><h3 id="2-1-文件合并"><a href="#2-1-文件合并" class="headerlink" title="2.1 文件合并"></a>2.1 文件合并</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/123.png" alt="img"></p>
<h3 id="2-2-css、js-及-HTML压缩"><a href="#2-2-css、js-及-HTML压缩" class="headerlink" title="2.2 css、js 及 HTML压缩"></a>2.2 css、js 及 HTML压缩</h3><h4 id="2-2-1-CSS压缩"><a href="#2-2-1-CSS压缩" class="headerlink" title="2.2.1 CSS压缩"></a>2.2.1 CSS压缩</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/124.png" alt="img"></p>
<h4 id="2-2-2-JS压缩"><a href="#2-2-2-JS压缩" class="headerlink" title="2.2.2 JS压缩"></a>2.2.2 JS压缩</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/125.png" alt="img"></p>
<h4 id="2-2-3-HTML压缩"><a href="#2-2-3-HTML压缩" class="headerlink" title="2.2.3 HTML压缩"></a>2.2.3 HTML压缩</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/126.png" alt="img"></p>
<h3 id="2-3-http-清求的过程及潜在的性能优化点"><a href="#2-3-http-清求的过程及潜在的性能优化点" class="headerlink" title="2.3 http 清求的过程及潜在的性能优化点"></a>2.3 http 清求的过程及潜在的性能优化点</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/127.png" alt="img"></p>
<p><img src="https://poetries1.gitee.io/img-repo/2019/10/128.png" alt="img"></p>
<h2 id="三、图片相关的优化"><a href="#三、图片相关的优化" class="headerlink" title="三、图片相关的优化"></a>三、图片相关的优化</h2><h3 id="3-1-不同格式图片常用的业务场景"><a href="#3-1-不同格式图片常用的业务场景" class="headerlink" title="3.1 不同格式图片常用的业务场景"></a>3.1 不同格式图片常用的业务场景</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/129.png" alt="img"></p>
<h3 id="3-2-图片压缩几种方法-雪碧图、Image-inline"><a href="#3-2-图片压缩几种方法-雪碧图、Image-inline" class="headerlink" title="3.2 图片压缩几种方法-雪碧图、Image inline"></a>3.2 图片压缩几种方法-雪碧图、Image inline</h3><h4 id="3-2-1-使用矢量图"><a href="#3-2-1-使用矢量图" class="headerlink" title="3.2.1 使用矢量图"></a>3.2.1 使用矢量图</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/130.png" alt="img"></p>
<h4 id="3-2-2-在安卓下使用webp"><a href="#3-2-2-在安卓下使用webp" class="headerlink" title="3.2.2 在安卓下使用webp"></a>3.2.2 在安卓下使用webp</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/131.png" alt="img"></p>
<h2 id="四、-懒加载与预加载"><a href="#四、-懒加载与预加载" class="headerlink" title="四、 懒加载与预加载"></a>四、 懒加载与预加载</h2><h3 id="4-1-懒加载原理"><a href="#4-1-懒加载原理" class="headerlink" title="4.1 懒加载原理"></a>4.1 懒加载原理</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/132.png" alt="img"></p>
<h3 id="4-2-预加载原理"><a href="#4-2-预加载原理" class="headerlink" title="4.2 预加载原理"></a>4.2 预加载原理</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/133.png" alt="img"></p>
<h3 id="4-3-懒加载、预加载使用场景"><a href="#4-3-懒加载、预加载使用场景" class="headerlink" title="4.3 懒加载、预加载使用场景"></a>4.3 懒加载、预加载使用场景</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/134.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/135.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/136.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/137.png" alt="img"></p>
<h3 id="4-4-预加载原生-js-和-PreloadJS-实现"><a href="#4-4-预加载原生-js-和-PreloadJS-实现" class="headerlink" title="4.4 预加载原生 js 和 PreloadJS 实现"></a>4.4 预加载原生 js 和 PreloadJS 实现</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/138.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/139.png" alt="img"></p>
<h2 id="五、缓存"><a href="#五、缓存" class="headerlink" title="五、缓存"></a>五、缓存</h2><p><img src="https://poetries1.gitee.io/img-repo/2019/10/140.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/141.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/142.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/143.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/144.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/145.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/146.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/147.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/148.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/149.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/150.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/151.png" alt="img"></p>
<h2 id="六、重绘与回流"><a href="#六、重绘与回流" class="headerlink" title="六、重绘与回流"></a>六、重绘与回流</h2><h3 id="6-1-什么是重绘与回流"><a href="#6-1-什么是重绘与回流" class="headerlink" title="6.1 什么是重绘与回流"></a>6.1 什么是重绘与回流</h3><h4 id="6-1-1-重绘"><a href="#6-1-1-重绘" class="headerlink" title="6.1.1 重绘"></a>6.1.1 重绘</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/152.png" alt="img"></p>
<h4 id="6-1-2-回流"><a href="#6-1-2-回流" class="headerlink" title="6.1.2 回流"></a>6.1.2 回流</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/153.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/154.png" alt="img"></p>
<h3 id="6-2-避免重绘回流的两种方法"><a href="#6-2-避免重绘回流的两种方法" class="headerlink" title="6.2 避免重绘回流的两种方法"></a>6.2 避免重绘回流的两种方法</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/155.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/156.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/157.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/158.png" alt="img"></p>
<h3 id="6-3-css-性能让-Javacript-变慢？"><a href="#6-3-css-性能让-Javacript-变慢？" class="headerlink" title="6.3 css 性能让 Javacript 变慢？"></a>6.3 css 性能让 Javacript 变慢？</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/159.png" alt="img"></p>
<h3 id="6-4-案例解析-重绘、回流及图层"><a href="#6-4-案例解析-重绘、回流及图层" class="headerlink" title="6.4 案例解析-重绘、回流及图层"></a>6.4 案例解析-重绘、回流及图层</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/160.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/161.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/162.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/163.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/164.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/165.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/166.png" alt="img"></p>
<h3 id="6-5-实战优化点总结"><a href="#6-5-实战优化点总结" class="headerlink" title="6.5 实战优化点总结"></a>6.5 实战优化点总结</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/167.png" alt="img"></p>
<h2 id="七、浏览器存储"><a href="#七、浏览器存储" class="headerlink" title="七、浏览器存储"></a>七、浏览器存储</h2><h3 id="7-1-cookies"><a href="#7-1-cookies" class="headerlink" title="7.1 cookies"></a>7.1 cookies</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/168.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/169.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/170.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/171.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/172.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/173.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/174.png" alt="img"></p>
<h3 id="7-2-LocalStorage、SessionStorage"><a href="#7-2-LocalStorage、SessionStorage" class="headerlink" title="7.2 LocalStorage、SessionStorage"></a>7.2 LocalStorage、SessionStorage</h3><h4 id="7-2-1-LocalStorage"><a href="#7-2-1-LocalStorage" class="headerlink" title="7.2.1 LocalStorage"></a>7.2.1 LocalStorage</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/175.png" alt="img"></p>
<h4 id="7-2-2-SessionStorage"><a href="#7-2-2-SessionStorage" class="headerlink" title="7.2.2 SessionStorage"></a>7.2.2 SessionStorage</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/176.png" alt="img"></p>
<h3 id="7-3-IndexedDB"><a href="#7-3-IndexedDB" class="headerlink" title="7.3 IndexedDB"></a>7.3 IndexedDB</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/177.png" alt="img"></p>
<h3 id="7-4-案例解析"><a href="#7-4-案例解析" class="headerlink" title="7.4 案例解析"></a>7.4 案例解析</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/178.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/179.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/180.png" alt="img"></p>
<h3 id="7-5-PWA与Service-Workers"><a href="#7-5-PWA与Service-Workers" class="headerlink" title="7.5 PWA与Service Workers"></a>7.5 PWA与Service Workers</h3><h4 id="7-5-1-PWA"><a href="#7-5-1-PWA" class="headerlink" title="7.5.1 PWA"></a>7.5.1 PWA</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/181.png" alt="img"></p>
<h4 id="7-5-2-Service-Workers"><a href="#7-5-2-Service-Workers" class="headerlink" title="7.5.2 Service Workers"></a>7.5.2 Service Workers</h4><p><img src="https://poetries1.gitee.io/img-repo/2019/10/182.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/183.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/184.png" alt="img"></p>
<h3 id="7-6-Service-Workers-离线应用"><a href="#7-6-Service-Workers-离线应用" class="headerlink" title="7.6 Service Workers-离线应用"></a>7.6 Service Workers-离线应用</h3><p><img src="https://poetries1.gitee.io/img-repo/2019/10/185.png" alt="img"><br><img src="https://poetries1.gitee.io/img-repo/2019/10/186.png" alt="img"></p>
<h2 id="八、移动H5前端性能优化指南"><a href="#八、移动H5前端性能优化指南" class="headerlink" title="八、移动H5前端性能优化指南"></a>八、移动H5前端性能优化指南</h2><p><img src="https://camo.githubusercontent.com/db045941b5adebe26eae1202b9286fe8c39e5fa2/687474703a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f3934383631342d313735326635633839393363633161302e6a7065673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430" alt="img"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/30/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%9B%BE%E8%A7%A3%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" data-id="cl7k9sbjp00jq98u03sw21uwb" data-title="图解前端性能优化" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-性能优化/前端页面性能优化" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/22/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" class="article-date">
  <time class="dt-published" datetime="2021-03-22T11:16:27.000Z" itemprop="datePublished">2021-03-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">前端性能优化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/22/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">前端页面性能优化</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、调试工具"><a href="#一、调试工具" class="headerlink" title="一、调试工具"></a>一、调试工具</h2><h3 id="1、Network"><a href="#1、Network" class="headerlink" title="1、Network"></a>1、Network</h3><p><img src="https://blog.poetries.top/img/static/images/image-20210208102537169.png" alt="image-20210208102537169"></p>
<p>这里可以看到资源加载详情，初步评估影响<code>页面性能</code>的因素。鼠标右键可以自定义选项卡，页面底部是当前加载资源的一个概览。<code>DOMContentLoaded</code> DOM渲染完成的时间，<code>Load</code>：当前页面所有资源加载完成的时间</p>
<p><strong>思考：如何判断哪些资源对当前页面加载无用，做对应优化？</strong></p>
<p><strong>shift + cmd + P 调出控制台的扩展工具，添加规则</strong></p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208102549961.png" alt="image-20210208102549961"></p>
<p><strong>监控页面性能变化</strong></p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208102650825.png" alt="image-20210208102650825"></p>
<h4 id="瀑布流waterfal"><a href="#瀑布流waterfal" class="headerlink" title="瀑布流waterfal"></a>瀑布流waterfal</h4><p><img src="https://blog.poetries.top/img/static/images/image-20210208102723253.png" alt="image-20210208102723253"></p>
<ul>
<li><code>Queueing</code> 浏览器将资源放入队列时间</li>
<li><code>Stalled</code> 因放入队列时间而发生的停滞时间</li>
<li><code>DNS Lookup</code> DNS解析时间</li>
<li><code>Initial connection</code> 建立HTTP连接的时间</li>
<li><code>SSL</code> 浏览器与服务器建立安全性连接的时间</li>
<li><code>TTFB</code> 等待服务端返回数据的时间</li>
<li><code>Content Download</code> 浏览器下载资源的时间</li>
</ul>
<h3 id="2、Lighthouse"><a href="#2、Lighthouse" class="headerlink" title="2、Lighthouse"></a>2、Lighthouse</h3><p><img src="https://blog.poetries.top/img/static/images/image-20210208102851752.png" alt="image-20210208102851752"></p>
<ul>
<li><code>First Contentful Paint</code> 首屏渲染时间，1s以内绿色</li>
<li><code>Speed Index</code> 速度指数，4s以内绿色</li>
<li><code>Time to Interactive</code> 到页面可交换的时间</li>
</ul>
<blockquote>
<p>根据chrome的一些策略自动对网站做一个质量评估，并且会给出一些优化的建议</p>
</blockquote>
<h3 id="3、Peformance"><a href="#3、Peformance" class="headerlink" title="3、Peformance"></a>3、Peformance</h3><p><img src="https://blog.poetries.top/img/static/images/image-20210208102949596.png" alt="image-20210208102949596"></p>
<p>对网站最专业的分析</p>
<h3 id="4、webPageTest"><a href="#4、webPageTest" class="headerlink" title="4、webPageTest"></a>4、webPageTest</h3><blockquote>
<p>可以模拟不同场景下访问的情况，比如模拟不同浏览器、不同国家等等，在线测试地址：<a target="_blank" rel="noopener" href="https://www.webpagetest.org/">webPageTest</a></p>
</blockquote>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208103032419.png" alt="image-20210208103032419"></p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208103054016.png" alt="image-20210208103054016"></p>
<h3 id="5、资源打包分析"><a href="#5、资源打包分析" class="headerlink" title="5、资源打包分析"></a>5、资源打包分析</h3><h4 id="webpack-bundle-analyzer"><a href="#webpack-bundle-analyzer" class="headerlink" title="webpack-bundle-analyzer"></a>webpack-bundle-analyzer</h4><p><img src="https://blog.poetries.top/img/static/images/image-20210208103127992.png" alt="image-20210208103127992"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev webpack-bundle-analyzer</span><br><span class="line">// webpack.config.js 文件</span><br><span class="line">const BundleAnalyzerPlugin = require(&#x27;webpack-bundle-analyzer&#x27;).BundleAnalyzerPlugin</span><br><span class="line">module.exports=&#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    new BundleAnalyzerPlugin(&#123;</span><br><span class="line">          analyzerMode: &#x27;server&#x27;,</span><br><span class="line">          analyzerHost: &#x27;127.0.0.1&#x27;,</span><br><span class="line">          analyzerPort: 8889,</span><br><span class="line">          reportFilename: &#x27;report.html&#x27;,</span><br><span class="line">          defaultSizes: &#x27;parsed&#x27;,</span><br><span class="line">          openAnalyzer: true,</span><br><span class="line">          generateStatsFile: false,</span><br><span class="line">          statsFilename: &#x27;stats.json&#x27;,</span><br><span class="line">          statsOptions: null,</span><br><span class="line">          logLevel: &#x27;info&#x27;</span><br><span class="line">        &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// package.json</span><br><span class="line">&quot;analyz&quot;: &quot;NODE_ENV=production npm_config_report=true npm run build&quot;</span><br></pre></td></tr></table></figure>

<h4 id="开启source-map"><a href="#开启source-map" class="headerlink" title="开启source-map"></a>开启source-map</h4><blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack.config.js</span><br></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &#x27;production&#x27;,</span><br><span class="line">    devtool: &#x27;hidden-source-map&#x27;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>package.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;analyze&quot;: &quot;source-map-explorer &#x27;build/*.js&#x27;&quot;,</span><br></pre></td></tr></table></figure>

<p>npm run analyze</p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208103321371.png" alt="image-20210208103321371"></p>
<h2 id="二、WEB-API"><a href="#二、WEB-API" class="headerlink" title="二、WEB API"></a>二、WEB API</h2><p>工欲善其事，必先利其器。浏览器提供的一些分析API<code>至关重要</code></p>
<h3 id="1、监听视窗激活状态"><a href="#1、监听视窗激活状态" class="headerlink" title="1、监听视窗激活状态"></a>1、监听视窗激活状态</h3><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b7ab11fc7b94fcf8c79bd3b28706b2c~tplv-k3u1fbpfcp-watermark.image" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 窗口激活状态监听</span><br><span class="line">let vEvent = &#x27;visibilitychange&#x27;;</span><br><span class="line">if (document.webkitHidden != undefined) &#123;</span><br><span class="line">    vEvent = &#x27;webkitvisibilitychange&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function visibilityChanged() &#123;</span><br><span class="line">    if (document.hidden || document.webkitHidden) &#123;</span><br><span class="line">        document.title = &#x27;客官，别走啊~&#x27;</span><br><span class="line">        console.log(&quot;Web page is hidden.&quot;)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        document.title = &#x27;客官，你又回来了呢~&#x27;</span><br><span class="line">        console.log(&quot;Web page is visible.&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">document.addEventListener(vEvent, visibilityChanged, false);</span><br></pre></td></tr></table></figure>

<p>其实有很多隐藏的api，这里大家有兴趣的可以去试试看：</p>
<h3 id="2、观察长任务（performance-中Task）"><a href="#2、观察长任务（performance-中Task）" class="headerlink" title="2、观察长任务（performance 中Task）"></a>2、观察长任务（performance 中Task）</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const observer = new PerformanceObserver((list) =&gt; &#123;</span><br><span class="line">    for (const entry of list.getEntries()) &#123;</span><br><span class="line">        console.log(entry)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">observer.observe(&#123;entryTypes: [&#x27;longtask&#x27;]&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="3、监听网络变化"><a href="#3、监听网络变化" class="headerlink" title="3、监听网络变化"></a>3、监听网络变化</h3><p>网络变化时给用户反馈网络问题，有时候看直播的时候自己的网络卡顿，直播平台也会提醒你或者自动给你切换清晰度</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;</span><br><span class="line">var type = connection.effectiveType;</span><br><span class="line"></span><br><span class="line">function updateConnectionStatus() &#123;</span><br><span class="line">  console.log(&quot;Connection type changed from &quot; + type + &quot; to &quot; + connection.effectiveType);</span><br><span class="line">  type = connection.effectiveType;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">connection.addEventListener(&#x27;change&#x27;, updateConnectionStatus);</span><br></pre></td></tr></table></figure>

<h3 id="4、计算DOMContentLoaded时间"><a href="#4、计算DOMContentLoaded时间" class="headerlink" title="4、计算DOMContentLoaded时间"></a>4、计算DOMContentLoaded时间</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">window.addEventListener(&#x27;DOMContentLoaded&#x27;, (event) =&gt; &#123;</span><br><span class="line">    let timing = performance.getEntriesByType(&#x27;navigation&#x27;)[0];</span><br><span class="line">    console.log(timing.domInteractive);</span><br><span class="line">    console.log(timing.fetchStart);</span><br><span class="line">    let diff = timing.domInteractive - timing.fetchStart;</span><br><span class="line">    console.log(&quot;TTI: &quot; + diff);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="5、更多计算规则"><a href="#5、更多计算规则" class="headerlink" title="5、更多计算规则"></a>5、更多计算规则</h3><ul>
<li><code>DNS</code> 解析耗时: <code>domainLookupEnd - domainLookupStart</code></li>
<li><code>TCP</code> 连接耗时: <code>connectEnd - connectStart</code></li>
<li><code>SSL</code> 安全连接耗时: <code>connectEnd - secureConnectionStart</code></li>
<li>网络请求耗时 (<code>TTFB</code>): <code>responseStart - requestStart</code></li>
<li>数据传输耗时: <code>responseEnd - responseStart</code></li>
<li><code>DOM</code> 解析耗时: <code>domInteractive - responseEnd</code></li>
<li>资源加载耗时:<code>loadEventStart - domContentLoadedEventEnd</code></li>
<li><code>First Byte</code>时间: <code>responseStart - domainLookupStart</code></li>
<li>白屏时间: <code>responseEnd - fetchStart</code></li>
<li>首次可交互时间: <code>domInteractive - fetchStart</code></li>
<li><code>DOM Ready</code> 时间: <code>domContentLoadEventEnd - fetchStart</code></li>
<li>页面完全加载时间: <code>loadEventStart - fetchStart</code></li>
<li><code>http</code> 头部大小： <code>transferSize - encodedBodySize</code></li>
<li>重定向次数：<code>performance.navigation.redirectCount</code></li>
<li>重定向耗时: <code>redirectEnd - redirectStart</code></li>
</ul>
<h2 id="三、雅虎军规"><a href="#三、雅虎军规" class="headerlink" title="三、雅虎军规"></a>三、雅虎军规</h2><p>关于雅虎军规，你知道的有多少条，平时写用到的又有哪些？针对以下规则，我们可以做很多优化工作</p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208103918197.png" alt="image-20210208103918197"></p>
<h3 id="1、减少cookie传输"><a href="#1、减少cookie传输" class="headerlink" title="1、减少cookie传输"></a>1、减少cookie传输</h3><blockquote>
<p><code>cookie</code>传输会造成带宽浪费，可以：</p>
</blockquote>
<ul>
<li>减少<code>cookie</code>中存储的东西</li>
<li>静态资源不需要<code>cookie</code>，可以采用其他的域名，不会主动带上<code>cookie</code></li>
</ul>
<h3 id="2、避免过多的回流与重绘"><a href="#2、避免过多的回流与重绘" class="headerlink" title="2、避免过多的回流与重绘"></a>2、避免过多的回流与重绘</h3><p>连续触发页面回流操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">let cards = document.getElementsByClassName(&quot;MuiPaper-rounded&quot;);</span><br><span class="line">const update = (timestamp) =&gt; &#123;</span><br><span class="line">  for (let i = 0; i &lt;cards.length; i++) &#123;</span><br><span class="line">    let top = cards[i].offsetTop;</span><br><span class="line">    cards[i].style.width = ((Math.sin(cards[i].offsetTop + timestamp / 100 + 1) * 500) + &#x27;px&#x27;)</span><br><span class="line">  &#125;</span><br><span class="line">  window.requestAnimationFrame(update)</span><br><span class="line">&#125;</span><br><span class="line">update(1000);</span><br></pre></td></tr></table></figure>

<p>看下效果，很明显的卡顿</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7618dea1a4774c8685e9926b08d67fdd~tplv-k3u1fbpfcp-watermark.image" alt="img"></p>
<blockquote>
<p><code>performance</code>分析结果，<code>load</code>事件之后存在大量的回流，并且<code>chrome</code>都给标记了红色</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9b543d68fab7445da1dedb72bb224f69~tplv-k3u1fbpfcp-watermark.image" alt="img"></p>
<blockquote>
<p>使用<code>fastDom</code>进行优化，将对dom的<code>读和写</code>分离，合并</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">let cards = document.getElementsByClassName(&quot;MuiPaper-rounded&quot;);</span><br><span class="line">  const update = (timestamp) =&gt; &#123;</span><br><span class="line">    for (let i = 0; i &lt; cards.length; i++) &#123;</span><br><span class="line">      fastdom.measure(() =&gt; &#123;</span><br><span class="line">        let top = cards[i].offsetTop;</span><br><span class="line">        fastdom.mutate(() =&gt; &#123;</span><br><span class="line">          cards[i].style.width =</span><br><span class="line">            Math.sin(top + timestamp / 100 + 1) * 500 + &quot;px&quot;;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    window.requestAnimationFrame(update)</span><br><span class="line">  &#125;</span><br><span class="line">  update(1000);</span><br></pre></td></tr></table></figure>

<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1df5c32c30494c13b3402305f866b327~tplv-k3u1fbpfcp-watermark.image" alt="img"></p>
<blockquote>
<p><code>performance</code>分析结果，load事件之后也没有了那么多的红色标记</p>
</blockquote>
<p>感兴趣的可以去了解一下fastDom：<a target="_blank" rel="noopener" href="https://github.com/wilsonpage/fastdom">github fastdom</a> 在线预览：<a target="_blank" rel="noopener" href="http://wilsonpage.github.io/fastdom/examples/animation.html">fastdom demo</a></p>
<p>关于任务拆分与组合的思想，<code>react fiber</code>架构做的很牛逼，有兴趣的可以去了解一下调度算法在fiber中的实践</p>
<h2 id="四、压缩"><a href="#四、压缩" class="headerlink" title="四、压缩"></a>四、压缩</h2><h3 id="1、Gzip"><a href="#1、Gzip" class="headerlink" title="1、Gzip"></a>1、Gzip</h3><p>开启方式可参考：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903605187641357">nginx开启gzip</a></p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208104535672.png" alt="image-20210208104535672"></p>
<blockquote>
<p>还有一种方式：打包的时候生成gz文件，上传到服务器端，这样就不需要nginx来压缩了，可以降低服务器压力。 可参考：<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000020976930">gzip压缩文件&amp;webPack配置Compression-webpack-plugin</a></p>
</blockquote>
<h3 id="2、服务端压缩"><a href="#2、服务端压缩" class="headerlink" title="2、服务端压缩"></a>2、服务端压缩</h3><p>server.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&#x27;express&#x27;);</span><br><span class="line">const app = express();</span><br><span class="line">const fs = require(&#x27;fs&#x27;);</span><br><span class="line">const compression = require(&#x27;compression&#x27;);</span><br><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.use(compression());</span><br><span class="line">app.use(express.static(&#x27;build&#x27;));</span><br><span class="line"></span><br><span class="line">app.get(&#x27;*&#x27;, (req,res) =&gt;&#123;</span><br><span class="line">    res.sendFile(path.join(__dirname+&#x27;/build/index.html&#x27;));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">const listener = app.listen(process.env.PORT || 3000, function () &#123;</span><br><span class="line">    console.log(`Listening on port $&#123;listener.address().port&#125;`);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>package.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;start&quot;: &quot;npm run build &amp;&amp; node server.js&quot;,</span><br></pre></td></tr></table></figure>

<p><img src="https://blog.poetries.top/img/static/images/image-20210208104641677.png" alt="image-20210208104641677"></p>
<h3 id="3、JavaScript、Css、Html压缩"><a href="#3、JavaScript、Css、Html压缩" class="headerlink" title="3、JavaScript、Css、Html压缩"></a>3、JavaScript、Css、Html压缩</h3><p>工程化项目中直接使用对应的插件即可，webpack的主要有下面三个：</p>
<ul>
<li><code>UglifyJS</code></li>
<li><code>webpack-parallel-uglify-plugin</code></li>
<li><code>terser-webpack-plugin</code></li>
</ul>
<blockquote>
<p>具体优缺点可参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_24147051/article/details/103557728">webpack常用的三种JS压缩插件</a>。<code>压缩原理</code>简单的讲就是去除一些空格、换行、注释，借助es6模块化的功能，做了一些<code>tree-shaking</code>的优化。同时做了一些代码混淆，一方面是为了更小的体积，另一方面也是为了源码的安全性。</p>
</blockquote>
<p>css压缩主要是<code>mini-css-extract-plugin</code>，当然前面的js压缩插件也会给你做好css压缩。使用姿势</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev mini-css-extract-plugin</span><br><span class="line">const MiniCssExtractPlugin = require(&quot;mini-css-extract-plugin&quot;);</span><br><span class="line">plugins:[</span><br><span class="line"> new MiniCssExtractPlugin(&#123;</span><br><span class="line">       filename: &quot;[name].css&quot;,</span><br><span class="line">       chunkFilename: &quot;[id].css&quot;</span><br><span class="line">   &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>html压缩可以用<code>HtmlWebpackPlugin</code>，单页项目就一个index.html,性能提升微乎其微~</p>
<h3 id="4、http2首部压缩"><a href="#4、http2首部压缩" class="headerlink" title="4、http2首部压缩"></a>4、http2首部压缩</h3><p><strong>http2的特点</strong></p>
<ul>
<li>二进制分帧</li>
<li>首部压缩</li>
<li>流量控制</li>
<li>多路复用</li>
<li>请求优先级</li>
<li>服务器推送<code>http2_push: &#39;xxx.jpg&#39;</code></li>
</ul>
<p>具体升级方式也很简单，修改一下<code>nginx</code>配置，方法请自行<code>Google</code></p>
<h2 id="五、webpack优化"><a href="#五、webpack优化" class="headerlink" title="五、webpack优化"></a>五、webpack优化</h2><p>上文中也提到了部分webpack插件，下面我再来看看还有哪些~</p>
<h3 id="1、DllPlugin-提升构建速度"><a href="#1、DllPlugin-提升构建速度" class="headerlink" title="1、DllPlugin 提升构建速度"></a>1、DllPlugin 提升构建速度</h3><blockquote>
<p>通过<code>DllPlugin</code>插件，将一些比较大的，基本很少升级的包拆分出来，生成<code>xx.dll.js</code>文件,通过<code>manifest.json</code>引用</p>
</blockquote>
<p>webpack.dll.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&quot;path&quot;);</span><br><span class="line">const webpack = require(&quot;webpack&quot;);</span><br><span class="line">module.exports = &#123;</span><br><span class="line">    mode: &quot;production&quot;,</span><br><span class="line">    entry: &#123;</span><br><span class="line">        react: [&quot;react&quot;, &quot;react-dom&quot;],</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &quot;[name].dll.js&quot;,</span><br><span class="line">        path: path.resolve(__dirname, &quot;dll&quot;),</span><br><span class="line">        library: &quot;[name]&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        new webpack.DllPlugin(&#123;</span><br><span class="line">            name: &quot;[name]&quot;,</span><br><span class="line">            path: path.resolve(__dirname, &quot;dll/[name].manifest.json&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>package.json</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;dll-build&quot;: &quot;NODE_ENV=production webpack --config webpack.dll.config.js&quot;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<blockquote>
<p>webpack4不需要配置dll了，因为webpack4打包性能已经足够优化，vue-cli3都已经移除<code>dll</code></p>
</blockquote>
<h3 id="2、splitChunks-拆包"><a href="#2、splitChunks-拆包" class="headerlink" title="2、splitChunks 拆包"></a>2、splitChunks 拆包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">optimization: &#123;</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">            cacheGroups: &#123;</span><br><span class="line">                vendor: &#123;</span><br><span class="line">                    name: &#x27;vendor&#x27;,</span><br><span class="line">                    test: /[\\/]node_modules[\\/]/,</span><br><span class="line">                    minSize: 0,</span><br><span class="line">                    minChunks: 1,</span><br><span class="line">                    priority: 10,</span><br><span class="line">                    chunks: &#x27;initial&#x27;</span><br><span class="line">                &#125;,</span><br><span class="line">                common: &#123;</span><br><span class="line">                    name: &#x27;common&#x27;,</span><br><span class="line">                    test: /[\\/]src[\\/]/,</span><br><span class="line">                    chunks: &#x27;all&#x27;,</span><br><span class="line">                    minSize: 0,</span><br><span class="line">                    minChunks: 2</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="六、骨架屏"><a href="#六、骨架屏" class="headerlink" title="六、骨架屏"></a>六、骨架屏</h2><blockquote>
<p>用css提前占好位置，当资源加载完成即可填充，减少页面的回流与重绘，同时还能给用户最直接的反馈。 图中使用插件：<a target="_blank" rel="noopener" href="https://github.com/buildo/react-placeholder">react-placeholder</a></p>
</blockquote>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3666ae07b9eb4d839f7a893b89d83f47~tplv-k3u1fbpfcp-watermark.image" alt="img"></p>
<p>关于实现骨架屏还有很多种方案，用<code>Puppeteer</code>服务端渲染的挺多的</p>
<p>使用css伪类：<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000020437426">只要css就能实现的骨架屏方案</a></p>
<h2 id="七、窗口化"><a href="#七、窗口化" class="headerlink" title="七、窗口化"></a>七、窗口化</h2><blockquote>
<p>原理：只加载当前窗口能显示的DOM元素，当视图变化时，删除隐藏的，添加要显示的DOM就可以保证页面上存在的dom元素数量永远不多，页面就不会卡顿</p>
</blockquote>
<p>图中使用的插件：<a target="_blank" rel="noopener" href="https://github.com/bvaughn/react-window">react-window</a></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a459cc811844b7793aff6c9878d19ad~tplv-k3u1fbpfcp-watermark.image" alt="img"></p>
<p>安装：<code>npm i react-window</code></p>
<p>引入：<code>import &#123; FixedSizeList as List &#125; from &#39;react-window&#39;;</code></p>
<p>使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const Row = (&#123; index, style &#125;) =&gt; (</span><br><span class="line">  &lt;div style=&#123;style&#125;&gt;Row &#123;index&#125;&lt;/div&gt;</span><br><span class="line">);</span><br><span class="line"> </span><br><span class="line">const Example = () =&gt; (</span><br><span class="line">  &lt;List</span><br><span class="line">    height=&#123;150&#125;</span><br><span class="line">    itemCount=&#123;1000&#125;</span><br><span class="line">    itemSize=&#123;35&#125;</span><br><span class="line">    width=&#123;300&#125;</span><br><span class="line">  &gt;</span><br><span class="line">    &#123;Row&#125;</span><br><span class="line">  &lt;/List&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="八、缓存"><a href="#八、缓存" class="headerlink" title="八、缓存"></a>八、缓存</h2><h3 id="1、http缓存"><a href="#1、http缓存" class="headerlink" title="1、http缓存"></a>1、http缓存</h3><h4 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive</h4><p>判断是否开启：看<code>response headers</code>中有没有<code>Connection: keep-alive</code> 。开启以后，看<code>network</code>的瀑布流中就没有 <code>Initial connection</code>耗时了</p>
<p><code>nginx</code>设置<code>keep-alive</code>（默认开启）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 0 为关闭</span><br><span class="line">#keepalive_timeout 0;</span><br><span class="line"># 65s无连接 关闭</span><br><span class="line">keepalive_timeout 65;</span><br><span class="line"># 连接数，达到100断开</span><br><span class="line">keepalive_requests 100;</span><br></pre></td></tr></table></figure>

<h4 id="Cache-Control-x2F-Expires-x2F-Max-Age"><a href="#Cache-Control-x2F-Expires-x2F-Max-Age" class="headerlink" title="Cache-Control &#x2F; Expires &#x2F; Max-Age"></a>Cache-Control &#x2F; Expires &#x2F; Max-Age</h4><p>设置资源是否缓存，以及缓存时间</p>
<h4 id="Etag-x2F-If-None-Match"><a href="#Etag-x2F-If-None-Match" class="headerlink" title="Etag &#x2F; If-None-Match"></a>Etag &#x2F; If-None-Match</h4><p>资源唯一标识作对比，如果有变化，从服务器拉取资源。如果没变化则取缓存资源，状态码304，也就是协商缓存</p>
<h4 id="Last-Modified-x2F-If-Modified-Since"><a href="#Last-Modified-x2F-If-Modified-Since" class="headerlink" title="Last-Modified &#x2F; If-Modified-Since"></a>Last-Modified &#x2F; If-Modified-Since</h4><p>通过对比时间的差异来觉得要不要从服务器获取资源</p>
<p>更多HTTP缓存参数可参考：<a target="_blank" rel="noopener" href="https://harttle.land/2017/04/04/using-http-cache.html">使用 HTTP 缓存：Etag, Last-Modified 与 Cache-Control</a></p>
<h3 id="2、Service-Worker"><a href="#2、Service-Worker" class="headerlink" title="2、Service Worker"></a>2、Service Worker</h3><blockquote>
<p>借助webpack插件<code>WorkboxWebpackPlugin</code>和<code>ManifestPlugin</code>,加载serviceWorker.js,通过<code>serviceWorker.register()</code>注册</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">new WorkboxWebpackPlugin.GenerateSW(&#123;</span><br><span class="line">    clientsClaim: true,</span><br><span class="line">    exclude: [/\.map$/, /asset-manifest\.json$/],</span><br><span class="line">    importWorkboxFrom: &#x27;cdn&#x27;,</span><br><span class="line">    navigateFallback: paths.publicUrlOrPath + &#x27;index.html&#x27;,</span><br><span class="line">    navigateFallbackBlacklist: [</span><br><span class="line">        new RegExp(&#x27;^/_&#x27;),</span><br><span class="line">        new RegExp(&#x27;/[^/?]+\\.[^/]+$&#x27;),</span><br><span class="line">    ],</span><br><span class="line">&#125;),</span><br><span class="line"></span><br><span class="line">new ManifestPlugin(&#123;</span><br><span class="line">    fileName: &#x27;asset-manifest.json&#x27;,</span><br><span class="line">    publicPath: paths.publicUrlOrPath,</span><br><span class="line">    generate: (seed, files, entrypoints) =&gt; &#123;</span><br><span class="line">        const manifestFiles = files.reduce((manifest, file) =&gt; &#123;</span><br><span class="line">            manifest[file.name] = file.path;</span><br><span class="line">            return manifest;</span><br><span class="line">        &#125;, seed);</span><br><span class="line">        const entrypointFiles = entrypoints.app.filter(</span><br><span class="line">            fileName =&gt; !fileName.endsWith(&#x27;.map&#x27;)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            files: manifestFiles,</span><br><span class="line">            entrypoints: entrypointFiles,</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

<p><img src="https://blog.poetries.top/img/static/images/image-20210208105415279.png" alt="image-20210208105415279"></p>
<h2 id="九、预加载-amp-amp-懒加载"><a href="#九、预加载-amp-amp-懒加载" class="headerlink" title="九、预加载 &amp;&amp; 懒加载"></a>九、预加载 &amp;&amp; 懒加载</h2><h3 id="1、preload"><a href="#1、preload" class="headerlink" title="1、preload"></a>1、preload</h3><p>就拿demo中的字体举例，正常情况下的加载顺序是这样的：</p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208105446451.png" alt="image-20210208105446451"></p>
<p>加入preload：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.119.woff2&quot; as=&quot;font&quot; crossorigin=&quot;anonymous&quot;/&gt; </span><br><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.118.woff2&quot; as=&quot;font&quot; crossorigin=&quot;anonymous&quot;/&gt; </span><br><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;https://fonts.gstatic.com/s/longcang/v5/LYjAdGP8kkgoTec8zkRgqHAtXN-dRp6ohF_hzzTtOcBgYoCKmPpHHEBiM6LIGv3EnKLjtw.116.woff2&quot; as=&quot;font&quot; crossorigin=&quot;anonymous&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://blog.poetries.top/img/static/images/image-20210208105522277.png" alt="image-20210208105522277"></p>
<h3 id="2、prefetch"><a href="#2、prefetch" class="headerlink" title="2、prefetch"></a>2、prefetch</h3><blockquote>
<p>场景：首页不需要这样的字体文件，下个页面需要：首页会以最低优先级<code>Lowest</code>来提前加载</p>
</blockquote>
<p>加入<code>prefetch</code>：</p>
<p>需要的页面，从<code>prefetch cache</code>中取</p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208105625448.png" alt="image-20210208105625448"></p>
<p>webpack也是支持这两个属性的:<a target="_blank" rel="noopener" href="https://www.cnblogs.com/skychx/p/webpack-webpackChunkName-webpackPreload-webpackPreload.html">webpackPrefetch 和 webpackPreload</a></p>
<h3 id="3、懒加载"><a href="#3、懒加载" class="headerlink" title="3、懒加载"></a>3、懒加载</h3><h4 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h4><p>机械图片</p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208105717958.png" alt="image-20210208105717958"></p>
<p><code>渐进式图片（类似高斯模糊）</code> 需要UI小姐姐出稿的时候指定这种格式</p>
<p><img src="https://blog.poetries.top/img/static/images/image-20210208105747314.png" alt="image-20210208105747314"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">响应式图片</span><br></pre></td></tr></table></figure>

<p>原生模式：&#96;&#96;</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7427e9243791461b8ffa49f47981cfba~tplv-k3u1fbpfcp-watermark.image?imageslim" alt="img"></p>
<h4 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h4><p>通过<code>函数 + import</code>实现</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const Page404 = () =&gt; import(/* webpackChunkName: &quot;error&quot; */&#x27;@views/errorPage/404&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="十、ssr-amp-amp-react-snap"><a href="#十、ssr-amp-amp-react-snap" class="headerlink" title="十、ssr &amp;&amp; react-snap"></a>十、ssr &amp;&amp; react-snap</h2><ul>
<li>服务端渲染<code>SSR</code>，vue使用<code>nuxt.js</code>，<code>react</code>使用<code>next.js</code></li>
<li><code>react-snap</code>可以借助<code>Puppeteer</code>实现先渲染单页，然后保留<code>DOM</code>，发送到客户端</li>
</ul>
<h2 id="十一、体验优化"><a href="#十一、体验优化" class="headerlink" title="十一、体验优化"></a>十一、体验优化</h2><h3 id="白屏loading"><a href="#白屏loading" class="headerlink" title="白屏loading"></a>白屏loading</h3><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41557f3a361c4cf899a4eab3bde79154~tplv-k3u1fbpfcp-watermark.image" alt="img"></p>
<p><strong>loading.html</strong> 需要自取哦，还有种方式，使用<code>webpack</code>插件<code>HtmlWebpackPlugin</code>将loading资源插入到页面中</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot; /&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;</span><br><span class="line">    &lt;title&gt;Loading&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      body &#123;</span><br><span class="line">        margin: 0;</span><br><span class="line">      &#125;</span><br><span class="line">      #loadding &#123;</span><br><span class="line">        position: fixed;</span><br><span class="line">        top: 0;</span><br><span class="line">        bottom: 0;</span><br><span class="line">        display: flex;</span><br><span class="line">        width: 100%;</span><br><span class="line">        align-items: center;</span><br><span class="line">        justify-content: center;</span><br><span class="line">      &#125;</span><br><span class="line">      #loadding &gt; span &#123;</span><br><span class="line">        display: inline-block;</span><br><span class="line">        width: 8px;</span><br><span class="line">        height: 100%;</span><br><span class="line">        margin-right: 5px;</span><br><span class="line">        border-radius: 4px;</span><br><span class="line">        -webkit-animation: load 1.04s ease infinite;</span><br><span class="line">        animation: load 1.04s ease infinite;</span><br><span class="line">      &#125;</span><br><span class="line">      @keyframes load &#123;</span><br><span class="line">        0%,</span><br><span class="line">        100% &#123;</span><br><span class="line">          height: 40px;</span><br><span class="line">          background: #98beff;</span><br><span class="line">        &#125;</span><br><span class="line">        50% &#123;</span><br><span class="line">          height: 60px;</span><br><span class="line">          margin-top: -20px;</span><br><span class="line">          background: #3e7fee;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;div id=&quot;loadding&quot;&gt;</span><br><span class="line">      &lt;span&gt;&lt;/span&gt;</span><br><span class="line">      &lt;span style=&quot;animation-delay: 0.13s&quot;&gt;&lt;/span&gt;</span><br><span class="line">      &lt;span style=&quot;animation-delay: 0.26s&quot;&gt;&lt;/span&gt;</span><br><span class="line">      &lt;span style=&quot;animation-delay: 0.39s&quot;&gt;&lt;/span&gt;</span><br><span class="line">      &lt;span style=&quot;animation-delay: 0.52s&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    window.addEventListener(&quot;DOMContentLoaded&quot;, () =&gt; &#123;</span><br><span class="line">      const $loadding = document.getElementById(&quot;loadding&quot;);</span><br><span class="line">      if (!$loadding) &#123;</span><br><span class="line">        return;</span><br><span class="line">      &#125;</span><br><span class="line">      $loadding.style.display = &quot;none&quot;;</span><br><span class="line">      $loadding.parentNode.removeChild($loadding);</span><br><span class="line">    &#125;);</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/22/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%89%8D%E7%AB%AF%E9%A1%B5%E9%9D%A2%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" data-id="cl7k9sbjq00jt98u01wai20sm" data-title="前端页面性能优化" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-性能优化/前端性能之Performance以及动画帧率(FPS)" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/16/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%B9%8BPerformance%E4%BB%A5%E5%8F%8A%E5%8A%A8%E7%94%BB%E5%B8%A7%E7%8E%87(FPS)/" class="article-date">
  <time class="dt-published" datetime="2021-03-16T09:43:18.000Z" itemprop="datePublished">2021-03-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">前端性能优化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/16/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%B9%8BPerformance%E4%BB%A5%E5%8F%8A%E5%8A%A8%E7%94%BB%E5%B8%A7%E7%8E%87(FPS)/">前端性能优化-Performance以及动画帧数</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p><code>Performance</code>是一个做前端性能监控离不开的<code>API</code>，最好在页面完全加载完成之后再使用，因为很多值必须在页面完全加载之后才能得到。最简单的办法是在<code>window.onload</code>事件中读取各种数据。</p>
</blockquote>
<h2 id="一、回顾页面加载过程"><a href="#一、回顾页面加载过程" class="headerlink" title="一、回顾页面加载过程"></a>一、回顾页面加载过程</h2><blockquote>
<p>要学习这套<code>API</code>的使用，先简单介绍下前端的基础知识</p>
</blockquote>
<h3 id="1-1-页面加载"><a href="#1-1-页面加载" class="headerlink" title="1.1 页面加载"></a>1.1 页面加载</h3><blockquote>
<p>一个页面的请求到响应再到显示出来，需要经过下面一些重要过程，当我们在浏览器输入一个<code>URL</code>或者说点击一个<code>URL</code>开始，会出现如下流程</p>
</blockquote>
<ul>
<li>页面准备</li>
<li>重定向：在<code>header</code>定义了重定向才会有这个过程，如果没有重定向，不会产生这个过程。</li>
<li><code>app cache</code>：会先检查这个域名是否有缓存，如果有缓存就不需要DNS解析域名。这里的<code>app</code>是值应用程序<code>application</code>，不指手机<code>app</code>。</li>
<li><code>DNS</code>解析：把域名解析成<code>IP</code>，如果直接用<code>ip</code>地址访问，不产生这个过程。</li>
<li><code>TCP</code>连接：<code>http</code>协议是经过<code>TCP</code>来传输的，所以产生一个<code>http</code>请求就会有<code>TCP connect</code>，但是依赖于长连接，不会产生这个过程。</li>
<li><code>request header</code>：请求头信息。</li>
<li><code>request body</code>：请求体信息，比如<code>get</code>请求是没有请求体信息的，所以没有这个过程，这就是为什么把头跟体分开写的原因。</li>
<li><code>response header</code>：响应头信息。</li>
<li><code>response body</code>：响应体信息。</li>
<li>解析<code>HTML</code>结构</li>
<li>加载外部脚本和样式表文件：正常来说<code>JS</code>、<code>css</code>都是外部加载的，当然有不正常的人啊，比如我。</li>
<li>解析并执行脚本代码</li>
<li>构建与解析<code>HTML DOM</code>树：这个过程可以去了解下<code>DOM</code>树是怎样的就明白啦。</li>
<li>加载外部图片</li>
<li>页面加载完成，显示出来啦</li>
</ul>
<h3 id="1-2-重定向分析"><a href="#1-2-重定向分析" class="headerlink" title="1.2 重定向分析"></a>1.2 重定向分析</h3><ul>
<li><code>app cach</code></li>
<li><code>DNS</code>解析</li>
<li><code>TCP</code>连接</li>
<li><code>request header</code></li>
<li>重定向</li>
<li><code>app cach</code></li>
<li><code>DNS</code>解析</li>
<li><code>TCP</code>连接</li>
<li><code>request header</code></li>
</ul>
<h2 id="二、performance"><a href="#二、performance" class="headerlink" title="二、performance"></a>二、performance</h2><h3 id="2-1-performance-timing"><a href="#2-1-performance-timing" class="headerlink" title="2.1 performance.timing"></a>2.1 performance.timing</h3><blockquote>
<p>这个API能帮我们得到整个页面请求的时间，如下图，在<code>Chrome</code>的<code>Console</code>是可以直接运行的</p>
</blockquote>
<p><img src="https://img-blog.csdn.net/20170316140524418" alt="img"></p>
<p>先解释下这些时间都是代表什么</p>
<p><strong>timing 对象里边的数据比较多，梳理如下几个关键性的节点</strong></p>
<ul>
<li><code>fetchStart</code>：发起获取当前文档的时间点，我的理解是浏览器收到发起页面请求的时间点；</li>
<li><code>domainLookupStart</code>：返回浏览器开始<code>DNS</code>查询的时间，如果此请求没有<code>DNS</code>查询过程，如长连接、资源<code>cache</code>、甚至是本地资源等，那么就返回<code>fetchStart</code>的值；</li>
<li><code>domainLookupEnd</code>：返回浏览器结束<code>DNS</code>查询的时间，如果没有<code>DNS</code>查询过程，同上；</li>
<li><code>connectStart</code>：浏览器向服务器请求文档，开始建立连接的时间，如果此连接是一个长连接，或者无需与服务器连接（命中缓存），则返回<code>domainLookupEnd</code>的值；</li>
<li><code>connectEnd</code>：浏览器向服务器请求文档，建立连接成功的时间；</li>
<li><code>requestStart</code>：开始请求文档的时间（注意没有<code>requestEnd</code>）;</li>
<li><code>responseStart</code>：浏览器开始接收第一个字节数据的时间，数据可能来自于服务器、缓存、或本地资源；</li>
<li><code>unloadEventStart</code>：卸载上一个文档开始的时间；</li>
<li><code>unloadEventEnd</code>：卸载上一个文档结束的时间；</li>
<li><code>domLoading</code>：浏览器把<code>document.readyState</code>设置为<code>“loading”</code>的时间点，开始构建<code>dom</code>树的时间点；</li>
<li><code>responseEnd</code>：浏览器接收最后一个字节数据的时间，或连接被关闭的时间；</li>
<li><code>domInteractive</code>：浏览器把<code>document.readyState设</code>置为<code>“interactive”</code>的时间点，<code>DOM</code>树创建结束；</li>
<li><code>domContentLoadedEventStart</code>：文档发生<code>DOMContentLoaded</code>事件的时间；</li>
<li><code>domContentLoadedEventEnd</code>：文档的<code>DOMContentLoaded</code>事件结束的时间；</li>
<li><code>domComplete</code>：浏览器把<code>document.readyState</code>设置为<code>“complete”</code>的时间点；</li>
<li><code>loadEventStart</code>：文档触发<code>load</code>事件的时间；</li>
<li><code>loadEventEnd</code>：文档出发<code>load</code>事件结束后的时间</li>
</ul>
<blockquote>
<p>再来一张图，表示各阶段的开始与结束对应的时间</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/8554143/33872196-d6c35844-df50-11e7-8bcc-1fdcac66ce64.png" alt="img"></p>
<blockquote>
<p>从以上的分析，我们就可以得到一些时间的计算</p>
</blockquote>
<ul>
<li>准备新页面耗时：<code>fetchStart - navigationStart</code></li>
<li>重定向时间：<code>redirectEnd - redirectStart</code></li>
<li><code>App Cache</code>时间：<code>domainLookupStart - fetchStart</code></li>
<li><code>DNS</code>解析时间：<code>domainLookupEnd -domainLookupStart</code></li>
<li><code>TCP</code>连接时间：<code>connectEnd - connectStart</code></li>
<li><code>request</code>时间：<code>responseEnd - requestStart</code>这个计算是代表请求响应加起来的时间</li>
<li>请求完毕到<code>DOM</code>树加载：<code>domInteractive -responseEnd</code></li>
<li>构建与解析<code>DOM</code>树，加载资源时间：<code>domCompleter -domInteractive</code></li>
<li><code>load</code>时间：<code>loadEventEnd - loadEventStart</code></li>
<li>整个页面加载时间：<code>loadEventEnd -navigationStart</code></li>
<li>白屏时间：<code>responseStart-navigationStart</code></li>
</ul>
<h3 id="2-2-performance-getEntries"><a href="#2-2-performance-getEntries" class="headerlink" title="2.2 performance.getEntries()"></a>2.2 performance.getEntries()</h3><blockquote>
<p>这个API能帮我们获得资源的请求时间，包括JS、CSS、图片等</p>
</blockquote>
<p><img src="https://img-blog.csdn.net/20170316155201356" alt="img"></p>
<blockquote>
<p>如上图可以看到这个API请求返回的是一个数组，这个数组包括整个页面所有的资源加载，上图打开了一个其中一个资源，可以看到如下信息</p>
</blockquote>
<ul>
<li><code>entryType</code>：类型为<code>resource</code></li>
<li><code>name</code>：资源的<code>url</code></li>
<li><code>initiatorType</code>：资源是<code>link</code></li>
<li>资源时间：<code>duration</code>的值，是<code>responseEnd - startTime</code>得到的</li>
</ul>
<h3 id="2-3-performance-memory"><a href="#2-3-performance-memory" class="headerlink" title="2.3 performance.memory"></a>2.3 performance.memory</h3><blockquote>
<p>这个API主要是得到浏览器内存情况</p>
</blockquote>
<ul>
<li><code>jsHeapSizeLimit</code>：内存大小限制</li>
<li><code>totalJSHeapSize</code>：可使用的内容</li>
<li><code>userdJSHeapSize</code>：已使用的内容</li>
</ul>
<blockquote>
<p><code>userdJSHeapSize</code>表示所有被使用的JS堆栈内存，<code>totalJSHeapSize</code>可使用的JS堆栈内存，如果<code>userdJSHeapSize</code>的值大于<code>totalJSHeapSize</code>，就可能出现内存泄漏</p>
</blockquote>
<p><img src="https://img-blog.csdn.net/20170316155226893" alt="img"></p>
<h2 id="三、动画帧率FPS"><a href="#三、动画帧率FPS" class="headerlink" title="三、动画帧率FPS"></a>三、动画帧率FPS</h2><h3 id="3-1-流畅动画的标准"><a href="#3-1-流畅动画的标准" class="headerlink" title="3.1 流畅动画的标准"></a>3.1 流畅动画的标准</h3><blockquote>
<p><code>FPS</code> 表示的是每秒钟画面更新次数。我们平时所看到的连续画面都是由一幅幅静止画面组成的，每幅画面称为一帧，<code>FPS</code> 是描述“帧”变化速度的物理量</p>
</blockquote>
<ul>
<li>理论上说，<code>FPS</code> 越高，动画会越流畅，目前大多数设备的屏幕刷新率为 <code>60</code> 次&#x2F;秒，所以通常来讲 <code>FPS</code> 为 <code>60 frame/s</code> 时动画效果最好，也就是每帧的消耗时间为 <code>16.6</code>7ms</li>
</ul>
<p><strong>不同帧率的体验</strong></p>
<ul>
<li>帧率能够达到 <code>50 ～ 60 FPS</code> 的动画将会相当流畅，让人倍感舒适；</li>
<li>帧率在 <code>30 ～ 50 FPS</code> 之间的动画，因各人敏感程度不同，舒适度因人而异；</li>
<li>帧率在 <code>30 FPS</code> 以下的动画，让人感觉到明显的卡顿和不适感；</li>
<li>帧率波动很大的动画，亦会使人感觉到卡顿</li>
</ul>
<h3 id="3-2-获取我们页面动画当前的-FPS-值"><a href="#3-2-获取我们页面动画当前的-FPS-值" class="headerlink" title="3.2 获取我们页面动画当前的 FPS 值"></a>3.2 获取我们页面动画当前的 FPS 值</h3><blockquote>
<p>那么我们该如何准确的获取我们页面动画当前的 FPS 值呢？</p>
</blockquote>
<h4 id="3-2-1-方法一-借助-Chrome-开发者工具"><a href="#3-2-1-方法一-借助-Chrome-开发者工具" class="headerlink" title="3.2.1 方法一 借助 Chrome 开发者工具"></a>3.2.1 方法一 借助 Chrome 开发者工具</h4><blockquote>
<p><code>Chrome</code> 提供给开发者的功能十分强大，在开发者工具中，我们进行如下选择调出 <code>FPS meter</code> 选项：</p>
</blockquote>
<p><img src="https://user-images.githubusercontent.com/8554143/33823997-e25d42dc-de97-11e7-92e3-8521ede019df.png" alt="img"></p>
<blockquote>
<p>通过这个按钮，可以开启页面实时 <code>Frame Rate</code> (帧率) 观测及页面 <code>GPU</code> 使用率</p>
</blockquote>
<p><strong>但是这个方法缺点太多了</strong></p>
<ul>
<li>这个只能一次观测一到几个页面，而且需要人工实时观测</li>
<li>数据只能是主观感受，并没有一个十分精确的数据不断上报或者被收集</li>
<li>因此，我们需要更加智能的方法。</li>
</ul>
<h4 id="3-2-2-方法二-借助-Frame-Timing-API"><a href="#3-2-2-方法二-借助-Frame-Timing-API" class="headerlink" title="3.2.2 方法二 借助 Frame Timing API"></a>3.2.2 方法二 借助 Frame Timing API</h4><blockquote>
<p>Blink 内核早期架构</p>
</blockquote>
<ul>
<li>以 <code>Chrome</code> 浏览器内核 <code>Blink</code> 渲染页面为例。对早期的 <code>Chrome</code> 浏览器而言，每个页面 <code>Tab</code> 对应一个独立的 <code>renderer</code> 进程，<code>Renderer</code>进程中包含了主线程和合成线程。早期 <code>Chrome</code> 内核架构</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/8554143/33830985-4ab23108-deb1-11e7-89ed-6b9f60dcb2fd.jpg" alt="img"></p>
<p><strong>其中，主线程主要负责</strong>：</p>
<ul>
<li><code>Javascript</code> 的计算与执行</li>
<li><code>CSS</code> 样式计算</li>
<li><code>Layout</code> 计算</li>
<li>将页面元素绘制成位图（<code>paint</code>），也就是光栅化（<code>Raster</code>）</li>
<li>将位图给合成线程</li>
</ul>
<p><strong>合成线程则主要负责</strong>：</p>
<ul>
<li>将位图(<code>GraphicsLayer</code> 层)以纹理(<code>texture</code>)的形式上传给 <code>GPU</code></li>
<li>计算页面的可见部分和即将可见部分（滚动）</li>
<li><code>CSS</code> 动画处理</li>
<li>通知 GPU 绘制位图到屏幕上</li>
</ul>
<blockquote>
<p>其实知道了这两个线程之后，下一个概念是厘清 <code>CSS</code> 动画与 <code>JS</code> 动画的细微区别（当然它们都是 Web 动画）</p>
</blockquote>
<p><strong>JS 动画与 CSS 动画的细微区别</strong></p>
<ul>
<li>对于 <code>JS</code>动画而言，它们运行时的帧率即是主线程和合成线程加起来消耗的时间。对于流畅动画而言，我们希望它们每一帧的耗时保持在 <code>16.67ms</code> 之内;</li>
<li>而对于 <code>CSS</code> 动画而言，由于其流程不受主线程的影响，所以希望能得到合成线程的消耗的时间，而合成线程的绘制频率也反映了滚动和 CSS 动画的流程性。</li>
</ul>
<blockquote>
<p>上面主要想得出的一个结论是。如果我们能够知道主线程和合成线程每一帧消耗的时间，那么我们就能大致得出对应的 Web 动画的帧率。那么上面说到的 <code>Frame Timing API</code> 是否可以帮助我们拿到这个时间点呢</p>
</blockquote>
<p><strong>什么是 Frame Timing API ？</strong></p>
<blockquote>
<p><code>Frame Timing API</code> 是 <code>Web Performance Timing API</code> 标准中的其中一位成员。<code>Web Performance Timing API</code> 是 W3C 推出的一套性能 API 标准，用于帮助开发者对网站各方面的性能进行精确的分析与控制，提升 Web 网站性能</p>
</blockquote>
<p>它包含许多子类 API，完成不同的功能，大致如下</p>
<p><img src="https://user-images.githubusercontent.com/8554143/33871575-0799a66a-df4e-11e7-85fd-9b40d43161da.png" alt="img"></p>
<p>怎么使用呢？以 <code>Navigation Timing</code>, <code>Performance Timeline</code>, <code>Resource Timing</code> 为例子，对于兼容它的浏览器，它以只读属性的形式对外暴露挂载在 <code>window.performance</code> 上。</p>
<p>我们再来回顾这张图</p>
<p><img src="https://user-images.githubusercontent.com/8554143/33872196-d6c35844-df50-11e7-8bcc-1fdcac66ce64.png" alt="img"></p>
<blockquote>
<p>通过这张图以及上面的 <code>window.performance.timing</code>，我们就可以轻松的统计出页面每个重要节点的耗时，这就是 <code>Web Performance Timing API</code> 的强大之处，感兴趣的可以详细去研究研究，使用在页面统计上</p>
</blockquote>
<p><strong>Frame Timing API 示意</strong></p>
<blockquote>
<p>终于可以回归正题，借助 <code>Web Performance Timing API</code> 中的<code>Frame Timing API</code>，可以轻松的拿到每一帧中，主线程以及合成线程的时间。或者更加容易，直接拿到每一帧的耗时</p>
</blockquote>
<p>获取 <code>Render</code> 主线程和合成线程的记录，每条记录包含的信息基本如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var rendererEvents = window.performance.getEntriesByType(&quot;renderer&quot;);</span><br><span class="line">var compositeThreadEvents = window.performance.getEntriesByType(&quot;composite&quot;);</span><br></pre></td></tr></table></figure>

<p>或者是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ar observer = new PerformanceObserver(function(list) &#123;</span><br><span class="line">    var perfEntries = list.getEntries();</span><br><span class="line">    for (var i = 0; i &lt; perfEntries.length; i++) &#123;</span><br><span class="line">        console.log(&quot;frame: &quot;, perfEntries[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line">// subscribe to Frame Timing</span><br><span class="line">observer.observe(&#123;entryTypes: [&#x27;frame&#x27;]&#125;);</span><br></pre></td></tr></table></figure>

<p>每条记录包含的信息基本如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  sourceFrameNumber: 120,</span><br><span class="line">  startTime: 1342.549374253</span><br><span class="line">  cpuTime: 6.454313323</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>每个记录都包括唯一的 <code>Frame Number</code>、<code>Frame</code> 开始时间以及 <code>cpuTime</code> 时间。通过计算每一条记录的 <code>startTime</code> ，我们就可以算出每两帧间的间隔，从而得到动画的帧率是否能够达到 <code>60 FPS</code></p>
</blockquote>
<p><strong>看看 Web Performance Timing API 整体的兼容性</strong></p>
<p><img src="https://user-images.githubusercontent.com/8554143/33873788-4ad802e2-df57-11e7-9174-13913bcaa9b5.png" alt="img"></p>
<blockquote>
<p><code>Frame Timing API</code> 虽好，但是，现在 <code>Frame Timing API</code> 的兼容性不算很友好，额，不友好到什么程度呢。还没有任何浏览器支持，处于实验性阶段，属于面向未来编程</p>
</blockquote>
<h4 id="3-2-3-方法三-借助-requestAnimationFrame-API"><a href="#3-2-3-方法三-借助-requestAnimationFrame-API" class="headerlink" title="3.2.3 方法三 借助 requestAnimationFrame API"></a>3.2.3 方法三 借助 requestAnimationFrame API</h4><blockquote>
<p>从上面的介绍，我们得知，如果我们可以到得到每一帧中的固定一个时间点，那么两者相减，也能够近似得到一帧所消耗的时间</p>
</blockquote>
<p>这次，我们借助兼容性不错的 <code>requestAnimationFrame API</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 语法</span><br><span class="line">window.requestAnimationFrame(callback);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>requestAnimationFrame</code> 大家应该都不陌生，方法告诉浏览器您希望执行动画并请求浏览器调用指定的函数在下一次重绘之前更新动画。</li>
<li>当你准备好更新屏幕画面时你就应用此方法。这会要求你的动画函数在浏览器下次重绘前执行。回调的次数常是每秒 <code>60</code> 次，大多数浏览器通常匹配 <code>W3C</code> 所建议的刷新率</li>
</ul>
<p><strong>使用 requestAnimationFrame 计算 FPS 原理</strong></p>
<blockquote>
<p>原理是，正常而言 <code>requestAnimationFrame</code> 这个方法在一秒内会执行 <code>60</code> 次，也就是不掉帧的情况下。假设动画在时间 <code>A</code> 开始执行，在时间 <code>B</code> 结束，耗时 <code>x ms</code>。而中间 <code>requestAnimationFrame</code> 一共执行了 <code>n</code> 次，则此段动画的帧率大致为：<code>n / (B - A)</code></p>
</blockquote>
<p>核心代码如下，能近似计算每秒页面帧率，以及我们额外记录一个 <code>allFrameCount</code>，用于记录 <code>rAF</code> 的执行次数，用于计算每次动画的帧率 ：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">var rAF = function () &#123;</span><br><span class="line">    return (</span><br><span class="line">        window.requestAnimationFrame ||</span><br><span class="line">        window.webkitRequestAnimationFrame ||</span><br><span class="line">        function (callback) &#123;</span><br><span class="line">            window.setTimeout(callback, 1000 / 60);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;();</span><br><span class="line">  </span><br><span class="line">var frame = 0;</span><br><span class="line">var allFrameCount = 0;</span><br><span class="line">var lastTime = Date.now();</span><br><span class="line">var lastFameTime = Date.now();</span><br><span class="line">  </span><br><span class="line">var loop = function () &#123;</span><br><span class="line">    var now = Date.now();</span><br><span class="line">    var fs = (now - lastFameTime);</span><br><span class="line">    var fps = Math.round(1000 / fs);</span><br><span class="line">  </span><br><span class="line">    lastFameTime = now;</span><br><span class="line">    // 不置 0，在动画的开头及结尾记录此值的差值算出 FPS</span><br><span class="line">    allFrameCount++;</span><br><span class="line">    frame++;</span><br><span class="line">  </span><br><span class="line">    if (now &gt; 1000 + lastTime) &#123;</span><br><span class="line">        var fps = Math.round((frame * 1000) / (now - lastTime));</span><br><span class="line">        console.log(`$&#123;new Date()&#125; 1S内 FPS：`, fps);</span><br><span class="line">        frame = 0;</span><br><span class="line">        lastTime = now;</span><br><span class="line">    &#125;;</span><br><span class="line">  </span><br><span class="line">    rAF(loop);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">loop();</span><br></pre></td></tr></table></figure>

<p>寻找一个有动画不断运行的页面进行测试，可以看到代码运行如下：</p>
<p><img src="https://user-images.githubusercontent.com/8554143/33877304-eae6fddc-df62-11e7-8d5f-8674dba3d1f9.png" alt="img"></p>
<ul>
<li>使用了我之前制作的一个页面进行了测试，使用<code>Chrome</code> 同时调出页面的 <code>FPS meter</code>，对比两边的实时 <code>FPS</code>值，基本吻合。</li>
<li>测试页面，<code>Solar System</code>。你可以将上面的代码贴到这个页面的 <code>console</code> 中，测试一下数据</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/8554143/33877626-ed17f3c6-df63-11e7-8bae-40b9512c2645.gif" alt="img"></p>
<ul>
<li>对比右上角的 <code>Frame Rate</code>，帧率基本一致。在大部分情况下，这种方法可以很好的得出 Web 动画的帧率。</li>
<li>如果我们需要统计某个特定动画过程的帧率，只需要在动画开始和结尾两处分别记录 <code>allFrameCount</code> 这个数值大小，再除以中间消耗的时间，也可以得出特定动画过程的 <code>FPS</code> 值。</li>
<li>值得注意的是，这个方法计算的结果和真实的帧率肯定是存在误差的，因为它是将每两次主线程执行 <code>javascript</code>的时间间隔当成一帧，而非上面说的主线程加合成线程所消耗的时间为一帧。但是对于现阶段而言，算是一种可取的方法</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/16/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%B9%8BPerformance%E4%BB%A5%E5%8F%8A%E5%8A%A8%E7%94%BB%E5%B8%A7%E7%8E%87(FPS)/" data-id="cl7k9sbjn00jl98u0hbh0arn2" data-title="前端性能优化-Performance以及动画帧数" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-html+css+js+ts/jQuery总结" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/12/html+css+js+ts/jQuery%E6%80%BB%E7%BB%93/" class="article-date">
  <time class="dt-published" datetime="2021-03-12T12:16:23.000Z" itemprop="datePublished">2021-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/12/html+css+js+ts/jQuery%E6%80%BB%E7%BB%93/">jQurty总结</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="第一节-jQuery初步认知"><a href="#第一节-jQuery初步认知" class="headerlink" title="第一节 jQuery初步认知"></a>第一节 jQuery初步认知</h4><hr>
<h5 id="jQuery概述"><a href="#jQuery概述" class="headerlink" title="jQuery概述"></a>jQuery概述</h5><hr>
<ul>
<li><p><strong><code>JQuery</code>概念</strong></p>
<ul>
<li><p>&#96;&#96;&#96;<br>javascript</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  概念</span><br><span class="line"></span><br><span class="line">  - 基于`Js`语言的`API`和语法组织逻辑，通过内置`window`和`document`对象，来操作内存中的`DOM`元素</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  JQuery</span><br></pre></td></tr></table></figure>

<p>概念</p>
<ul>
<li>基于<code>javascript</code>的，同上，提高了代码的效率</li>
</ul>
</li>
</ul>
</li>
<li><p><strong><code>jQuery</code>是什么:</strong></p>
<ul>
<li>是一个<code>javascript</code>代码仓库，我们称之为<code>javascript</code>框架。</li>
<li>是一个快速的简洁的<code>javascript</code>框架，可以简化查询<code>DOM</code>对象、处理事件、制作动画、处理<code>Ajax</code>交互过程。</li>
<li>它可以帮我们做什么(有什么优势)<ul>
<li>轻量级、体积小，使用灵巧(只需引入一个<code>js</code>文件)</li>
<li>强大的选择器</li>
<li>出色的<code>DOM</code>操作的封装</li>
<li>出色的浏览器兼容性</li>
<li>可靠的事件处理机制</li>
<li>完善的<code>Ajax</code></li>
<li>链式操作、隐式迭代</li>
<li>方便的选择页面元素(模仿<code>CSS</code>选择器更精确、灵活)</li>
<li>动态更改页面样式&#x2F;页面内容(操作<code>DOM</code>，动态添加、移除样式)</li>
<li>控制响应事件(动态添加响应事件)</li>
<li>提供基本网页特效(提供已封装的网页特效方法)</li>
<li>快速实现通信(<code>ajax</code>)</li>
<li>易扩展、插件丰富</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>如何引入<code>JQuery</code>包</strong></p>
<ul>
<li>引入本地的<code>JQuery</code></li>
<li>引入<code>Google</code>在线提供的库文件（稳定可靠高速）</li>
<li>使用<code>Google</code>提供的<code>API</code>导入 &#96;&#96;</li>
<li>写第一个<code>JQUery</code>案例<ul>
<li>解释:在<code>JQuery</code>库中，<code>$</code>是<code>JQuery</code>的别名，<code>$()</code>等效于就<code>jQuery()</code></li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=“text/javascript” src=“”&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=“text/javascript”&gt;</span><br><span class="line">	$(function()&#123;</span><br><span class="line">		alert(“jQuery 你好!”);</span><br><span class="line">	&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>讲解<code>$(function()&#123;&#125;)</code>;</strong></p>
<ul>
<li><p><code>$</code>是<code>jQuery</code>别名。如<code>$()</code>也可<code>jQuery()</code>这样写,相当于页面初始化函数，当页面加载完毕，会执行<code>jQuery()</code>。</p>
</li>
<li><p>希望在做所有事情之前，<code>JQuery</code>操作<code>DOM</code>文档。必须确保在<code>DOM</code>载入完毕后开始执行，应该用<code>ready</code>事件做处理<code>HTML</code>文档的开始</p>
</li>
<li><pre><code>$(document).ready(function()&#123;&#125;)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    ;</span><br><span class="line"></span><br><span class="line">    - 类似于`js`的`window.onload`事件函数，但是`ready`事件要先于`onload`事件执行</span><br><span class="line">    - `window.onload = function()&#123;&#125;`;</span><br><span class="line"></span><br><span class="line">  - 为方便开发，`jQuery`简化这样的方法，直接用`$()`表示</span><br><span class="line"></span><br><span class="line">  - `JQuery`的`ready`事件不等于`Js`的`load`：</span><br><span class="line"></span><br><span class="line">    - 执行时机不同：`load`需要等外部图片和视频等全部加载才执行。`ready`是`DOM`绘制完毕后执行，先与外部文件</span><br><span class="line">    - 用法不同：`load`只可写一次，`ready`可以多次</span><br><span class="line"></span><br><span class="line">- **`window.onload`与`$(document).ready()`对比**</span><br><span class="line"></span><br><span class="line">|          | window.onload                            | $(document).ready()                                          |</span><br><span class="line">| :------- | :--------------------------------------- | :----------------------------------------------------------- |</span><br><span class="line">| 执行时机 | 必须等网页中所有内容加载完后(图片)才执行 | 网页中的`DOM`结构绘制完后就执行,可能`DOM`元素相关的东西并没有加载完 |</span><br><span class="line">| 编写个数 | 不能同时执行多个                         | 能同时执行多个                                               |</span><br><span class="line">| 简化写法 | 无                                       | `$(document).ready(function()&#123; //.. &#125;);`  推荐写法：`$(function()&#123; &#125;);` |</span><br><span class="line"></span><br><span class="line">- **`jQuery`有哪些功能(`API`)**：</span><br><span class="line">  - 选择器</span><br><span class="line">  - 过滤器</span><br><span class="line">  - 事件</span><br><span class="line">  - 效果</span><br><span class="line">  - `ajax`</span><br><span class="line">- **简单的`JQuery`选择器**：</span><br><span class="line">  - `JQuery`基本选择器（`ID`选择器，标签选择器，类选择器，通配选择器和组选择器`5`种）</span><br><span class="line">  - `ID`选择器：`document.getElementById(id)`与`$(&quot;#id&quot;)`对比(改变文字大小)—`id`唯一，返回单个元素</span><br><span class="line">  - 标签选择器：`document.getElementsByTagName(tagName)`与`$(&quot;tagname&quot;)`对比—多个标签，返回数组</span><br><span class="line">  - 类选择器:`$(&quot;.className&quot;)`–多个`classname`（改变背景图片）</span><br><span class="line">  - 通配选择器：`document.getElementsByTagName(&quot;*&quot;)`与`$(&quot;*&quot;)`对比—指范围内的所有标签元素</span><br><span class="line">  - 组选择器：`$(&quot;seletor1,seletor2,seletor3&quot;)`—-无数量限制，用逗号分割</span><br><span class="line"></span><br><span class="line">##### 初步了解`JQuery`</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- `JQuery`是什么</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    javascript</span><br></pre></td></tr></table></figure>

用来干什么的：

- 操作`DOM`对象
- 动态操作样式`css`
- 数据访问
- 控制响应事件等
</code></pre>
</li>
<li><p><code>jQuery</code>作用一样，只是更加快速简洁</p>
</li>
</ul>
</li>
<li><p><strong>如何引用<code>JQuery</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line">写第一个JQUery案例</span><br><span class="line">&lt;script type=“text/javascript” src=“”&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=“text/javascript”&gt;</span><br><span class="line">	$(function()&#123;</span><br><span class="line">		alert(“jQuery 你好!”);</span><br><span class="line">	&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>$()讲解</code></strong></p>
<ul>
<li><code>$</code>在<code>JQuery</code>库中，<code>$</code>是<code>JQuery</code>的别名，<code>$()</code>等效于就<code>jQuery()</code>.</li>
<li><code>$()</code>是<code>JQuery</code>方法,赞可看作是<code>JQuery</code>的选择器，与<code>css</code>选择器相似（可做对比）</li>
<li><code>var jQuery==$ =function()&#123;&#125;</code> <code>$()</code>本质就是一个函数也就是 <code>jQuery</code>的核心函数</li>
<li>只要是<code>jQuery</code>的对象都这样变量加上一个<code>符号$</code>方便识别：<code>var $div = $(&quot;#&quot;)</code></li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function　$(id)&#123;</span><br><span class="line">		return document.getElementById(id);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong><code>$()</code>和<code>document</code>是相等的吗</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;a&quot; class=&quot;aa&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;b&quot; class=&quot;aa&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;c&quot; class=&quot;aa&quot;&gt;&lt;/div&gt;</span><br><span class="line">alert(document.getElementById(&quot;id&quot;) == $(&quot;#aa&quot;));//返回结果为false</span><br><span class="line">alert(document.getElementById(&quot;id&quot;) == $(&quot;#aa&quot;).get(0));//返回true</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>代理对象<code>$()</code></strong></p>
<ul>
<li><p><code>jQuery</code>中返回的是代理对象本身</p>
</li>
<li><p><code>jQuery</code>的核心原理是通过选择器找到对应的代理对象</p>
</li>
<li><p><code>jQuery</code>全都是通过方法操作</p>
</li>
<li><p>样式选择器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;.className&quot;)</span><br></pre></td></tr></table></figure>

<ul>
<li><code>$(&quot;.aa&quot;).css(&quot;color&quot;,&quot;green&quot;);</code></li>
</ul>
</li>
<li><p>id选择器(“”)</p>
<ul>
<li><code>$(&quot;#a&quot;).css(&quot;background-color&quot;,&quot;#ff0066&quot;);</code></li>
</ul>
</li>
<li><p>标签选择器</p>
<ul>
<li><code>$(&quot;p&quot;).css(&quot;color&quot;,&quot;#cc3366&quot;);</code></li>
</ul>
</li>
<li><p>组选择器</p>
<ul>
<li><code>$(&quot;#b ul li&quot;).size();</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>对象转换(<code>$(element)</code>)</strong></p>
<ul>
<li>原生<code>dom</code>对象和<code>jquery</code>代理对象的相互转换</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(传入的原生对象);</span><br><span class="line">//原生对象转化成jQuery对象</span><br><span class="line">var nav = document.getElementById(&quot;nav&quot;);</span><br><span class="line">var $nav = $(nav);</span><br><span class="line">alert($nav.get(0) == nav);//true</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>检索范围的限制（<code>$(&#39;字符串&#39;,element)</code>）</strong></p>
<ul>
<li><strong>总结：三种写法对比：</strong><ul>
<li>方式一：不推荐 搜索速度最慢<ul>
<li><code>$(&quot;#nav&quot;).css();</code></li>
<li><code>$(&quot;#nav li&quot;).css();</code></li>
</ul>
</li>
<li>方式二：搜索速度最快 链式操作<ul>
<li><code>$(&quot;#nav&quot;).css().children().css();</code></li>
</ul>
</li>
<li>方式三：也常用 速度第二快<ul>
<li><code>var $nav = $(&quot;#nav&quot;).css()</code>;</li>
<li><code>$(&quot;li&quot;,$nav).css()</code>; <code>$nav</code>限制了搜索范围 速度快</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>总结： <code>$()</code> <code>jquery</code>核心方法的作用和使用场景</strong></p>
<ul>
<li>如果是一个字符串参数并且没有标签对（选择器）<code>$(ul.nav&quot;)</code></li>
<li>如果是一个字符串参数并且有标签对（创建<code>html</code>标签）<code>$(&quot;&quot;)</code> –最终加到<code>DOM</code>树中 <code>$xx.append(&quot;&quot;)</code>;</li>
<li>如果是传入一个<code>element dom</code>对象，直接包装为<code>proxy</code>对象返回 <code>$(DOM对象)</code></li>
<li>如果第一个参数是字符串，第二个是<code>element</code> <code>dom</code>对象的话，那么就是在<code>element</code>这个<code>dom</code>对象里面寻找选择器对应的元素并且代理 <code>$(&quot;li&quot;,$DOM对象)</code></li>
</ul>
</li>
<li><p><strong>代理模式以及代理内存结构</strong></p>
</li>
</ul>
<p><img src="http://7xq6al.com1.z0.glb.clouddn.com/jquery2.png" alt="代理内存结构1"></p>
<p><img src="http://7xq6al.com1.z0.glb.clouddn.com/jquery3.png" alt="代理内存结构2"></p>
<h4 id="第二节-选择器"><a href="#第二节-选择器" class="headerlink" title="第二节 选择器"></a>第二节 选择器</h4><hr>
<ul>
<li><strong>来回顾一下<code>CSS</code>常用的选择器</strong></li>
</ul>
<table>
<thead>
<tr>
<th align="left">选择器</th>
<th align="left">语法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">标签选择器</td>
<td align="left"><code>E&#123;css规则&#125;</code></td>
<td align="left">以文档元素作为选择符</td>
</tr>
<tr>
<td align="left"><code>ID</code>选择器</td>
<td align="left"><code>#ID&#123;css规则&#125;</code></td>
<td align="left"><code>ID</code>作为选择符</td>
</tr>
<tr>
<td align="left">类选择器</td>
<td align="left"><code>E.className&#123;css规则&#125;</code></td>
<td align="left"><code>class</code>作为选择符</td>
</tr>
<tr>
<td align="left">群组选择器</td>
<td align="left"><code>E1,E2,E3&#123;css规则&#125;</code></td>
<td align="left">多个选择符应用同样的样式</td>
</tr>
<tr>
<td align="left">后代选择器</td>
<td align="left"><code>E F&#123;css规则&#125;</code></td>
<td align="left">元素<code>E</code>的任意后代元素<code>F</code></td>
</tr>
</tbody></table>
<ul>
<li><p><strong>选择器引擎规则(<code>$(&#39;字符串&#39;)</code>)</strong></p>
<ul>
<li>&#96;&#96;&#96;<br>css<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    选择器的规则</span><br><span class="line"></span><br><span class="line">    - 标签选择器</span><br><span class="line">    - `id`选择器</span><br><span class="line">    - 类选择器</span><br><span class="line">    - 混合选择器</span><br><span class="line"></span><br><span class="line">  - `css3`的选择器规则</span><br><span class="line"></span><br><span class="line">  - 状态和伪类（`:even` `:odd` `:first` `:last` `:eq(index)`）</span><br><span class="line"></span><br><span class="line">  - 属性（`[attr=value]`）</span><br><span class="line"></span><br><span class="line">- 层级选择器:通过`DOM`的嵌套关系匹配元素</span><br><span class="line">  - `jQuery`层级选择器—-包含选择器、子选择器、相邻选择器、兄弟选择器4种</span><br><span class="line">  - a.包含选择器：`$(&quot;a b&quot;)`在给定的祖先元素下匹配所有后代元素。(不受层级限制)</span><br><span class="line">  - b.子选择器：`$(&quot;parent &gt; child&quot;)`在给定的父元素下匹配所有子元素。</span><br><span class="line">  - c.相邻选择器：`$(&quot;prev + next&quot;)` 匹配所有紧接在`prev`元素后的`next`元素。</span><br><span class="line">  - d.兄弟选择器：`$(&quot;prev ~ siblings&quot;)` 匹配prev元素之后的所有`sibling`元素。</span><br><span class="line"></span><br><span class="line">##### 过滤选择器</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- **基本过滤选择**</span><br><span class="line"></span><br><span class="line">| 选择器       | 说明                           | 返回     |</span><br><span class="line">| :----------- | :----------------------------- | :------- |</span><br><span class="line">| `:first`     | 匹配找到的第1个元素            | 单个元素 |</span><br><span class="line">| `:last`      | 匹配找到的最后一个元素         | 单个元素 |</span><br><span class="line">| `:eq`        | 匹配一个给定索引值的元素       | 单个元素 |</span><br><span class="line">| `:even`      | 匹配所有索引值为偶数的元素     | 集合元素 |</span><br><span class="line">| `: odd`      | 匹配所有索引值为奇数的元素     | 集合元素 |</span><br><span class="line">| `:gt(index)` | 匹配所有大于给定索引值的元素   | 集合元素 |</span><br><span class="line">| `:lt(index)` | 匹配所有小于给定索引值的元素   | 集合元素 |</span><br><span class="line">| `:not`       | 去除所有与给定选择器匹配的元素 | 集合元素 |</span><br><span class="line">| `:animated`  | 选取当前正在执行动画的所有元素 | 集合元素 |</span><br><span class="line">| `focus`      | 选取当前正在获取焦点的元素     | 集合元素 |</span><br><span class="line"></span><br><span class="line">- **内容过滤选择器**</span><br><span class="line"></span><br><span class="line">| 选择器            | 描述                             | 返回     |</span><br><span class="line">| :---------------- | :------------------------------- | :------- |</span><br><span class="line">| `:contains(text)` | 选取含有文本内容为text的元素     | 集合元素 |</span><br><span class="line">| `:empty`          | 选取不包含子元素获取文本的空元素 | 集合元素 |</span><br><span class="line">| `:has(selector)`  | 选择含有选择器所匹配的元素的元素 | 集合元素 |</span><br><span class="line">| `:parent`         | 选取含有子元素或者文本的元素     | 集合元素 |</span><br><span class="line"></span><br><span class="line">- **可见过滤选择器**</span><br><span class="line"></span><br><span class="line">| 选择器     | 描述                 | 返回     |</span><br><span class="line">| :--------- | :------------------- | :------- |</span><br><span class="line">| `:hidden`  | 选择所有不可见的元素 | 集合元素 |</span><br><span class="line">| `:visible` | 选取所有可见的元素   | 集合元素 |</span><br><span class="line"></span><br><span class="line">- **属性过滤选择器**</span><br><span class="line"></span><br><span class="line">| 选择器              | 说明                            | 返回     |</span><br><span class="line">| :------------------ | :------------------------------ | :------- |</span><br><span class="line">| `[attribute]`       | 选取拥有此属性的元素            | 集合元素 |</span><br><span class="line">| `[attribute=value]` | 选取属性值为`value`值的元素     | 集合元素 |</span><br><span class="line">| `[attribue^=value]` | 选取属性的值以`value`开始的元素 | 集合元素 |</span><br><span class="line">| `[attribue$=value]` | 选取属性的值以`value`结束的元素 | 集合元素 |</span><br><span class="line"></span><br><span class="line">- **子元素过滤选择器**</span><br><span class="line"></span><br><span class="line">| 选择器                       | 说明                                                         | 返回     |</span><br><span class="line">| :--------------------------- | :----------------------------------------------------------- | :------- |</span><br><span class="line">| `:nth-child(index/even/odd)` | 选取每个父元素下的第index个子元素或者奇偶元素（`index`从`1`算起） | 集合元素 |</span><br><span class="line">| `:first-child`               | 选取每个元素的第一个子元素                                   | 集合元素 |</span><br><span class="line">| `:last-child`                | 选取每个元素的最后一个子元素                                 | 集合元素 |</span><br><span class="line"></span><br><span class="line">- `:nth-child()`选择器是很常用的子元素过滤选择器，如下</span><br><span class="line">  - `:nth-child(even)`选择每个父元素下的索引值是偶数的元素</span><br><span class="line">  - `:nth-child(odd)`选择每个父元素下的索引值是奇数的元素</span><br><span class="line">  - `:nth-child(2)`选择每个父元素下的索引值是`2`的元素</span><br><span class="line">  - `:nth-child(3n)`选择每个父元素下的索引值是3的倍数的元素 (`n`从`1`开始)</span><br><span class="line">- **表单对象属性过滤选择器**</span><br><span class="line"></span><br><span class="line">| 选择器      | 说明                                   | 返回     |</span><br><span class="line">| :---------- | :------------------------------------- | :------- |</span><br><span class="line">| `:enabled`  | 选取所有可用元素                       | 集合元素 |</span><br><span class="line">| `:disabled` | 选取所有不可用元素                     | 集合元素 |</span><br><span class="line">| `:checked`  | 选取所有被选中的元素（单选框、复选框） | 集合元素 |</span><br><span class="line">| `:selected` | 选取所有被选中的元素（下拉列表）       | 集合元素 |</span><br><span class="line"></span><br><span class="line">- **表单选择器**</span><br><span class="line"></span><br><span class="line">| 选择器      | 说明                                             |</span><br><span class="line">| :---------- | :----------------------------------------------- |</span><br><span class="line">| `:input`    | 选取所有`input` `textarea` `select` `button`元素 |</span><br><span class="line">| `:text`     | 选取所有单行文本框                               |</span><br><span class="line">| `:password` | 选取所有密码框                                   |</span><br><span class="line">| `:radio`    | 选取所有单选框                                   |</span><br><span class="line">| `:checkbox` | 选取所有多选框                                   |</span><br><span class="line">| `:submit`   | 选取所有的提交按钮                               |</span><br><span class="line">| `:image`    | 选取所有的图像按钮                               |</span><br><span class="line">| `:reset`    | 选取所有的重置按钮                               |</span><br><span class="line">| `:button`   | 选取所有的按钮                                   |</span><br><span class="line">| `:file`     | 选取所有的上传域                                 |</span><br><span class="line">| `:hidden`   | 选取所有的不可见元素                             |</span><br><span class="line"></span><br><span class="line">- **特定位置选择器**</span><br><span class="line">  - `:first`</span><br><span class="line">  - `:last`</span><br><span class="line">  - `:eq(index)`</span><br><span class="line">- **指定范围选择器**</span><br><span class="line">  - `:even`</span><br><span class="line">  - `:odd`</span><br><span class="line">  - `:gt(index)`</span><br><span class="line">  - `:lt(index)`</span><br><span class="line">- **排除选择器**</span><br><span class="line">  - `:not` 非</span><br><span class="line"></span><br><span class="line">#### 第三节 选择器优化</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- 使用合适的选择器表达式可以提高性能、增强语义并简化逻辑。常用的选择器中，`ID`选择器速度最快，其次是类型选择器。</span><br><span class="line">  - a. 多用`ID`选择器</span><br><span class="line">  - b. 少直接使用`class`选择器</span><br><span class="line">  - c. 多用父子关系，少用嵌套关系</span><br><span class="line">  - d. 缓存`jQuery`对象</span><br><span class="line">- **使用过滤器**</span><br><span class="line">  - `jQuery`提供了`2`种选择文档元素的方式：选择器和过滤器</span><br><span class="line">  - a. 类过虑器：根据元素的类属性来进行过滤操作。</span><br><span class="line">    - `hasClass(className)`：判断当前`jQuery`对象中的某个元素是否包含指定类名，包含返回`true`，不包含返回`false`</span><br><span class="line">  - b. 下标过滤器：精确选出指定下标元素</span><br><span class="line">    - `eq(index)`：获取第`N`个元素。`index`是整数值，下标从`0`开始</span><br><span class="line">  - c. 表达式过滤器</span><br><span class="line">    - `filter(expr)/(fn)`：筛选出与指定表达式/函数匹配的元素集合。</span><br><span class="line">    - 功能最强大的表达式过滤器，可接收函数参数，也可以是简单的选择器表达式</span><br><span class="line">  - d. 映射 `map(callback)`：将一组元素转换成其他数组</span><br><span class="line">  - e. 清洗 `not(expr)`：删除与指定表达式匹配的元素</span><br><span class="line">  - f. 截取 `slice(start,end)`：选取一个匹配的子集</span><br><span class="line">- **查找**</span><br><span class="line">  - 向下查找后代元素</span><br><span class="line">    - `children()`:取得所有元素的所有子元素集合（子元素）</span><br><span class="line">    - `find()`:搜索所有与指定表达式匹配的元素(所有后代元素中查找)</span><br><span class="line">  - 查找兄弟元素 `siblings()`查找当前元素的兄弟</span><br><span class="line"></span><br><span class="line">#### 第四节 代理对象属性和样式操作</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- **代理对象属性和样式操作**</span><br><span class="line">  - `attr`</span><br><span class="line">  - `prop`(一般属性值是`boolean`的值或者不用设置属性值，一般使用)</span><br><span class="line">  - `css`(最好不用，一般我用来做测试)</span><br><span class="line">  - `addClass` / `removeClass`</span><br><span class="line">- 操作原生`DOM`的时候用的方式：一次只能操作一个</span><br><span class="line">  - 操作属性：`setAttribute` / `getAttribute`</span><br><span class="line">  - 操作样式：`style.xx = value`</span><br><span class="line">  - 操作类样式：`className=&#x27;&#x27;`</span><br><span class="line">  - 获取`DOM`的子元素`children`属性</span><br><span class="line">  - `DOM`里面添加一个子元素`appendChild()`</span><br><span class="line">- 操作`jQuery`代理对象的时候：批量操作`DOM`对象(全都是通过方法操作)</span><br><span class="line">- 操作属性：`attr()`、`prop()`</span><br><span class="line">  - `attr`和`prop`区别：如果属性的值是布尔类型的值 用`prop`操作 反之`attr`</span><br><span class="line">- 操作样式：`css()`</span><br><span class="line">- 操作类样式：`addClass()` `removeClass()`</span><br><span class="line">- 操作`DOM`子元素：`children()`</span><br><span class="line">- 添加子元素：`append()`</span><br><span class="line"></span><br><span class="line">#### 第五节 jQuery中DOM操作</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- `DOM`是一种与浏览器、平台|语言无关的接口，使用该接口可以轻松的访问 页面中的所有的标准组件</span><br><span class="line"></span><br><span class="line">- **`DOM`操作的分类**</span><br><span class="line"></span><br><span class="line">  - **`DOM Core`**</span><br><span class="line"></span><br><span class="line">    - `DOM core`并不专属于`JavaScript`，任何支持`DOM`的程序都可以使用</span><br><span class="line">    - `JavaScript` 中的`getElementByID()` `getElementsByTagName()` `getAttribute()` `setAttribute()`等方法都是`DOM Core`的组成部分</span><br><span class="line"></span><br><span class="line">  - **`HTML-DOM`**</span><br><span class="line"></span><br><span class="line">    - `HTML -DOM`的出现比`DOM-Core`还要早，它提供一些更简明的标志来描述`HTML`元素的属性</span><br><span class="line"></span><br><span class="line">    - 比如：使用</span><br><span class="line"></span><br></pre></td></tr></table></figure>
  HTML-DOM  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">来获取某元素的</span><br><span class="line"></span><br></pre></td></tr></table></figure>
  src  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      属性的方法</span><br><span class="line"></span><br><span class="line">      - `element.src`</span><br><span class="line"></span><br><span class="line">  - **`CSS-DOM`**</span><br><span class="line"></span><br><span class="line">    - 针对`CSS`的操作。在`JavaScript`中，主要用于获取和设置`style`对象的各种属性，通过改变`style`对象的属性，使网页呈现不同的效果</span><br><span class="line"></span><br><span class="line">- **查找节点**</span><br><span class="line"></span><br><span class="line">  - 查找属性节点 `attr()` 可以获取各属性的值</span><br><span class="line"></span><br><span class="line">- 创建节点</span><br><span class="line"></span><br><span class="line">  - `$(html)`：根据传递的标记字符串，创建`DOM`对象</span><br><span class="line"></span><br><span class="line">- **插入节点**</span><br><span class="line"></span><br><span class="line">| 方法             | 说明                             |</span><br><span class="line">| :--------------- | :------------------------------- |</span><br><span class="line">| `append()`       | 向每个匹配元素内部追加内容       |</span><br><span class="line">| `appendTo()`     | 颠倒`append()`的操作             |</span><br><span class="line">| `prepend()`      | 向每个匹配元素的内容内部前置内容 |</span><br><span class="line">| `prependTo()`    | 颠倒`prepend()`的操作            |</span><br><span class="line">| `after()`        | 向每个匹配元素之后插入内容       |</span><br><span class="line">| `insertAfter()`  | 颠倒`after()`的操作              |</span><br><span class="line">| `before()`       | 在每个匹配元素之前插入内容       |</span><br><span class="line">| `insertBefore()` | 颠倒`before()`的操作             |</span><br><span class="line"></span><br><span class="line">- **删除节点**</span><br><span class="line"></span><br><span class="line">  - jQuery提供了三种删除节点的方法 `remove()` `detach()` `empty()`</span><br><span class="line">  - `remove()方法`</span><br><span class="line">    - 当某个节点用此方法删除后，该节点所包含的所有后代节点将同时被删除，用`remove()`方法删除后，还是可以继续使用删除后的引用</span><br><span class="line">  - `detach()`</span><br><span class="line">    - 和`remove()`方法一样，也是从`DOM`中去掉所有匹配的元素，与`remove()`不同的是，所有绑定的事件、附加的数据等，都会被保留下来</span><br><span class="line">  - `empty()`</span><br><span class="line">    - `empty()`方法并不是删除节点，而是清空节点，它能清空元素中所有后代节点</span><br><span class="line"></span><br><span class="line">- **复制节点**</span><br><span class="line"></span><br><span class="line">  - 使用`clone()`方法来完成</span><br><span class="line">  - 在`clone()`方法中传递一个参数`true`，同时复制元素中所绑定的事件</span><br><span class="line"></span><br><span class="line">- **替换节点**</span><br><span class="line"></span><br><span class="line">  - `jQuery`提供相应的方法 `replaceWidth()`</span><br><span class="line"></span><br><span class="line">- **样式操作**</span><br><span class="line"></span><br><span class="line">  - 获取样式和设置样式 `attr()`</span><br><span class="line">  - 追加样式 `addClass()`</span><br><span class="line">  - 移除样式 `removeClass()`</span><br><span class="line">  - 切换样式</span><br><span class="line">    - `toggle()`方法只要是控制行为上的重复切换（如果元素是显示的，则隐藏；如果元素原来是隐藏的，则显示）</span><br><span class="line">    - `toggleClass()`方法控制样式上的重复切换（如何类名存在，则删除它，如果类名不存在，则添加它）</span><br><span class="line">  - 判断是否含有某个样式</span><br><span class="line">    - `hasClass()`可以用来判断元素是否含有某个`class`,如有返回`true` 该方法等价于`is()`</span><br><span class="line"></span><br><span class="line">- **设置和获取HTML、文本和值**</span><br><span class="line"></span><br><span class="line">  - `html()`</span><br><span class="line"></span><br><span class="line">    - 此方法类似`JavaScript`中`innerHTML`属性，可以用来读取和设置某个元素中的`HTML`内容</span><br><span class="line"></span><br><span class="line">  - `text()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 此方法类型`JavaScript`中`innerHTML`，用来读取和设置某个元素中的文本内容</span><br><span class="line"></span><br><span class="line">  - `val()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 此方法类似`JavaScript`中的`value`属性，用来设置获取元素的值。无论是文本框、下拉列表还是单选框，都可以返回元素的值，如果元素多选，返回一个包含所有选择的值的数组</span><br><span class="line"></span><br><span class="line">- **遍历节点**</span><br><span class="line"></span><br><span class="line">  - `children()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 该方法用来取得匹配元素的子元素集合</span><br><span class="line">    - `childre()`方法只考虑子元素而不考虑其他后代元素</span><br><span class="line"></span><br><span class="line">  - `next()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 该方法用于取得匹配元素后面紧邻的同辈元素</span><br><span class="line"></span><br><span class="line">  - `prev()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 用于匹配元素前面紧邻的同辈元素</span><br><span class="line"></span><br><span class="line">  - `siblings()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 用于匹配元素前后所有的同辈元素</span><br><span class="line"></span><br><span class="line">  - `parent()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 获得集合中每个 元素的父级元素</span><br><span class="line"></span><br><span class="line">  - `parents()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 获得集合中每个元素的祖先元素</span><br><span class="line"></span><br><span class="line">##### CSS DOM操作</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- `CSS DOM`技术简单的来说就是读取和设置`style`对象的各种属性</span><br><span class="line"></span><br><span class="line">- 用`css()`方法获取元素的样式属性，可以同时设置多个样式属性</span><br><span class="line"></span><br><span class="line">- `CSS DOM`中关于元素定位有几个常用的方法</span><br><span class="line"></span><br><span class="line">  - `offset()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 它的作用是获取元素在当前视窗的相对偏移其中返回的对象包含两个属性，即`top`和`left`，他只对可见元素有效</span><br><span class="line"></span><br><span class="line">  - `position()`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 获取相对于最近的一个`position()`样式属性设置为`relative`或者`absolute`的祖父节点的相对偏移，与`offset()`一样，他返回的对象也包括两个属性，即`top`和`left`</span><br><span class="line"></span><br><span class="line">  - `scrollTop()`</span><br><span class="line"></span><br><span class="line">    方法和</span><br><span class="line"></span><br><span class="line">    `scrollLeft`</span><br><span class="line"></span><br><span class="line">    方法</span><br><span class="line"></span><br><span class="line">    - 这两个方法的作用分别是获取元素的滚动条距顶端的距离和距左侧的距离</span><br><span class="line"></span><br><span class="line">  - **一张图总结以上的位置关系(项目中很常用-必须要弄清楚)**</span><br><span class="line"></span><br><span class="line">![img](http://7xq6al.com1.z0.glb.clouddn.com/jquery4.jpg)</span><br><span class="line">![img](http://7xq6al.com1.z0.glb.clouddn.com/jquery5.jpg)</span><br><span class="line">![img](http://7xq6al.com1.z0.glb.clouddn.com/jquery6.jpg)</span><br><span class="line">![img](http://7xq6al.com1.z0.glb.clouddn.com/jquery7.jpg)</span><br><span class="line">![img](http://7xq6al.com1.z0.glb.clouddn.com/jquery7.jpg)</span><br><span class="line"></span><br><span class="line">#### 第六节 jQuery动画</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">##### 回顾上节</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- 操作DOM</span><br><span class="line">  - a.什么是`DOM`：`Document Object Model`缩写，文档对象模型</span><br><span class="line">  - b.理解页面的树形结构</span><br><span class="line">  - c.什么是节点：是DOM结构中最小单元，包括元素、属性、文本、文档等。</span><br><span class="line"></span><br><span class="line">###### 一、创建节点</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- 1.创建元素</span><br><span class="line">  - 语法：`document.createElement(name)`;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>var div &#x3D; document.createElement(“div”);<br>document.body.appendChild(div);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- `$(html)`：根据传递的标记字符串，创建DOM对象</span><br><span class="line">- 2.创建文本</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>var div &#x3D; document.createElement(“div”);<br>var txt &#x3D; document.createTextNode(“DOM”);<br>div.appendChild(txt);<br>document.body.appendChild(div);</p>
<p>var $div &#x3D; &#x3D; $(“<div>DOM</div>“);<br>$(body).append($div);<br>​&#96;&#96;&#96;		</p>
<ul>
<li>3.设置属性<ul>
<li>语法：<code>e.setAttrbute(name,value)</code></li>
</ul>
</li>
</ul>
<p>​&#96;&#96;&#96;javascript<br>var div &#x3D; document.createElement(“div”);<br>var txt &#x3D; document.createTextNode(“DOM”);<br>div.appendChild(txt);<br>document.body.appendChild(div);<br>div.setAttribute(“title”,”盒子”);</p>
<p>var $div &#x3D; &#x3D; $(“<div title='盒子'>DOM</div>“);<br>$(body).append($div);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">###### 二、插入内容</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- 内部插入</span><br><span class="line">  - 向元素最后面插入节点：</span><br><span class="line">    - `append()`:向每个匹配的元素内部追加内容</span><br><span class="line">    - `appendTo()`:把所有匹配的元素追加到指定元素集合中，`$(&quot;A&quot;).append(&quot;B&quot;)`等效 `$(&quot;B&quot;).appendTo(&quot;A&quot;)`</span><br><span class="line">  - 向元素最前面插入节点：</span><br><span class="line">    - `prepend（）`：把每个匹配的元素内部前置内容</span><br><span class="line">    - `prependTo（）`：把所有匹配的元素前置到另一个指定的元素集合中,`$(&quot;A&quot;).prepend(&quot;B&quot;)` 等效 `$(&quot;B&quot;).prependTo(&quot;A&quot;)`</span><br><span class="line">- 外部插入</span><br><span class="line">  - `after()`:在每个匹配的元素之后插入内容</span><br><span class="line">  - `before()`：在每个匹配想元素之前插入内容</span><br><span class="line">  - `insertAfter()`：将所有匹配的元素插入到另一个指定的元素集合后面，`$A.insert($B)` 等效`$B.insertAfter($A);`</span><br><span class="line">  - `insertBefore()`：将所有匹配的元素插入到另一个指定的元素集合前面 `$A.before($B)` 等效 `$B.insertBefore($A)`;</span><br><span class="line"></span><br><span class="line">###### 三、删除内容</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- 移除</span><br><span class="line">  - `remove()`:从`DOM`中删除所有匹配元素</span><br><span class="line">- 清空</span><br><span class="line">  - `empty()`:删除匹配的元素集合中所有子节点内容</span><br><span class="line"></span><br><span class="line">###### 四、克隆内容：创建指定节点副本</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  clone()</span><br></pre></td></tr></table></figure>

<ul>
<li>注意：若<code>clone（true）</code>则是包括克隆元素的属性，事件等</li>
</ul>
<h6 id="五、替换内容"><a href="#五、替换内容" class="headerlink" title="五、替换内容"></a>五、替换内容</h6><hr>
<ul>
<li><p><code>replaceWith()</code>:将所有匹配的元素替换成指定的元素</p>
</li>
<li><p><code>replaceAll()</code>:用匹配的元素替换掉指定元素</p>
</li>
<li><p>注意：两者效果一致，只是语法不同 <code>$A.replaceAll($B)</code>等效于 <code>$B.replaceWhith($A)</code>;</p>
</li>
</ul>
<h5 id="本节新知识"><a href="#本节新知识" class="headerlink" title="本节新知识"></a>本节新知识</h5><hr>
<ul>
<li><code>JavaScrip</code>t语言本身不支持动画设计，必须通过改变<code>CSS</code>来实现动画效果</li>
</ul>
<p><strong>显隐动画</strong></p>
<ul>
<li><p><code>show()</code>:显示 <code>hide()</code>:隐藏</p>
<ul>
<li><p>原理：<code>hide()</code>通过改变元素的高度宽度和不透明度，直到这三个属性值到<code>0</code></p>
</li>
<li><p><code>show()</code>从上到下增加元素的高度，从左到右增加元素宽度，从<code>0</code>到<code>1</code>增加透明度，直至内容完全可见</p>
</li>
<li><p>参数：</p>
<ul>
<li>&#96;&#96;&#96;<br>show(speed,callback)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      - `speed`: 字符串或数字，表示动画将运行多久（`slow=0.6`/`normal=0.4`/`fast=0.2`）</span><br><span class="line">      - `callback`: 动画完成时执行的方法</span><br><span class="line"></span><br><span class="line">- 显示和隐藏式一对密不可分的动画形式</span><br><span class="line"></span><br><span class="line">- **显隐切换**</span><br><span class="line"></span><br><span class="line">  - ```</span><br><span class="line">    toggle()</span><br></pre></td></tr></table></figure></li>
</ul>
<p>:切换元素的可见状态</p>
<ul>
<li><p>原理：匹配元素的宽度、高度以及不透明度，同时进行动画，隐藏动画后将<code>display</code>设置为<code>none</code></p>
</li>
<li><p>参数：</p>
<ul>
<li><p><code>toggle(speed)</code></p>
</li>
<li><p><code>toggle(speed,callback)</code></p>
</li>
<li><p>&#96;&#96;&#96;<br>toggle(boolean)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">        - `speed`: 字符串或数字，表示动画将运行多久（`slow=0.6`/`normal=0.4`/`fast=0.2`）</span><br><span class="line">        - `easing`： 使用哪个缓冲函数来过渡的字符串(`linear`/`swing`)</span><br><span class="line">        - `callback`： 动画完成时执行的方法</span><br><span class="line">        - `boolean`:`true`为显示 `false`为隐藏</span><br><span class="line"></span><br><span class="line">**滑动**</span><br><span class="line"></span><br><span class="line">- **显隐滑动效果**</span><br><span class="line">  - `slideDown()`:滑动隐藏</span><br><span class="line">  - `slidUp()`:滑动显示</span><br><span class="line">  - 参数:</span><br><span class="line">    - `slideDown(speed,callback)`</span><br><span class="line">    - `slidUp(speed,callback)`</span><br><span class="line">- **显隐切换滑动**</span><br><span class="line">  - `slideToggle()`:显隐滑动切换</span><br><span class="line">  - 参数:</span><br><span class="line">    - `slidUp(speed,callback)`</span><br><span class="line"></span><br><span class="line">**渐变：通过改变不透明度**</span><br><span class="line"></span><br><span class="line">- **淡入淡出**</span><br><span class="line">  - `fadeIn()`</span><br><span class="line">  - `fadeOut()`</span><br><span class="line">  - 参数：</span><br><span class="line">    - `fadeIn(speed,callback)`</span><br><span class="line">    - `fadeOut(speed,callback)`</span><br><span class="line">- **设置淡出透明效果**</span><br><span class="line">  - `fadeTo()`⁭：以渐进的方式调整到指定透明度</span><br><span class="line">  - 参数：</span><br><span class="line">    - `fadeTo(speed,opacity,callback)`</span><br><span class="line">- **渐变切换:结合`fadeIn`和`fadeOut`**</span><br><span class="line">  - `fadeToggle()`</span><br><span class="line">  - 参数:</span><br><span class="line">    - `fadeOut(speed,callback)`</span><br><span class="line"></span><br><span class="line">- 自定义动画：`animate()`</span><br><span class="line"></span><br><span class="line">  - 注意：在使用`animate`方法之前，为了影响该元素的`top` `left` `bottom` `right`样式属性，必须先把元素的`position`样式设置为`relative`或者`absolute`</span><br><span class="line"></span><br><span class="line">  - 停止元素的动画</span><br><span class="line"></span><br><span class="line">    - 很多时候需要停止匹配正在进行的动画，需要使用stop()</span><br><span class="line"></span><br><span class="line">    - ```</span><br><span class="line">      stop()</span><br></pre></td></tr></table></figure></li>
</ul>
<p>语法结构：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stop([clearQueue],[gotoEnd]);</span><br></pre></td></tr></table></figure>

<ul>
<li>都是可选参数，为布尔值</li>
<li>如果直接使用<code>stop()</code>方法，会立即停止当前正在进行的动画</li>
</ul>
</li>
</ul>
</li>
<li><p>判断元素是否处于动画状态</p>
<ul>
<li>如果不处于动画状态，则为元素添加新的动画，否则不添加<br><code>if(!$(element).is(&quot;:animated&quot;))&#123; //判断元素是否处于动画状态&#125;</code></li>
<li>这个方法在<code>animate</code>动画中经常被用到，需要注意</li>
</ul>
</li>
<li><p>延迟动画</p>
<ul>
<li>在动画执行过程中，如果你想对动画进行延迟操作，那么使用<code>delay()</code></li>
</ul>
</li>
</ul>
</li>
<li><p>用<code>animate</code>模拟<code>show()</code>:</p>
<ul>
<li><code>show</code>: 表示由透明到不透明</li>
<li><code>toggle</code>: 切换</li>
<li><code>hide</code>:表示由显示到隐藏</li>
</ul>
</li>
<li><p><strong>动画方法总结</strong></p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">方法名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>hide()</code>和<code>show()</code></td>
<td align="left">同时修改多个样式属性即高度和宽度和不透明度</td>
</tr>
<tr>
<td align="left"><code>fadeIn()</code>和<code>fadeOut()</code></td>
<td align="left">只改变不透明度</td>
</tr>
<tr>
<td align="left"><code>slideUp()</code>和<code>slideDown()</code></td>
<td align="left">只改变高度</td>
</tr>
<tr>
<td align="left"><code>fadeTo()</code></td>
<td align="left">只改变不透明度</td>
</tr>
<tr>
<td align="left"><code>toggle()</code></td>
<td align="left">用来代替<code>show()</code>和<code>hide()</code>方法，所以会同时修改多个属性即高度、宽度和不透明度</td>
</tr>
<tr>
<td align="left"><code>slideToggle()</code></td>
<td align="left">用来代替<code>slideUp</code>和<code>slideDown()</code>方法，所以只能改变高度</td>
</tr>
<tr>
<td align="left"><code>fadeToggle()</code></td>
<td align="left">用来代替<code>fadeIn()</code>和<code>fadeOut</code>方法，只能改变不透明度</td>
</tr>
<tr>
<td align="left"><code>animate()</code></td>
<td align="left">属于自定义动画，以上各种动画方法都是调用了<code>animate</code>方法。此外，用<code>animate</code>方法还能自定义其他的样式属性，例如：<code>left``marginLeft ``scrollTop</code>等</td>
</tr>
</tbody></table>
<h4 id="第七节-jQuery中的事件"><a href="#第七节-jQuery中的事件" class="headerlink" title="第七节 jQuery中的事件"></a>第七节 jQuery中的事件</h4><hr>
<ul>
<li><p><strong>事件对象的属性</strong></p>
<ul>
<li><code>event.type</code>：获取事件的类型</li>
<li><code>event.target</code>:获取到触发事件的元素</li>
<li><code>event.preventDefault</code>方法 阻止默认事件行为</li>
<li><code>event.stopPropagation()</code>阻止事件的冒泡</li>
<li><code>keyCode</code>：只针对于<code>keypress</code>事件，获取键盘键数字 按下回车，<code>13</code></li>
<li><code>event.pageX / event.pageY</code> 获取到光标相对于页面的<code>x</code>坐标和<code>y</code>坐标<ul>
<li>如果没有<code>jQuery</code>，在IE浏览器中用<code>event.x</code> &#x2F; <code>event.y</code>;在<code>Firefox</code>浏览器中用<code>event.pageX</code> &#x2F; <code>event.pageY</code>。如果页面上有滚动条还要加上滚动条的宽度和高度</li>
</ul>
</li>
<li><code>event.clientX</code>：光标对于浏览器窗口的水平坐标 浏览器</li>
<li><code>event.clientY</code>：光标对于浏览器窗口的垂直坐标</li>
<li><code>event.screenX</code>：光标对于电脑屏幕的水平坐标 电脑屏幕</li>
<li><code>event.screenY</code>：光标对于电脑屏幕的水平坐标</li>
<li><code>event.which</code> 该方法的作用是在鼠标单击事件中获取到鼠标的左、中、右键，在键盘事件中的按键 <code>1</code>代表左键 <code>2</code>代表中键 <code>3</code>代表右键</li>
</ul>
</li>
<li><p><strong>事件冒泡</strong></p>
<ul>
<li>什么是冒泡<ul>
<li>在页面上可以有多个事件，也可以多个元素影响同一个元素</li>
<li>从里到外</li>
<li>嵌套关系</li>
<li>相同事件</li>
<li>其中的某一父类没有相同事件时,继续向上查找</li>
</ul>
</li>
<li>停止事件冒泡<ul>
<li>停止事件冒泡可以阻止事件中其他对象的事件处理函数被执行</li>
<li>在<code>jQuery</code>中提供了**<code>stopPropagation()</code>**方法</li>
</ul>
</li>
<li>阻止默认行为<ul>
<li>网页中元素有自己的默认行为，例如：单击超链接后会跳转、单击提交后表单会提交，有时需要阻止元素的默认行为</li>
<li>在<code>jQuery</code>中提供了<code>preventDefault()</code>方法来阻止元素的默认行为</li>
</ul>
</li>
<li>事件捕获<ul>
<li>事件捕获和冒泡是相反的过程，事件捕获是从最顶端往下开始触发</li>
<li>并非所有的浏览器都支持事件捕获，并且这个缺陷无法通过<code>JavaScript</code>来修复。<code>jQuery</code>不支持事件捕获，如需要用事件捕获，要用原生的<code>JavaScript</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong><code>bind()</code>;绑定</strong></p>
<ul>
<li>为匹配元素绑定处理方法</li>
<li>需要给一个元素添加多个事件 ，事件执行一样时候</li>
<li><code>one()</code>：只执行一次</li>
</ul>
</li>
<li><p><strong>绑定特定事件类型方法</strong>：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">分类</th>
<th align="left">方法名称</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">页面载入</td>
<td align="left"><code>ready(fn)</code></td>
<td align="left">当<code>DOM</code>载入就绪可以绑定一个要执行的函数</td>
</tr>
<tr>
<td align="left">事件绑定</td>
<td align="left"><code>blind(type,[data],fn)</code></td>
<td align="left">为每个匹配元素的特定事件绑定一个事件处理函数</td>
</tr>
<tr>
<td align="left">事件绑定</td>
<td align="left"><code>unblind()</code></td>
<td align="left">解除绑定</td>
</tr>
<tr>
<td align="left">事件绑定</td>
<td align="left"><code>on(events,[,selector[,]data],handler)</code></td>
<td align="left">在选择元素上绑定一个或者多个事件处理函数</td>
</tr>
<tr>
<td align="left">事件绑定</td>
<td align="left"><code>off()</code></td>
<td align="left">移除<code>on</code>绑定的事件</td>
</tr>
<tr>
<td align="left">事件绑定</td>
<td align="left"><code>delegate(selector,eventType,handler)</code></td>
<td align="left">为所有选择匹配元素附加一个或多个事件处理函数</td>
</tr>
<tr>
<td align="left">事件绑定</td>
<td align="left"><code>undelegate()</code></td>
<td align="left">移除绑定</td>
</tr>
<tr>
<td align="left">事件动态</td>
<td align="left"><code>live(type,fn)</code></td>
<td align="left">对动态生成的元素进行事件绑定</td>
</tr>
<tr>
<td align="left">事件动态</td>
<td align="left"><code>die(type,fn)</code></td>
<td align="left">移除<code>live()</code>绑定的事件</td>
</tr>
<tr>
<td align="left">交互事件</td>
<td align="left"><code>hover()</code></td>
<td align="left">鼠标移入移出</td>
</tr>
<tr>
<td align="left">交互事件</td>
<td align="left"><code>toggle(fn1,fn2,[fn3],[fn4])</code></td>
<td align="left">每单击后依次调用函数</td>
</tr>
<tr>
<td align="left">交互事件</td>
<td align="left"><code>blur(fn)</code></td>
<td align="left">触发每一个匹配元素的<code>blur</code>事件</td>
</tr>
<tr>
<td align="left">交互事件</td>
<td align="left"><code>change()</code></td>
<td align="left">触发每一个匹配元素的<code>change</code>事件</td>
</tr>
<tr>
<td align="left">交互事件</td>
<td align="left"><code>click()</code></td>
<td align="left">触发每一个匹配元素的<code>click</code>事件</td>
</tr>
<tr>
<td align="left">交互事件</td>
<td align="left"><code>focus()</code></td>
<td align="left">触发每一个匹配元素的<code>focus</code>事件</td>
</tr>
<tr>
<td align="left">交互事件</td>
<td align="left"><code>submit()</code></td>
<td align="left">触发每一个匹配元素的<code>submit</code>事件</td>
</tr>
<tr>
<td align="left">键盘事件</td>
<td align="left"><code>keydown()</code></td>
<td align="left">触发每一个匹配元素的<code>keydown</code>事件</td>
</tr>
<tr>
<td align="left">键盘事件</td>
<td align="left"><code>keypress()</code></td>
<td align="left">触发每一个匹配元素的<code>keypress</code>事件</td>
</tr>
<tr>
<td align="left">键盘事件</td>
<td align="left"><code>keyup()</code></td>
<td align="left">触发每一个匹配元素的keyup事件</td>
</tr>
<tr>
<td align="left">鼠标事件</td>
<td align="left"><code>mousedown(fn)</code></td>
<td align="left">绑定一个处理函数</td>
</tr>
<tr>
<td align="left">鼠标事件</td>
<td align="left"><code>mouseenter(fn)</code></td>
<td align="left">绑定一个处理函数</td>
</tr>
<tr>
<td align="left">键盘事件</td>
<td align="left"><code>mouseleave(fn)</code></td>
<td align="left">绑定一个处理函数</td>
</tr>
<tr>
<td align="left">键盘事件</td>
<td align="left"><code>mouseout(fn)</code></td>
<td align="left">绑定一个处理函数</td>
</tr>
<tr>
<td align="left">键盘事件</td>
<td align="left"><code>mouseover(fn)</code></td>
<td align="left">绑定一个处理函数</td>
</tr>
<tr>
<td align="left">窗口操作</td>
<td align="left"><code>resize(fn)</code></td>
<td align="left">绑定一个处理函数</td>
</tr>
<tr>
<td align="left">窗口操作</td>
<td align="left"><code>scroll(fn)</code></td>
<td align="left">绑定一个处理函数</td>
</tr>
</tbody></table>
<h4 id="第八节-jQuery与Ajax"><a href="#第八节-jQuery与Ajax" class="headerlink" title="第八节 jQuery与Ajax"></a>第八节 jQuery与Ajax</h4><hr>
<ul>
<li><p>Ajax</p>
<p>简介 :</p>
<ul>
<li><code>Asynchronous Javascript And XML</code> （异步的<br><code>JavaScript</code>和<code>XML</code>）</li>
<li>它并不是一种单一的技术，而是有机利用一系列交互式网页应用相关的技术所形成的结合体</li>
</ul>
</li>
<li><p><code>Ajax</code>优势与不足</p>
<ul>
<li><p><code>Ajax</code>优势</p>
<ul>
<li><p>优秀的用户体验</p>
<ul>
<li>这是<code>Ajax</code>下最大的有点，能在不刷新整个页面前提下更新数据</li>
</ul>
</li>
<li><p>提高</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web</span><br></pre></td></tr></table></figure>

<p>程序的性能</p>
<ul>
<li>与传统模式相比，<code>Ajax</code>模式在性能上最大的区别在于传输数据的方式，在传统模式中，数据的提交时通过表单来实现的。<code>Ajax</code>模式只是通过<code>XMLHttpRequest</code>对象向服务器提交希望提交的数据，即按需发送</li>
</ul>
</li>
<li><p>减轻服务器和带宽的负担</p>
<ul>
<li><code>Ajax</code>的工作原理相当于在用户和服务器之间加了一个中间层，似用户操作与服务器响应异步化。它在客户端创建<code>Ajax</code>引擎，把传统方式下的一些服务器负担的工作转移到客户端，便于客户端资源来处理，减轻服务器和带宽的负担</li>
</ul>
</li>
</ul>
</li>
<li><p>Ajax的不足</p>
<ul>
<li>浏览器对<code>XMLHttpRequest</code>对象的支持度不足</li>
<li>破坏浏览器前进、后退按钮的正常功能</li>
<li>对搜索引擎的支持的不足</li>
<li>开发和调试工具的缺乏</li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="创建一个Ajax请求"><a href="#创建一个Ajax请求" class="headerlink" title="创建一个Ajax请求"></a>创建一个Ajax请求</h5><hr>
<ul>
<li><p><code>Ajax</code>的核心是<code>XMLHttpRequest</code>对象，它是<code>Ajax</code>实现的关键，发送异步请求、接受响应以及执行回调都是通过它来完成</p>
</li>
<li><p><strong>创建<code>ajax</code>对象 <code>var xhr = new XMLHttpRequest();</code></strong></p>
</li>
<li><p><strong>准备发送请求</strong></p>
<ul>
<li><p><strong><code>get</code> &#x2F; <code>post</code></strong></p>
<ul>
<li><p><code>get</code></p>
<ul>
<li>传递的数据放在<code>URL</code>后面</li>
<li>中文编码 <code>encodeURI( &#39;&#39; )</code>;</li>
<li>缓存 在数据后面加上随机数或者日期对象或者……</li>
</ul>
</li>
<li><p><strong><code>post</code></strong></p>
<ul>
<li>传递的数据放在<code>send()</code>里面，并且一定要规定数据格式</li>
<li>没有缓存问题</li>
</ul>
</li>
<li><p><code>form</code>表单中:</p>
<ul>
<li>&#96;&#96;&#96;<br>action<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">        :</span><br><span class="line"></span><br><span class="line">        - `method`: (默认是`get`)</span><br><span class="line">        - `get`: 会在`url`里面以 `name=value` , 两个数据之间用 `&amp;` 连接</span><br><span class="line"></span><br><span class="line">      - `post`:</span><br><span class="line"></span><br><span class="line">    - `enctype`: `&quot;application/x-www-form-urlencoded&quot;`</span><br><span class="line"></span><br><span class="line">  - `url`</span><br><span class="line"></span><br><span class="line">  - 是否异步</span><br><span class="line"></span><br><span class="line">    - 同步(`false`)：阻塞</span><br><span class="line">    - 异步(`true`)：非阻塞</span><br><span class="line"></span><br><span class="line">- **正式发送请求**</span><br><span class="line"></span><br><span class="line">- **`ajax`请求处理过程**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>xhr.onreadystatechange &#x3D; function(){<br>    if (xhr.readyState &#x3D;&#x3D; 4)<br>    {<br>        alert( xhr.responseText );<br>    }<br>};</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- `onreadystatechange` ：当处理过程发生变化的时候执行下面的函数</span><br><span class="line">- `readyState` ：`ajax`处理过程</span><br><span class="line">  - 0：请求未初始化（还没有调用 `open()`）。</span><br><span class="line">  - 1：请求已经建立，但是还没有发送（还没有调用 `send()`）。</span><br><span class="line">  - 2：请求已发送，正在处理中（通常现在可以从响应中获取内容头）。</span><br><span class="line">  - 3：请求在处理中；通常响应中已有部分数据可用了，但是服务器还没有完成响应的生成。</span><br><span class="line">  - 4：响应已完成；您可以获取并使用服务器的响应了。</span><br><span class="line">- `responseText` ：请求服务器返回的数据存在该属性里面</span><br><span class="line">- `status` : `http`状态码</span><br><span class="line"></span><br><span class="line">![HTTP状态码](http://7xq6al.com1.z0.glb.clouddn.com/jquery9.png)</span><br><span class="line"></span><br><span class="line">- 案例：`ajax`封装案例</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;ajax请求后台数据<br>var btn &#x3D;  document.getElementsByTagName(“input”)[0];<br>btn.onclick &#x3D; function(){</p>
<pre><code>ajax(&#123;//json格式
    type:&quot;post&quot;,
    url:&quot;post.php&quot;,
    data:&quot;username=poetries&amp;pwd=123456&quot;,
    asyn:true,
    success:function(data)&#123;
        document.write(data);
    &#125;
&#125;);
</code></pre>
<p>}<br>&#x2F;&#x2F;封装ajax<br>function ajax(aJson){<br>    var ajx &#x3D; null;<br>    var type &#x3D; aJson.type || “get”;<br>    var asyn &#x3D; aJson.asyn || true;<br>    var url &#x3D; aJson.url;		&#x2F;&#x2F; url 接收 传输位置<br>    var success &#x3D; aJson.success;&#x2F;&#x2F; success 接收 传输完成后的回调函数<br>    var data &#x3D; aJson.data || ‘’;&#x2F;&#x2F; data 接收需要附带传输的数据</p>
<pre><code>if(window.XMLHttpRequest)&#123;//兼容处理
    ajx = new XMLHttpRequest();//一般浏览器
&#125;else
&#123;
    ajx = new ActiveXObject(&quot;Microsoft.XMLHTTP&quot;);//IE6+
&#125;
if (type == &quot;get&quot; &amp;&amp; data)
&#123;
    url +=&quot;/?&quot;+data+&quot;&amp;&quot;+Math.random();
&#125;

//初始化ajax请求
ajx.open( type , url , asyn );
//规定传输数据的格式
ajx.setRequestHeader(&#39;content-type&#39;,&#39;application/x-www-form-urlencoded&#39;);
//发送ajax请求（包括post数据的传输）
type == &quot;get&quot; ?ajx.send():ajx.send(aJson.data);

//处理请求
ajx.onreadystatechange = function(aJson)&#123;
    
if(ajx.readState == 4)&#123;
        
    if (ajx.status == 200 &amp;&amp; ajx.status&lt;300)//200是HTTP 请求成功的状态码
    &#123;
        //请求成功处理数据
        success &amp;&amp; success(ajx.responseText);
    &#125;else&#123;
        alert(&quot;请求出错&quot;+ajx.status);
        
    &#125;
&#125;
    
&#125;;
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">##### jQuery中的Ajax [补充部分–来自锋利的jQuery]</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">`jquery`对`Ajax`操作进行了封装，在`jquery`中的`$.ajax()`方法属于最底层的方法，第`2`层是`load()`、`$.get()`、`$.post();`第`3`层是`$.getScript()`、`$.getJSON()`，第`2`层使用频率很高</span><br><span class="line"></span><br><span class="line">###### `load()`方法</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  load()</span><br></pre></td></tr></table></figure>

<p>  方法是</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jquery</span><br></pre></td></tr></table></figure>

<p>  中最简单和常用的</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ajax</span><br></pre></td></tr></table></figure>

<p>  方法，能载入远程</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTML</span><br></pre></td></tr></table></figure>

<p>  代码并插入</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DOM</span><br></pre></td></tr></table></figure>

<p>  中 结构为：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">load(url,[data],[callback])</span><br></pre></td></tr></table></figure>

<ul>
<li><p>使用<code>url</code>参数指定选择符可以加载页面内的某些元素 <code>load</code>方法中<code>url</code>语法：<code>url selector</code> 注意：<code>url</code>和选择器之间有一个空格</p>
</li>
<li><p>传递方式</p>
<ul>
<li><code>load()</code>方法的传递方式根据参数<code>data</code>来自动指定，如果没有参数传递，则采用<code>GET</code>方式传递，反之，采用<code>POST</code></li>
</ul>
</li>
<li><p>回调参数</p>
<ul>
<li>必须在加载完成后才执行的操作，该函数有三个参数 分别代表请求返回的内容、请求状态、<code>XMLHttpRequest</code>对象</li>
<li>只要请求完成，回调函数就会被触发</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(&quot;#testTest&quot;).load(&quot;test.html&quot;,function(responseText,textStatus,XMLHttpRequest)&#123;</span><br><span class="line">    //respnoseText 请求返回的内容</span><br><span class="line">    //textStatus 请求状态 ：sucess、error、notmodified、timeout</span><br><span class="line">    //XMLHttpRequest </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>load方法参数</strong></li>
</ul>
<table>
<thead>
<tr>
<th align="left">参数名称</th>
<th align="left">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>url</code></td>
<td align="left"><code>String</code></td>
<td align="left">请求<code>HTML</code>页面的<code>URL</code>地址</td>
</tr>
<tr>
<td align="left"><code>data(可选)</code></td>
<td align="left"><code>Object</code></td>
<td align="left">发送至服务器的<code>key</code> &#x2F; <code>value</code>数据</td>
</tr>
<tr>
<td align="left"><code>callback(可选)</code></td>
<td align="left"><code>Function</code></td>
<td align="left">请求完成时的回调函数，无论是请求成功还是失败</td>
</tr>
</tbody></table>
<h6 id="get-和-post-方法"><a href="#get-和-post-方法" class="headerlink" title="$.get()和$.post()方法"></a>$.get()和$.post()方法</h6><hr>
<p><code>load()</code>方法通常用来从web服务器上获取静态的数据文件。在项目中需要传递一些参数给服务器中的页面，那么可以使用<code>$.get()</code>和<code>$.post()</code>或<code>$.ajax()</code>方法</p>
<ul>
<li><p>注意：<code>$.get()</code>和<code>$.post()</code>方法是<code>jquery</code>中的全局函数</p>
</li>
<li><p><strong>$.get()方法</strong></p>
<ul>
<li><p><code>$.get()</code>方法使用<code>GET</code>方式来进行异步请求</p>
</li>
<li><p>结构为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.get(url,[data],callback,type)</span><br></pre></td></tr></table></figure>

<ul>
<li>如果服务器返回的内容格式是<code>xml</code>文档，需要在服务器端设置<code>Content-Type</code>类型 代码如下：<code>header(&quot;Content-Type:text/xml:charset=utf-8&quot;)</code> &#x2F;&#x2F;<code>php</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong><code>$.get()</code>方法参数解析</strong></p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">类型</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>url</code></td>
<td align="left"><code>String</code></td>
<td align="left">请求<code>HTML</code>页的地址</td>
</tr>
<tr>
<td align="left"><code>data(可选)</code></td>
<td align="left"><code>Object</code></td>
<td align="left">发送至服务器的<code>key</code>&#x2F; <code>value</code> 数据会作为<code>QueryString</code>附加到请求URL中</td>
</tr>
<tr>
<td align="left"><code>callback(可选)</code></td>
<td align="left"><code>Function</code></td>
<td align="left">载入成功的回调函数（只有当<code>Response</code>的返回状态是success才调用该方法）</td>
</tr>
<tr>
<td align="left"><code>type(可选)</code></td>
<td align="left"><code>String</code></td>
<td align="left">服务器返回内容的格式，包括<code>xml</code>、<code>html</code>、<code>script</code>、<code>json</code>、<code>text</code>和<code>_default</code></td>
</tr>
</tbody></table>
<ul>
<li><p><strong>$.post()方法</strong></p>
<ul>
<li><p>它与</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$.get()</span><br></pre></td></tr></table></figure>

<p>方法的结构和使用方式相同，有如下区别</p>
<ul>
<li>&#96;&#96;&#96;<br>GET<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">请求会将参数跟张乃URL后进行传递，而</span><br><span class="line"></span><br></pre></td></tr></table></figure>
POST<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">请求则是作为</span><br><span class="line"></span><br></pre></td></tr></table></figure>
Http<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">消息的实体内容发送给web服务器，在</span><br><span class="line"></span><br></pre></td></tr></table></figure>
ajax<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      请求中，这种区别对用户不可见</span><br><span class="line"></span><br><span class="line">      - `GET`方式对传输数据有大小限制（通常不能大于`2KB`），而使用`POST`方式传递的数据量要比`GET`方式大得多（理论不受限制）</span><br><span class="line">      - `GET`方式请求的数据会被浏览器缓存起来，因此其他人可以从浏览器的历史纪录中读取这些数据，如：账号、密码。在某种情况下，`GET`方式会带来严重的安全问题，而`POST`相对来说可以避免这些问题</span><br><span class="line">      - `GET`和`POST`方式传递的数据在服务端的获取也不相同。在`PHP`中，`GET`方式用`$_GET[]`获取；`POST`方式用`$_POST[]`获取;两种方式都可用`$_REQUEST[]`来获取</span><br><span class="line"></span><br><span class="line">- **总结**</span><br><span class="line"></span><br><span class="line">  - 使用`load()`、`$.get()`和`$.post()`方法完成了一些常规的`Ajax`程序，如果还需要复杂的`Ajax`程序，就需要用到`$.ajax()`方式</span><br><span class="line"></span><br><span class="line">###### $.ajax()方法</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- `$.ajax()`方法是`jquery`最底层的`Ajax`实现，它的结构为`$.ajax(options)`</span><br><span class="line">- 该方法只有一个参数，但在这个对象里包含了`$.ajax()`方式所需要的请求设置以及回调函等信息，参数以`key` / `value`存在，所有参数都是可选的</span><br><span class="line">- **$.ajax()方式常用参数解析**</span><br><span class="line"></span><br><span class="line">| 参数         | 类型       | 说明                                                         |</span><br><span class="line">| :----------- | :--------- | :----------------------------------------------------------- |</span><br><span class="line">| `url`        | `String`   | (默认为当前页地址)发送请求的地址                             |</span><br><span class="line">| `type`       | `String`   | 请求方式（`POST`或`GET`）默认为`GET`                         |</span><br><span class="line">| `timeout`    | `Number`   | 设置请求超时时间（毫秒）                                     |</span><br><span class="line">| `dataType`   | `String`   | 预期服务器返回的类型。可用的类型如下  **xml**:返回`XML`文档，可用`jquery`处理 **html**:返回纯文本的`HTML`信息，包含的`script`标签也会在插入`DOM`时执行 **script**：返回纯文本的`javascript`代码。不会自动缓存结果，除非设置`cache`参数。注意：在远程请求时，所有的`POST`请求都将转为`GET`请求 **json**:返回`JSON`数据 **jsonp**:`JSONP`格式，使用`jsonp`形式调用函数时，例如：`myurl?call back=?,jquery`将自动替换后一个`？`为正确的函数名，以执行回调函数 **text**:返回纯文本字符串 |</span><br><span class="line">| `beforeSend` | `Function` | 发送请求前可以修改`XMLHttpRequest`对象的函数，例如添加自定义`HTTP`头。在`beforeSend`中如果返回`false`可以取消本次`Ajax`请求。`XMLHttpRequest`对象是唯一的参数 function(XMLHttpRequest)&#123;      `this`;//调用本次`Ajax`请求时传递的`options`参数 &#125; |</span><br><span class="line">| `complete`   | `Function` | 请求完成后的回调函数（请求成功或失败时都调用） 参数：`XMLHttpRequest`对象和一个描述成功请求类型的字符串 function(XMLHttpRequest,textStatus)&#123;      `this`;//调用本次Ajax请求时传递的`options`参数 &#125; |</span><br><span class="line">| `success`    | `Function` | 请求成功后调用的回调函数，有两个参数 (1)由服务器返回，并根据`dataTyppe`参数进行处理后的数据 (2)描述状态的字符串 `function`(data,textStatus)&#123;      //`data`可能是`xmlDoc、``jsonObj`、`html`、`text`等      `this`;//调用本次`Ajax`请求时传递的`options`参数 &#125; |</span><br><span class="line">| `error`      | `Function` | 请求失败时被调用的函数                                       |</span><br><span class="line">| `global`     | `Boolean`  | 默认为`true`。表示是否触发全局`Ajax`事件，设置为`false`将不会触发。`AjaxStart`或`AjaxStop`可用于控制各种`Ajax`事件 |</span><br><span class="line"></span><br><span class="line">#### 第九节 插件</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- **什么是插件**</span><br><span class="line">  - 插件(`Plugin`)也称为`jQuery`的扩展。以`jQuery`核心代码为基础编写的符合一定规范的应用程序。通过`js`文件的方式引用。</span><br><span class="line">- **插件分为哪几类**</span><br><span class="line">  - `UI`类、表单及验证类、输入类、特效类、`Ajax`类、滑动类、图形图像类、导航类、综合工具类、动画类等等</span><br><span class="line"></span><br><span class="line">- 引入插件的步骤</span><br><span class="line">  - 引入`jquery.js`文件，而且在所以插件之前引入</span><br><span class="line">  - 引入插件</span><br><span class="line">  - 引入插件相关文件，比如皮肤、中文包</span><br><span class="line"></span><br><span class="line">- **如何自定义插件**：</span><br><span class="line">  - 插件形式分为3类：</span><br><span class="line">    - 封装对象方法插件</span><br><span class="line">    - 封装全局函数插件</span><br><span class="line">    - 选择器插件(类似于.`find()`)</span><br><span class="line">- **自定义插件的规范**（解决各种插件的冲突和错误，增加成功率）</span><br><span class="line">  - 命名：`jquery.插件名.js`</span><br><span class="line">  - 所有的新方法附加在`jquery.fn`对象上面，所有新功能附加在`jquery`上</span><br><span class="line">  - 所有的方法或插件必须用分号结尾，避免出问题</span><br><span class="line">  - 插件必须返回jQuery对象，便于链式连缀</span><br><span class="line">  - 避免插件内部使用`$`，如果要使用，请传递`jQuery`(`$`并不是总等于`jQuery`，另外其他`js`框架也可能使用`$`)</span><br><span class="line">  - 插件中的`this`应该指向`jQuery`对象</span><br><span class="line">  - 使用`this.each()`迭代元素</span><br><span class="line">- **自定义插件案例**</span><br><span class="line">  - 为了方便用户创建插件，`jQuery`提供了 `jQuery.extend()` 和 `jQuery.fn.extend()`</span><br><span class="line">  - `jQuery.extend()`：创建工具函数或者是选择器</span><br><span class="line">  - `jQuery.fn.extend()`：创建`jQuery`对象命令 （`fn`相当于`prototype`的别名）</span><br><span class="line">- **`jQuery`官方提供的插件开发模板**</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>;(function($){<br>    $.fn.plugin&#x3D;function(options){<br>        var defaults &#x3D; {<br>            &#x2F;&#x2F;各种参数 各种属性<br>        }<br>        var options &#x3D; $.extend(defaults,options);</p>
<pre><code>    this.each(function()&#123;
        //实现功能的代码
    &#125;);

    return this;
&#125;
</code></pre>
<p>})(jQuery);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**自定义`jQuery`函数**：</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>(function($){<br>    $.extend({<br>        test: function(){<br>            alert(“hello plugin”);<br>        }<br>    })<br>    })(jQuery);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">**自定义`jQuery`命令**：</span><br><span class="line"></span><br><span class="line">- 形式1：</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>(function($){<br>    $.fn.extend({<br>        say : function(){<br>         alert(“hello plugin”);<br>    }<br>    })<br>})(jQuery);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 形式2：</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>(function($){<br>    $.fn.say &#x3D; function(){<br>        alert(“hello plugin”);<br>    };</p>
<p>})(jQuery);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 附录一 jQuery各个版本新增的一些常用的方法</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- `jQuery1.3`新增常用的方法</span><br><span class="line"></span><br><span class="line">| 方法         | 说明                                                         |</span><br><span class="line">| :----------- | :----------------------------------------------------------- |</span><br><span class="line">| `.closest()` | 从元素本身开始，逐级向上级元素匹配，并返回最先匹配的祖先元素 |</span><br><span class="line">| `die()`      | 从元素中删除先前用`live()`方法绑定的所有的事件               |</span><br><span class="line">| `live()`     | 附加一个事件处理器到符合目前选择器的所有元素匹配             |</span><br><span class="line"></span><br><span class="line">- `jQuery1.4`新增常用的方法</span><br><span class="line"></span><br><span class="line">| 方法            | 说明                                                         |</span><br><span class="line">| :-------------- | :----------------------------------------------------------- |</span><br><span class="line">| `.first()`      | 获取集合中第一个元素                                         |</span><br><span class="line">| `last()`        | 获取集合中最后一个元素                                       |</span><br><span class="line">| `has(selector)` | 保留包含特定后代的元素，去掉那些不含有指定后代的元素         |</span><br><span class="line">| `detach()`      | 从`DOM`中去掉所有匹配的元素。`detach()`和`remov()`一样，除了`detach()`保存了所有`jquery`数据和被移走的元素相关联。当需要移走一个元素，不久又将该元素插入`DOM`时，这种方法很有用 |</span><br><span class="line">| `delegate()`    | 为所有选择器匹配的元素附加一个处理一个或多个事件             |</span><br><span class="line">| `undelegate()`  | 为所有选择器匹配的元素删除一个处理一个或多个事件             |</span><br><span class="line"></span><br><span class="line">- `jQuery1.6`新增常用的方法</span><br><span class="line"></span><br><span class="line">| 方法                           | 说明                                     |</span><br><span class="line">| :----------------------------- | :--------------------------------------- |</span><br><span class="line">| `prop(proptyName)`             | 获取在匹配元素集合中的第一个元素的属性值 |</span><br><span class="line">| `removeProp(proptyName,value)` | 为匹配的元素删除设置的属性               |</span><br><span class="line">| `:focus`                       | 选择当前获取焦点的元素                   |</span><br><span class="line"></span><br><span class="line">#### 附录二 jQuery性能优化</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- **性能优化**</span><br><span class="line"></span><br><span class="line">  - 使用最新版的jQuery类库</span><br><span class="line"></span><br><span class="line">  - 使用合适的选择器</span><br><span class="line"></span><br><span class="line">    - ```</span><br><span class="line">      $(#id)</span><br></pre></td></tr></table></figure>

<pre><code>  - 使用`id`来定位`DOM`元素是最佳的方式，为了提高性能，建议从最近的`ID`元素开始往下搜索

- ```
  $(&quot;p&quot;)
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">,</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure>
  $(&quot;div&quot;)
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">,</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br></pre></td></tr></table></figure>
  $(&quot;input&quot;)
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  - 标签选择器性能也不错，它是性能优化的第二选择。因为`jQuery`将直接调用本地方法`document.getElementsByTagName()`来定位`DOM`元素</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  $(&quot;.class&quot;)</span><br></pre></td></tr></table></figure>

  - 建议有选择性的使用

- ```
  $(&quot;[attribute=value]&quot;)
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  - 对这个利用属性定位`DOM`元素，本地`JavaScript`并没有直接实现。这种方式性能并不是很理想。建议避免使用。</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  $(&quot;:hidden&quot;)</span><br></pre></td></tr></table></figure>

  - 和上面利用属性定位`DOM`方式类似，建议尽量不要使用

- 注意的地方

  - 尽量使用`ID`选择器
  - 尽量给选择器指定上下文
</code></pre>
<ul>
<li><p>缓存对象</p>
<ul>
<li>如果你需要在其他函数中使用<code>jQuery</code>对象，你可以把他们缓存在全局环境中</li>
</ul>
</li>
<li><p>数组方式使用<code>jQuery</code>对象</p>
<ul>
<li>使用<code>jQuery</code>选择器获取的结果是一个<code>jQuery</code>对象。在性能方面，建议使用<code>for</code>或<code>while</code>循环来处理，而不是<code>$.each()</code></li>
</ul>
</li>
<li><p>事件代理</p>
<ul>
<li><p>每一个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JavaScript</span><br></pre></td></tr></table></figure>

<p>事件（如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">click</span><br></pre></td></tr></table></figure>

<p>、</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mouseove</span><br></pre></td></tr></table></figure>

<p>r）都会冒泡到父级节点。当我们需要给多个元素调用同个函数时这点很有用。比如，我们要为一个表单绑定这样的行为：点击td后，把背景颜色设置为红色</p>
<ul>
<li><p><code>$(&quot;#myTable td&quot;).click(function()&#123;$(this).css(&quot;background&quot;,&quot;red&quot;);&#125;);</code></p>
</li>
<li><p>假设有<code>100</code>个<code>td</code>元素，在使用以上的方式时，绑定了<code>100</code>个事件，将带来性能影响</p>
</li>
<li><p>代替这种多元素的事件监听方法是，你只需向他们的父节点绑定一次事件，然后通过</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">event.target</span><br></pre></td></tr></table></figure>

<p>获取到点击的当前元素</p>
<ul>
<li><code>$(&quot;#myTable td&quot;).click(function(&#123;$(e.target).css(&quot;background&quot;,&quot;red&quot;)&#125;);</code></li>
<li><code>e.target</code>捕捉到触发的目标</li>
</ul>
</li>
<li><p>在</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jQuery1.7</span><br></pre></td></tr></table></figure>

<p>中提供了一个新的方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">on()</span><br></pre></td></tr></table></figure>

<p>，来帮助你将整个事件监听封装到一个便利的方法中</p>
<ul>
<li><code>$(&quot;#myTable td&quot;).on(&quot;click&quot;,&#39;td&#39;,function()&#123;$(this).css(&quot;background&quot;,&quot;red&quot;);&#125;);</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>将你的代码转化成jQuery插件</p>
<ul>
<li>它能够使你的代码有更好的重用性，并且能够有效的帮助你组织代码</li>
</ul>
</li>
<li><p><strong>使用join()方法来拼接字符串</strong></p>
<ul>
<li>也许你之前使用<code>+</code>来拼接字符串，现在可以改了。它确实有助于性能优化，尤其是长字符串处理的时候</li>
</ul>
</li>
<li><p><strong>合理使用HTML5和Data属性</strong></p>
<ul>
<li>&#96;&#96;&#96;<br>HTML5<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">的</span><br><span class="line"></span><br></pre></td></tr></table></figure>
data<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">属性可以帮助我们插入数据，特别是后端的数据交换。</span><br><span class="line"></span><br></pre></td></tr></table></figure>
jQuery<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">的</span><br><span class="line"></span><br></pre></td></tr></table></figure>
Data()<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">方法有效利用</span><br><span class="line"></span><br></pre></td></tr></table></figure>
HTML5<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">      的属性</span><br><span class="line"></span><br><span class="line">      - 例如：``</span><br><span class="line">      - 为了读取数据，你需要使用如下代码</span><br><span class="line">        - `$(&quot;#dl&#x27;).data(&quot;role&#x27;;//page)`</span><br><span class="line">        - `$(&quot;#dl&#x27;).data(&quot;lastValue&#x27;;//43)`</span><br><span class="line">        - `$(&quot;#dl&#x27;).data(&quot;options&#x27;;//john)`</span><br><span class="line"></span><br><span class="line">  - **尽量使用原生的JavaScript方法**</span><br><span class="line"></span><br><span class="line">  - 压缩JavaScript代码</span><br><span class="line"></span><br><span class="line">    - 一方面使用`Gzip`；另一方面去除`JavaScript`文件里面的注释、空白</span><br><span class="line"></span><br><span class="line">#### 附录三 常用的jQuery代码片段</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- 禁用页面的右键菜单</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>$(document).ready(functuion(){<br>    $(document).bind(“contextmenu”,function(e){<br>        return false;<br>  });<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 新窗口打开页面</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).ready(function(){<br>    &#x2F;&#x2F;例子1：href&#x3D;”http:&#x2F;&#x2F;“的链接将会在新窗口打开链接<br>    $(‘a[href&#x3D;^&#x3D;”http:&#x2F;&#x2F;“]’).attr(“target”,”_blank”);</p>
<p>  &#x2F;&#x2F;例子2：rel&#x3D;”external”的超链接将会在新窗口打开链接<br>    $(“a[rel$&#x3D;’external’]”).click(function(){<br>      this.target &#x3D; “_blank”;<br>    });<br>});<br>&#x2F;&#x2F;use<br><a target="_blank" href="http://baidu.com" rel="external noopener">open</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 判断浏览器类型</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).reday(function(){<br>    &#x2F;&#x2F;Firefox2 and above<br>    if( $.browser.mozilla &amp;&amp; $.browser.version&gt;&#x3D;”1.8”){<br>      &#x2F;&#x2F;do something<br>  }</p>
<p>  &#x2F;&#x2F; Safari<br>  if($.browser.safari){<br>     &#x2F;&#x2F;do something<br>  }</p>
<p>  &#x2F;&#x2F; Chrome<br>  if($.browser.chrome){<br>     &#x2F;&#x2F;do something<br>  }</p>
<p>  &#x2F;&#x2F; Opera<br>  if($.browser.opera){<br>     &#x2F;&#x2F;do something<br>  }</p>
<p>})</p>
<p>  &#x2F;&#x2F; IE6 and blow<br>  if($.browser.msie &amp;&amp; $.browser.version&lt;&#x3D;6){<br>     &#x2F;&#x2F;do something<br>  }</p>
<p>  &#x2F;&#x2F; anything above IE6<br>  if($.browser.msie &amp;&amp; $.browser.version &gt; 6){<br>     &#x2F;&#x2F;do something<br>  }</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 输入框文字获取和失去焦点</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).ready(function(){<br>    $(“input.text1”).val(“Enter you search text here”);<br>    textFill($(‘input.text1’));<br>});</p>
<p>function textFill(input){&#x2F;&#x2F;input focus text function<br>    var originvalue &#x3D; input.val();<br>    input.focus(funtion(){<br>        if($.trim(input.val())&#x3D;&#x3D; originvalue){<br>            input.val(‘ ‘);<br>        }<br>  }).blur(function(){<br>      if($.trim(input.val()) &#x3D;&#x3D; ‘ ‘){<br>          input.val(originalvalue);<br>      }<br>  })<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 获取鼠标位置</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).ready(function(){<br>  $(document).mousemove(function(e){<br>      $(“#XY”).html(“X:” + e.pageX+ “| Y” + e.pageY);<br>  });<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 判断元素是否存在</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).ready(function(){<br>    if($(“#id”).length){<br>      &#x2F;&#x2F; do some thing<br>  }<br>})</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 点击div也可以跳转</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(“div”).click(function(){<br>    window.location  &#x3D; $(this).find(“a”).attr(“href”);<br>})</p>
<p>&#x2F;&#x2F;use</p>
<div><a href="index.html">home</a></div>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 设置div在屏幕中央</span><br><span class="line"></span><br></pre></td></tr></table></figure>
$(document).ready(function(){
    jQuery.fn.center = function(){
        this.css("position","absolute");
        this.css("top",($(window).height() - this.lenght()) / 2 +$(window).scrollTop() + "px"); 
        this.css("left",($(window).height() - this.lenght()) / 2 +$(window).scrollLeft() + "px"); 
      return this;
  }
//use 

<p> $(“#XY”).center();<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 关闭所有动画效果</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).ready(function(){<br>    jQuery.fx.off &#x3D; true;<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 检测鼠标的右键和左键</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).ready(function(){<br>    $(“#xy”).mousedown(function(e){<br>        alert(e.which);&#x2F;&#x2F;1 &#x3D; 鼠标左键  2&#x3D; 鼠标中间 3 &#x3D; 鼠标右键<br>  });<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 回车提交表单</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).ready(function(){<br>    $(“input”).keyup(function(e){<br>        if(e.which &#x3D;&#x3D; “13”){<br>            alert(“回车提交”);<br>      }<br>  })<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 设置全局的Ajax参数</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(“#load”).ajaxStart(function(){<br>    showLoading();&#x2F;&#x2F;显示loading<br>    disableButtons() &#x2F;&#x2F;禁用按钮<br>})<br> $(“#load”).ajaxComplete(function(){<br>    hideLoading();&#x2F;&#x2F;隐藏loading<br>    enableButtons();&#x2F;&#x2F;启用按钮<br>})</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 获取选中的下拉框</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(“#someElement”).find(‘option:selected’);<br>$(“#someElement option:selected”);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 切换复选框</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>var tog &#x3D; false;<br>$(“button”).click(function(){<br>    $(“input[type&#x3D;checkbox]’).attr(“checked”,!tog);<br>    tog &#x3D; !tog;<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 个性化链接</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).ready(function(){<br>     $(“a[href$&#x3D;’pdf’]”).addClass(“pdf”);<br>     $(“a[href$&#x3D;’zip’]”).addClass(“zip”);<br>     $(“a[href$&#x3D;’psd’]”).addClass(“psd”);<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在一段时间后自动隐藏或关闭元素</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>setTimeOut(function(){<br>        $(“div”).fadeIn(400);<br>  },3000);</p>
<p>&#x2F;&#x2F;而在1.4之后的版本可以用delay()来实现<br>$(“div”).slideUp(300).delay(3000).fadeIn(400);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 使用事件代理绑定元素</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p> &#x2F;&#x2F;为table里面的td元素绑定click事件，不管td是一直存在还是动态创建的<br> &#x2F;&#x2F;jQuery 1.4.2之前使用这种方式<br> $(“table”).each(function(){<br>    $(“td”,this).live(“click”,function(){<br>       $(this).toggleClass(“hover”);<br>    });<br>});</p>
<p>&#x2F;&#x2F;jquery 1.4.2使用的方式</p>
<p>$(“table”).delegate(“td”,”click”,function(){<br>    $(this).toggleClass(“hover”);<br>});</p>
<p>&#x2F;&#x2F;jQuery1.7.1使用的方式<br>$(“table”).on(“click”,”td”,function(){<br>    $(this).toggleClass(“hover”);<br> })</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 预加载图片</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>(function($) {<br>  var cache &#x3D; [];<br>  &#x2F;&#x2F; Arguments are image paths relative to the current page.<br>  $.preLoadImages &#x3D; function() {<br>    var args_len &#x3D; arguments.length;<br>    for (var i &#x3D; args_len; i–;) {<br>      var cacheImage &#x3D; document.createElement(‘img’);<br>      cacheImage.src &#x3D; arguments[i];<br>      cache.push(cacheImage);<br>    }<br>  }<br>jQuery.preLoadImages(“image1.gif”, “&#x2F;path&#x2F;to&#x2F;image2.png”);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 让页面中的每个元素都适合在移动设备上展示</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>var scr &#x3D; document.createElement(‘script’);<br>scr.setAttribute(‘src’, ‘<a target="_blank" rel="noopener" href="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js&#39;">https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js&#39;</a>);<br>document.body.appendChild(scr);<br>scr.onload &#x3D; function(){<br>    $(‘div’).attr(‘class’, ‘’).attr(‘id’, ‘’).css({<br>        ‘margin’ : 0,<br>        ‘padding’ : 0,<br>        ‘width’: ‘100%’,<br>        ‘clear’:’both’<br>    });<br>};</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 图像等比例缩放</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(window).bind(“load”, function() {<br>    &#x2F;&#x2F; IMAGE RESIZE<br>    $(‘#product_cat_list img’).each(function() {<br>        var maxWidth &#x3D; 120;<br>        var maxHeight &#x3D; 120;<br>        var ratio &#x3D; 0;<br>        var width &#x3D; $(this).width();<br>        var height &#x3D; $(this).height();<br>        if(width &gt; maxWidth){<br>            ratio &#x3D; maxWidth &#x2F; width;<br>            $(this).css(“width”, maxWidth);<br>            $(this).css(“height”, height * ratio);<br>            height &#x3D; height * ratio;<br>        }<br>        var width &#x3D; $(this).width();<br>        var height &#x3D; $(this).height();<br>        if(height &gt; maxHeight){<br>            ratio &#x3D; maxHeight &#x2F; height;<br>            $(this).css(“height”, maxHeight);<br>            $(this).css(“width”, width * ratio);<br>            width &#x3D; width * ratio;<br>        }<br>    });<br>    &#x2F;&#x2F;$(“#contentpage img”).show();<br>    &#x2F;&#x2F; IMAGE RESIZE<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 返回页面顶部</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; Back To Top<br>$(document).ready(function(){<br>  $(‘.top’).click(function() {<br>     $(document).scrollTo(0,500);<br>  });<br>});<br>&#x2F;&#x2F;Create a link defined with the class .top<br><a href="#" class="top">Back To Top</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 使用jQuery打造手风琴式的折叠效果</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>var accordion &#x3D; {<br>     init: function(){<br>           var $container &#x3D; $(‘#accordion’);<br>           $container.find(‘li:not(:first) .details’).hide();<br>           $container.find(‘li:first’).addClass(‘active’);<br>           $container.on(‘click’,’li a’,function(e){<br>                  e.preventDefault();<br>                  var $this &#x3D; $(this).parents(‘li’);<br>                  if($this.hasClass(‘active’)){<br>                         if($(‘.details’).is(‘:visible’)) {<br>                                $this.find(‘.details’).slideUp();<br>                         } else {<br>                                $this.find(‘.details’).slideDown();<br>                         }<br>                  } else {<br>                         $container.find(‘li.active .details’).slideUp();<br>                         $container.find(‘li’).removeClass(‘active’);<br>                         $this.addClass(‘active’);<br>                         $this.find(‘.details’).slideDown();<br>                  }<br>           });<br>     }<br>};</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 使用jQuery和Ajax自动填充选择框</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(function(){<br>$(“select#ctlJob”).change(function(){<br>$.getJSON(“&#x2F;select.php”,{id: $(this).val(), ajax: ‘true’}, function(j){<br>var options &#x3D; ‘’;<br>for (var i &#x3D; 0; i &lt; j.length; i++) {<br>options +&#x3D; ‘<br>‘ + j[i].optionDisplay + ‘<br>‘;<br>}<br>$(“select#ctlPerson”).html(options);<br>})<br>})<br>})</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 自动替换丢失的图片</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; Safe Snippet<br>$(“img”).error(function () {<br>    $(this).unbind(“error”).attr(“src”, “missing_image.gif”);<br>});<br>&#x2F;&#x2F; Persistent Snipper<br>$(“img”).error(function () {<br>    $(this).attr(“src”, “missing_image.gif”);<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 预防对表单进行多次提交</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(document).ready(function() {<br>  $(‘form’).submit(function() {<br>    if(typeof jQuery.data(this, “disabledOnSubmit”) &#x3D;&#x3D; ‘undefined’) {<br>      jQuery.data(this, “disabledOnSubmit”, { submited: true });<br>      $(‘input[type&#x3D;submit], input[type&#x3D;button]’, this).each(function() {<br>        $(this).attr(“disabled”, “disabled”);<br>      });<br>      return true;<br>    }<br>    else<br>    {<br>      return false;<br>    }<br>  });<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 动态添加表单元素</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;change event on password1 field to prompt new input<br>$(‘#password1’).change(function() {<br>        &#x2F;&#x2F;dynamically create new input and insert after password1<br>        $(“#password1”).append(“”);<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 在窗口滚动时自动加载内容</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>var loading &#x3D; false;<br>$(window).scroll(function(){<br>    if((($(window).scrollTop()+$(window).height())+250)&gt;&#x3D;$(document).height()){<br>        if(loading &#x3D;&#x3D; false){<br>            loading &#x3D; true;<br>            $(‘#loadingbar’).css(“display”,”block”);<br>            $.get(“load.php?start&#x3D;”+$(‘#loaded_max’).val(), function(loaded){<br>                $(‘body’).append(loaded);<br>                $(‘#loaded_max’).val(parseInt($(‘#loaded_max’).val())+50);<br>                $(‘#loadingbar’).css(“display”,”none”);<br>                loading &#x3D; false;<br>            });<br>        }<br>    }<br>});<br>$(document).ready(function() {<br>    $(‘#loaded_max’).val(50);<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 导航菜单背景切换效果</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul id='nav'> 
    <li>导航一</li> 
    <li>导航二</li> 
    <li>导航三</li>
</ul>

<p>&#x2F;&#x2F;注意：代码需要修饰完善</p>
<p>$(‘#nav’).click(function(e) {<br> &#x2F;&#x2F; 要知道siblings的使用          </p>
<p>$(e.target).addClass(‘tclass’).siblings(‘.tclass’).removeClass(‘tclass’);;</p>
<p> });</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 解决`jQuery`, `prototype`共存，`$`全局变量冲突问题</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<script src="prototype.js"></script>
<script src="http://blogbeta.blueidea.com/jquery.js"></script>
<script type="text/javascript"> jQuery.noConflict();</script> 

<p>注意：一定要先引入prototype.js 再引入jquery.js，先后顺序不可错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- jQuery 判断元素上是否绑定了事件</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;jQuery event封装支持判断元素上是否绑定了事件，此方法只适用于jQuery绑定的事件<br>var $events &#x3D; $(“#foo”).data(“events”);<br>if( $events &amp;&amp; $events[“click”] ){　　<br>    &#x2F;&#x2F;your code<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 如何正确地使用`toggleClass`</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;切换（toggle）类允许你根据某个类的&#x2F;&#x2F;是否存在来添加或是删除该类。<br>&#x2F;&#x2F;这种情况下有些开发者使用：<br>a.hasClass(‘blueButton’) ? a.removeClass(‘blueButton’) : a.addClass(‘blueButton’);<br>&#x2F;&#x2F;toggleClass允许你使用下面的语句来很容易地做到这一点<br>a.toggleClass(‘blueButton’);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 如何设置IE特有的功能</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>if ($.browser.msie) {<br>    &#x2F;&#x2F; Internet Explorer就是个虐待狂<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 如何验证某个元素是否为空</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F; 方法一<br>if (! $(‘#keks’).html()) {<br>    &#x2F;&#x2F;什么都没有找到;<br>}<br>&#x2F;&#x2F; 方法二<br>if ($(‘#keks’).is(“:empty”)) {<br>    &#x2F;&#x2F;什么都没有找到;<br>}</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 访问IFrame里的元素</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>var iFrameDOM &#x3D; $(“iframe#someID”).contents();<br>&#x2F;&#x2F;然后，就可以通过find方法来遍历获取iFrame中的元素了<br>iFrameDOM.find(“.message”).slideUp();</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 管理搜索框的值</span><br><span class="line">  - 现在各大网站都有搜索框，而搜索框通常都有默认值，当输入框获取焦点时，默认值消失。而一旦输入框失去焦点，而输入框里又没有输入新的值，输入框里的值又会恢复成默认值，如果往输入框里输入了新值，则输入框的值为新输入的值。这种特效用`JQuery`</span><br><span class="line">    很容易实现</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>$(“#searchbox”) .focus(function(){<br>      $(this).val(‘’)<br>}) .blur(function(){<br>     var $this &#x3D; $(this);<br>    &#x2F;&#x2F; ‘请搜索…’为搜索框默认值<br>    ($this.val() &#x3D;&#x3D;&#x3D; ‘’)? $this.val(‘请搜索…’) : null;<br>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 部分页面加载更新</span><br><span class="line">  - 为了提高`web`性能，有更新时我们通常不会加载整个页面，而只是仅仅更新部分页面内容，如图片的延迟加载等。页面部分刷新的特效在`JQuery`中也很容易实现</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>setInterval(function() {<br>&#x2F;&#x2F;每隔5秒钟刷新页面内容 &#x2F;&#x2F;获取的内容将增加到 id为content的元素后 </p>
<p>$(“#content”).load(url); }, 5000);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 采配置JQuery与其它库的兼容性</span><br><span class="line">  - 如果在项目中使用`JQuery`，`$` 是最常用的变量名，但`JQuery`并不是唯一一个使用`$`作为变量名的库，为了避免命名冲突，你可以按照下面方式来组织你的代码</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&#x2F;&#x2F;方法一： 为JQuery重新命名为<br> $jvar $j &#x3D; jQuery.noConflict();$j(‘#id’)…. &#x2F;&#x2F;</p>
<p>方法二： 推荐使用的方式</p>
<p>(function($){ $(document).ready(function(){<br>     &#x2F;&#x2F;这儿，你可以正常的使用JQuery语法 });<br>})(jQuery);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 测试密码的强度</span><br><span class="line">  - 在某些网站注册时常常会要求设置密码，网站也会根据输入密码的字符特点给出相应的提示，如密码过短、强度差、强度中等、强度强等。这又是怎么实现的呢？看下面代码：</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><input type="password" name="pass" id="pass" /> <span id="passstrength"></span><br>&#x2F;&#x2F;下面的正则表达式建议各位收藏哦，项目上有可能会用得着<br>$(‘#pass’).keyup(function(e) { </p>
<p>&#x2F;&#x2F;密码为八位及以上并且字母数字特殊字符三项都包括<br>var strongRegex &#x3D; new RegExp(“^(?&#x3D;.{8,})(?&#x3D;.<em>[A-Z])(?&#x3D;.</em>[a-z])(?&#x3D;.*[0-9])(?&#x3D;.<em>\W).</em>$”, “g”); </p>
<p>&#x2F;&#x2F;密码为七位及以上并且字母、数字、特殊字符三项中有两项，强度是中等<br> var mediumRegex &#x3D; new RegExp(“^(?&#x3D;.{7,})(((?&#x3D;.<em>[A-Z])(?&#x3D;.</em>[a-z]))|((?&#x3D;.<em>[A-Z])(?&#x3D;.</em>[0-9]))|((?&#x3D;.<em>[a-z])(?&#x3D;.</em>[0-9]))).<em>$”, “g”);<br>var enoughRegex &#x3D; new RegExp(“(?&#x3D;.{6,}).</em>“, “g”); </p>
<p>if (false &#x3D;&#x3D; enoughRegex.test($(this).val())) { </p>
<p>$(‘#passstrength’).html(‘More Characters’); }<br> else if (strongRegex.test($(this).val())) {<br>     $(‘#passstrength’).className &#x3D; ‘ok’;<br>     $(‘#passstrength’).html(‘Strong!’); }<br>else if (mediumRegex.test($(this).val())) {<br>    $(‘#passstrength’).className &#x3D; ‘alert’;<br>    $(‘#passstrength’).html(‘Medium!’); }<br> else {<br>    $(‘#passstrength’).className &#x3D; ‘error’;<br>    $(‘#passstrength’).html(‘Weak!’);<br>}<br>return true;</p>
<p>});</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 附录四 常见CND加速服务</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- [Bootstrap中文网开源项目免费 CDN 服务](http://www.bootcdn.cn/)</span><br><span class="line">- [百度静态资源公共库](http://cdn.code.baidu.com/)</span><br><span class="line">- [360网站卫士常用前端公共库CDN服务–已停止服务](http://libs.useso.com/)</span><br><span class="line">- [开放静态文件 CDN](http://staticfile.org/)</span><br><span class="line">- [微软CDN服务](http://www.asp.net/ajax/cdn)</span><br><span class="line">- [阿里云](https://bbs.aliyun.com/read/139395.html)</span><br><span class="line">- [百度开放云平台](http://developer.baidu.com/wiki/index.php?title=docs/cplat/libs)</span><br><span class="line">- [jQuery CDN](http://code.jquery.com/)</span><br><span class="line">- [jQuery cdn加速](http://www.jq22.com/cdn/)</span><br><span class="line">- [新浪CDN](http://lib.sinaapp.com/)</span><br><span class="line"></span><br><span class="line">#### 附录五 jQuery的一些资源</span><br><span class="line"></span><br><span class="line">------</span><br><span class="line"></span><br><span class="line">- 速查手册</span><br><span class="line"></span><br><span class="line">  - [jQuery API 中文文档–css88](http://www.css88.com/jqapi-1.9/)</span><br><span class="line">  - [jQuery-overapi](http://overapi.com/jquery)</span><br><span class="line">  - [在线桌面版API](http://www.sxt.cn/searchsxt/sxtapipro/index.html)</span><br><span class="line">  - [更多详情—一份实用的API参考手册集合](https://github.com/poetries/mywiki/blob/master/bookmark/实用参考手册API.md)</span><br><span class="line"></span><br><span class="line">- ```</span><br><span class="line">  jQuery</span><br></pre></td></tr></table></figure>

<p>  插件</p>
<ul>
<li>基础常用<ul>
<li><a target="_blank" rel="noopener" href="http://caibaojian.com/scrollfix">滚动固定在某个位置</a></li>
<li><a target="_blank" rel="noopener" href="http://caibaojian.com/power-slider">jQuery图片滚动插件全能版</a></li>
<li><a target="_blank" rel="noopener" href="http://code.ciaoca.com/jquery/wookmark/?utm_source=caibaojian.com">jQuery Wookmark Load 瀑布流布局</a></li>
<li><a target="_blank" rel="noopener" href="http://code.ciaoca.com/jquery/jcrop/?utm_source=caibaojian.com">jQuery Jcrop 图像裁剪</a></li>
<li><a target="_blank" rel="noopener" href="http://code.ciaoca.com/jquery/kxbdmarquee/?utm_source=caibaojian.com">jQuery kxbdMarquee 无缝滚动</a></li>
<li><a target="_blank" rel="noopener" href="http://code.ciaoca.com/jquery/lightbox/?utm_source=caibaojian.com">jQuery lightBox 灯箱效果</a></li>
<li><a target="_blank" rel="noopener" href="http://www.appelsiini.net/projects/lazyload?utm_source=caibaojian.com">Lazy Load Plugin for jQuery</a></li>
</ul>
</li>
<li>更多插件-动效库整理<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/poetries/mywiki/blob/master/bookmark/%E6%8F%92%E4%BB%B6%E5%BA%93.md">插件动效库</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/poetries/mywiki/blob/master/bookmark/%E5%B8%B8%E7%94%A8%E7%BB%84%E4%BB%B6.md">常用组件</a></li>
</ul>
</li>
</ul>
<h4 id="扩展阅读"><a href="#扩展阅读" class="headerlink" title="扩展阅读"></a>扩展阅读</h4><hr>
<ul>
<li><a target="_blank" rel="noopener" href="http://www.cnblogs.com/aaronjs/p/3279314.html">jQuery源码分析系列</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/12/html+css+js+ts/jQuery%E6%80%BB%E7%BB%93/" data-id="cl7k9sbi800dw98u0635fb2v5" data-title="jQurty总结" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-性能优化/03性能测量API（web提供，动态测量）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/09/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/03%E6%80%A7%E8%83%BD%E6%B5%8B%E9%87%8FAPI%EF%BC%88web%E6%8F%90%E4%BE%9B%EF%BC%8C%E5%8A%A8%E6%80%81%E6%B5%8B%E9%87%8F%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2021-03-09T06:27:08.000Z" itemprop="datePublished">2021-03-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">前端性能优化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/09/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/03%E6%80%A7%E8%83%BD%E6%B5%8B%E9%87%8FAPI%EF%BC%88web%E6%8F%90%E4%BE%9B%EF%BC%8C%E5%8A%A8%E6%80%81%E6%B5%8B%E9%87%8F%EF%BC%89/">前端性能优化-03</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Web-Api"><a href="#Web-Api" class="headerlink" title="Web Api"></a>Web Api</h2><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427135134108.png" alt="image-20220427135134108"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427135953185.png" alt="image-20220427135953185"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427135638721.png" alt="image-20220427135638721"></p>
<h2 id="页面渲染原理"><a href="#页面渲染原理" class="headerlink" title="页面渲染原理"></a>页面渲染原理</h2><p><strong><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427140026412.png" alt="image-20220427140026412"></strong></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427140215339.png" alt="image-20220427140215339"></p>
<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427140251251.png" alt="image-20220427140251251"></p>
<p>浏览器解释器  将他们翻译成浏览器认识的形式。</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427140455463.png" alt="image-20220427140455463"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427140508402.png" alt="image-20220427140508402"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427140829766.png" alt="image-20220427140829766"></p>
<h2 id="回流"><a href="#回流" class="headerlink" title="回流"></a>回流</h2><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427141037729.png" alt="image-20220427141037729"></p>
<p>里纳西不断的回流：</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427141659895.png" alt="image-20220427141659895"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427141728695.png" alt="image-20220427141728695"></p>
<h2 id="fastdom"><a href="#fastdom" class="headerlink" title="fastdom"></a>fastdom</h2><p>批量对DOM的读写操作     先执行读操作  后执行写操作</p>
<p>强制布局：很卡顿（连续的强制读写更新） 但是使用了fastdom(读写分离)后执行就会流畅</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427144318668.png" alt="image-20220427144318668"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427144353664.png" alt="image-20220427144353664"></p>
<h2 id="复合线程与图层"><a href="#复合线程与图层" class="headerlink" title="复合线程与图层"></a>复合线程与图层</h2><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427144903921.png" alt="image-20220427144903921"></p>
<p>在控制太我们通过frame就可以查看对应图层</p>
<p>这些不会触发布局和重绘，只会触发复合的过程给他们一个图层</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427145049336.png" alt="image-20220427145049336"></p>
<p>查看图层：</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427145130349.png" alt="image-20220427145130349"></p>
<p>查看交互点击第一个录制，然后停止就可以查看</p>
<p>第二个刷新只页面重新加载  。</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427145223610.png" alt="image-20220427145223610"></p>
<p>图层越多 开销也会越大。</p>
<h2 id="减少重绘"><a href="#减少重绘" class="headerlink" title="减少重绘"></a>减少重绘</h2><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427150359238.png" alt="image-20220427150359238"></p>
<p>render：选中第一个它会告诉我们谁会重绘并且标问绿色</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427150050337.png" alt="image-20220427150050337"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427150133967.png" alt="image-20220427150133967"></p>
<h2 id="高频事件处理函数-防抖"><a href="#高频事件处理函数-防抖" class="headerlink" title="高频事件处理函数 防抖"></a>高频事件处理函数 防抖</h2><p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427150900593.png" alt="image-20220427150900593"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427151047338.png" alt="image-20220427151047338"></p>
<p>事件触发  js  触发视觉变换   1帧开始    raf在  之前进行布局和绘制，</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427150955637.png" alt="image-20220427150955637"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427151104506.png" alt="image-20220427151104506"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/09/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/03%E6%80%A7%E8%83%BD%E6%B5%8B%E9%87%8FAPI%EF%BC%88web%E6%8F%90%E4%BE%9B%EF%BC%8C%E5%8A%A8%E6%80%81%E6%B5%8B%E9%87%8F%EF%BC%89/" data-id="cl7k9sbjm00ji98u05csffx2o" data-title="前端性能优化-03" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-性能优化/02性能优化模型RAIL测量" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/02/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/02%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%A8%A1%E5%9E%8BRAIL%E6%B5%8B%E9%87%8F/" class="article-date">
  <time class="dt-published" datetime="2021-03-02T12:49:27.000Z" itemprop="datePublished">2021-03-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">前端性能优化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/02/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/02%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%A8%A1%E5%9E%8BRAIL%E6%B5%8B%E9%87%8F/">前端性能优化-02</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="什么是RAIL："><a href="#什么是RAIL：" class="headerlink" title="什么是RAIL："></a>什么是RAIL：</h2><p>缩写每一个字母表示一个性能指标</p>
<p>Response：响应  对用户而言用户点击有没有即使访问</p>
<p>Animation：动画 给用户的体验好。会不会出现卡顿</p>
<p>Idie：空闲 有足够的空闲时间才能够进行响应交互   不让他始终处于繁忙的时间，不然无法处理其他请求</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427100359004.png" alt="image-20220427100359004"></p>
<p>Load：加载 资源网络加载的时间</p>
<p><strong>RAIL目标</strong></p>
<p><strong>评估指标</strong></p>
<p>响应：处理时间应在50ms以内完成</p>
<p>动画：没10ms产生一帧</p>
<p>空闲：尽可能增加空闲时间</p>
<p>加载：在5s内完成内容加载并可以交互</p>
<p>逐步发现问题解决问题</p>
<p>性能测量工具</p>
<p>Chrome DevTools 开发者调试工具，性能评测</p>
<p>Lighthouse 网站整体质量评估</p>
<p>WebPageTest 多测量地点、全面行能报告（通过 它的问斩对自己的网站就行进行评估）</p>
<h2 id="WenPageTest"><a href="#WenPageTest" class="headerlink" title="WenPageTest"></a><strong>WenPageTest</strong></h2><p>webpagetest.org</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427101136898.png" alt="image-20220427101136898"></p>
<p>用户首次方位  第二次访问  （第一次对一些静态资源做缓存）</p>
<p>录视频</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427101340209.png" alt="image-20220427101340209"></p>
<p>测试结果：</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427101426225.png" alt="image-20220427101426225"></p>
<p>第一次加载，首屏渲染，</p>
<p>speed 速度指数等</p>
<p>图片并行加载  时间有加载最长时间决定</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427103510108.png" alt="image-20220427103510108"></p>
<p>高亮（重定向了）  可以优化  直接去访问重定向后的位置</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427103527654.png" alt="image-20220427103527654"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427103716493.png" alt="image-20220427103716493"></p>
<p>前提：docker</p>
<p>docker pull webpagetest&#x2F;server</p>
<p>docker pull webpagetest&#x2F;a</p>
<p>docker run -d -p 4000:80 webpagetest&#x2F;server</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427103841249.png" alt="image-20220427103841249"></p>
<p>自定义镜像</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427103951183.png" alt="image-20220427103951183"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427103923723.png" alt="image-20220427103923723"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427103940202.png" alt="image-20220427103940202"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427104025309.png" alt="image-20220427104025309"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427104016148.png" alt="image-20220427104016148"></p>
<p>打包</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427104104578.png" alt="image-20220427104104578"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427104110269.png" alt="image-20220427104110269"></p>
<p>这样就可以本地测试了。</p>
<h2 id="Lighthouse"><a href="#Lighthouse" class="headerlink" title="Lighthouse"></a>Lighthouse</h2><p>npm install -g lighthouse</p>
<p>lighthouse 测试网站地址</p>
<p>自动打开一个浏览器窗口</p>
<p>生成而是报告到本地</p>
<p>打开即可查看</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427104412546.png" alt="image-20220427104412546"></p>
<p>第一个有意义的内容</p>
<p>什么时候用户可以交互了</p>
<p>用户访问过程截屏。</p>
<p>Opportunity：告诉我们还可以做些什么做到了可以提升那些多长时间</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427104938078.png" alt="image-20220427104938078"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427105002256.png" alt="image-20220427105002256"></p>
<p>可以指定什么样的资源不进行加载。</p>
<h2 id="Chrome-devtool调试"><a href="#Chrome-devtool调试" class="headerlink" title="Chrome devtool调试"></a>Chrome devtool调试</h2><p>Network：</p>
<p>资源名称  大小   耗时</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427133838888.png" alt="image-20220427133838888"></p>
<p>对请求资源进行压缩在返回前端</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427134024090.png" alt="image-20220427134024090"></p>
<p>实际大小 parse  1.4MB   网络传输（index）55kb</p>
<p>Performance：</p>
<p>开始出现性能分析：可以定位出导致长任务（耗费时间长）的方法。</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427134236511.png" alt="image-20220427134236511"></p>
<p>主线程任务。</p>
<p>Disabel cache缓存。 Online：选择网络</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427134610044.png" alt="image-20220427134610044"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427134719082.png" alt="image-20220427134719082"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427134737203.png" alt="image-20220427134737203"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/02/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/02%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%A8%A1%E5%9E%8BRAIL%E6%B5%8B%E9%87%8F/" data-id="cl7k9sbjl00ja98u01f4sedsc" data-title="前端性能优化-02" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-性能优化/01项目性能优化概述" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/26/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/01%E9%A1%B9%E7%9B%AE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%A6%82%E8%BF%B0/" class="article-date">
  <time class="dt-published" datetime="2021-02-26T03:07:23.000Z" itemprop="datePublished">2021-02-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">前端性能优化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/26/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/01%E9%A1%B9%E7%9B%AE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%A6%82%E8%BF%B0/">前端性能优化-01</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>平凡程序员和大牛程序员、架构师的分水岭</strong></p>
<p><strong>怎样做出高性能的工程，达到大厂产品水平</strong></p>
<p><strong>只是储配，动手实战</strong></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427093826921.png" alt="image-20220427093826921"></p>
<p><strong>优化标准“</strong></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427093854500.png" alt="image-20220427093854500"></p>
<p><strong>学习体系</strong></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427093906855.png" alt="image-20220427093906855"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427094119486.png" alt="image-20220427094119486"></p>
<p>一、为什么要进行性能优化</p>
<p>性能-web网站和应用的支柱</p>
<p>网站性能对用户很重要</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427094359679.png" alt="image-20220427094359679"></p>
<p><strong>寻找性能瓶颈</strong></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427094506838.png" alt="image-20220427094506838"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427094612815.png" alt="image-20220427094612815"></p>
<p><strong>性能指标和性能优化</strong></p>
<p>性能指标：</p>
<p>Network  (页面清空缓存 ，重新加载，查看)</p>
<p>请求数量  资源量   Dom加载时间   混合资源加载时间</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427094837633.png" alt="image-20220427094837633"></p>
<p>瀑布图：</p>
<p>请求前资源排队，dns解析，连接，SSL协商</p>
<p>发送：TTFB（用户体验和他有大多数关系）   下载（资源大小）  资源进行并行加载（不阻塞）</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427094932008.png" alt="image-20220427094932008"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427095003259.png" alt="image-20220427095003259"></p>
<p>右键下载查看  进行性能分析</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427095231244.png" alt="image-20220427095231244"></p>
<p>性能测量工具：</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427095256620.png" alt="image-20220427095256620"></p>
<p>first C …：页面出现数据的时间</p>
<p>Speed Index：速度指数（标准为4s）</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427095310577.png"></p>
<p>交互性：</p>
<p>画面流畅（帧数问题）</p>
<p>查看查看帧数变化工具：最后一项</p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427095707388.png" alt="image-20220427095707388"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427095839003.png" alt="image-20220427095839003"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427095911447.png" alt="image-20220427095911447"></p>
<p><img src="C:\Users\dell\AppData\Roaming\Typora\typora-user-images\image-20220427095937536.png" alt="image-20220427095937536"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/26/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/01%E9%A1%B9%E7%9B%AE%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%A6%82%E8%BF%B0/" data-id="cl7k9sbjk00j598u09tfc7jfs" data-title="前端性能优化-01" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-webpack/webpack与其他打包工具的区别" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/12/webpack/webpack%E4%B8%8E%E5%85%B6%E4%BB%96%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E7%9A%84%E5%8C%BA%E5%88%AB/" class="article-date">
  <time class="dt-published" datetime="2020-12-12T02:43:28.000Z" itemprop="datePublished">2020-12-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/12/webpack/webpack%E4%B8%8E%E5%85%B6%E4%BB%96%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E7%9A%84%E5%8C%BA%E5%88%AB/">webpack与其他打包工具的区别</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="一、模块化工具"><a href="#一、模块化工具" class="headerlink" title="一、模块化工具"></a>一、模块化工具</h2><p>模块化是一种处理复杂系统分解为更好的可管理模块的方式</p>
<p>可以用来分割，组织和打包应用。每个模块完成一个特定的子功能，所有的模块按某种方法组装起来，成为一个整体(<code>bundle</code>)</p>
<p>在前端领域中，并非只有<code>webpack</code>这一款优秀的模块打包工具，还有其他类似的工具，例如<code>Rollup</code>、<code>Parcel</code>、<code>snowpack</code>，以及最近风头无两的<code>Vite</code></p>
<p>通过这些模块打包工具，能够提高我们的开发效率，减少开发成本</p>
<p>这里没有提及<code>gulp</code>、<code>grunt</code>是因为它们只是定义为构建工具，不能类比</p>
<h3 id="Rollup"><a href="#Rollup" class="headerlink" title="Rollup"></a>Rollup</h3><p><code>Rollup</code> 是一款 <code>ES Modules</code> 打包器，从作用上来看，<code>Rollup</code> 与 <code>Webpack</code> 非常类似。不过相比于 <code>Webpack</code>，<code>Rollup</code>要小巧的多</p>
<p>现在很多我们熟知的库都都使用它进行打包，比如：<code>Vue</code>、<code>React</code>和<code>three.js</code>等</p>
<p>举个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./src/messages.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">hi</span>: <span class="string">&#x27;Hey Guys, I am zce~&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ./src/logger.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">log</span> = msg =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---------- INFO ----------&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------------------------&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">error</span> = msg =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;---------- ERROR ----------&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(msg)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;---------------------------&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ./src/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; log &#125; <span class="keyword">from</span> <span class="string">&#x27;./logger&#x27;</span></span><br><span class="line"><span class="keyword">import</span> messages <span class="keyword">from</span> <span class="string">&#x27;./messages&#x27;</span></span><br><span class="line"><span class="title function_">log</span>(messages.<span class="property">hi</span>)</span><br></pre></td></tr></table></figure>

<p>然后通过<code>rollup</code>进行打包</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx rollup ./src/index.<span class="property">js</span> --file ./dist/bundle.<span class="property">js</span></span><br></pre></td></tr></table></figure>

<p>打包结果如下图<img src="https://static.vue-js.com/8fe07830-b143-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>可以看到，代码非常简洁，完成不像<code>webpack</code>那样存在大量引导代码和模块函数</p>
<p>并且<code>error</code>方法由于没有被使用，输出的结果中并无<code>error</code>方法，可以看到，<code>rollup</code>默认开始<code>Tree-shaking</code> 优化输出结果</p>
<p>因此，可以看到<code>Rollup</code>的优点：</p>
<ul>
<li>代码效率更简洁、效率更高</li>
<li>默认支持 Tree-shaking</li>
</ul>
<p>但缺点也十分明显，加载其他类型的资源文件或者支持导入 <code>CommonJS</code> 模块，又或是编译 <code>ES</code> 新特性，这些额外的需求 <code>Rollup</code>需要使用插件去完成</p>
<p>综合来看，<code>rollup</code>并不适合开发应用使用，因为需要使用第三方模块，而目前第三方模块大多数使用<code>CommonJs</code>方式导出成员，并且<code>rollup</code>不支持<code>HMR</code>，使开发效率降低</p>
<p>但是在用于打包<code>JavaScript</code> 库时，<code>rollup</code>比 <code>webpack</code> 更有优势，因为其打包出来的代码更小、更快，其存在的缺点可以忽略</p>
<h3 id="Parcel"><a href="#Parcel" class="headerlink" title="Parcel"></a>Parcel</h3><p>Parcel ，是一款完全零配置的前端打包器，它提供了 “傻瓜式” 的使用体验，只需了解简单的命令，就能构建前端应用程序</p>
<p><code>Parcel</code> 跟 <code>Webpack</code> 一样都支持以任意类型文件作为打包入口，但建议使用<code>HTML</code>文件作为入口，该<code>HTML</code>文件像平时一样正常编写代码、引用资源。如下所示：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ./src/index.<span class="property">html</span> --&gt;</span><br><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Parcel Tutorials<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>main.js文件通过<code>ES Moudle</code>方法导入其他模块成员</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ./src/main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; log &#125; <span class="keyword">from</span> <span class="string">&#x27;./logger&#x27;</span></span><br><span class="line"><span class="title function_">log</span>(<span class="string">&#x27;hello parcel&#x27;</span>)</span><br><span class="line"><span class="comment">// ./src/logger.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">log</span> = msg =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;---------- INFO ----------&#x27;</span>)</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(msg)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行之后，使用命令打包</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx parcel src/index.html</span><br></pre></td></tr></table></figure>

<p>执行命令后，<code>Parcel</code>不仅打包了应用，同时也启动了一个开发服务器，跟<code>webpack Dev Server</code>一样</p>
<p>跟<code>webpack</code>类似，也支持模块热替换，但用法更简单</p>
<p>同时，<code>Parcel</code>有个十分好用的功能：支持自动安装依赖，像<code>webpack</code>开发阶段突然使用安装某个第三方依赖，必然会终止<code>dev server</code>然后安装再启动。而<code>Parcel</code>则免了这繁琐的工作流程</p>
<p>同时，<code>Parcel</code>能够零配置加载其他类型的资源文件，无须像<code>webpack</code>那样配置对应的<code>loader</code></p>
<p>打包命令如下：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx parcel src/index.html</span><br></pre></td></tr></table></figure>

<p>由于打包过程是多进程同时工作，构建速度会比<code>Webpack</code> 快，输出文件也会被压缩，并且样式代码也会被单独提取到单个文件中</p>
<p><img src="https://static.vue-js.com/ec17e7a0-b1a2-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>可以感受到，<code>Parcel</code>给开发者一种很大的自由度，只管去实现业务代码，其他事情用<code>Parcel</code>解决</p>
<h3 id="Snowpack"><a href="#Snowpack" class="headerlink" title="Snowpack"></a>Snowpack</h3><p>Snowpack，是一种闪电般快速的前端构建工具，专为现代<code>Web</code>设计，较复杂的打包工具（如<code>Webpack</code>或<code>Parcel</code>）的替代方案，利用<code>JavaScript</code>的本机模块系统，避免不必要的工作并保持流畅的开发体验</p>
<p>开发阶段，每次保存单个文件时，<code>Webpack</code>和<code>Parcel</code>都需要重新构建和重新打包应用程序的整个<code>bundle</code>。而<code>Snowpack</code>为你的应用程序每个文件构建一次，就可以永久缓存，文件更改时，<code>Snowpack</code>会重新构建该单个文件</p>
<p>下图给出<code>webpack</code>与<code>snowpack</code>打包区别：</p>
<p><img src="https://static.vue-js.com/79197830-b1a3-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>在重新构建每次变更时没有任何的时间浪费，只需要在浏览器中进行HMR更新</p>
<h3 id="Vite"><a href="#Vite" class="headerlink" title="Vite"></a>Vite</h3><p>vite ，是一种新型前端构建工具，能够显著提升前端开发体验</p>
<p>它主要由两部分组成：</p>
<ul>
<li>一个开发服务器，它基于 原生 ES 模块 提供了丰富的内建功能，如速度快到惊人的 [模块热更新HMR</li>
<li>一套构建指令，它使用 Rollup打包你的代码，并且它是预配置的，可以输出用于生产环境的优化过的静态资源</li>
</ul>
<p>其作用类似<code>webpack</code>+ <code>webpack-dev-server</code>，其特点如下：</p>
<ul>
<li>快速的冷启动</li>
<li>即时的模块热更新</li>
<li>真正的按需编译</li>
</ul>
<p><code>vite</code>会直接启动开发服务器，不需要进行打包操作，也就意味着不需要分析模块的依赖、不需要编译，因此启动速度非常快</p>
<p>利用现代浏览器支持<code>ES Module</code>的特性，当浏览器请求某个模块的时候，再根据需要对模块的内容进行编译，这种方式大大缩短了编译时间</p>
<p>原理图如下所示：</p>
<p><img src="https://static.vue-js.com/9f2eed30-b143-11eb-85f6-6fac77c0c9b3.png" alt="img"></p>
<p>在热模块<code>HMR</code>方面，当修改一个模块的时候，仅需让浏览器重新请求该模块即可，无须像<code>webpack</code>那样需要把该模块的相关依赖模块全部编译一次，效率更高</p>
<h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><p>相比上述的模块化工具，<code>webpack</code>大而全，很多常用的功能做到开箱即用。有两大最核心的特点：<strong>一切皆模块</strong>和<strong>按需加载</strong></p>
<p>与其他构建工具相比，有如下优势：</p>
<ul>
<li>智能解析：对 CommonJS 、 AMD 、ES6 的语法做了兼容</li>
<li>万物模块：对 js、css、图片等资源文件都支持打包</li>
<li>开箱即用：HRM、Tree-shaking等功能</li>
<li>代码分割：可以将代码切割成不同的 chunk，实现按需加载，降低了初始化时间</li>
<li>插件系统，具有强大的 Plugin 接口，具有更好的灵活性和扩展性</li>
<li>易于调试：支持 SourceUrls 和 SourceMaps</li>
<li>快速运行：webpack 使用异步 IO 并具有多级缓存，这使得 webpack 很快且在增量编译上更加快</li>
<li>生态环境好：社区更丰富，出现的问题更容易解决</li>
</ul>
<ol>
<li>除了Webpack外，你还了解哪些模块管理工具<br> webpack:<br> 就目前而言，webpack已是最常用的打包工具，webpack是基于入口的。webpack会自动地递归解析入口所需要加载的所有资源文件，然后用不同的Loader来处理不同的文件，用Plugin来扩展webpack功能。<br> gulp：<br> gulp是一个前端自动化构建工具，强调的是前端开发的工作流程，可以通过配置一系列的task，第一task处理的事情（如代码压缩，合并，编译以及浏览器实时更新等）。然后定义这些执行顺序，来让glup执行这些task，从而构建项目的整个开发流程。自动化构建工具并不能把所有的模块打包到一起，也不能构建不同模块之间的依赖关系。</li>
</ol>
<p>  grunt：<br>  是基于任务和流（Task、Stream）的。类似jQuery，找到一个（或一类）文件，对其做一系列链式操作，更新流上的数据， 整条链式操作构成了一个任务，多个任务就构成了整个web的构建流程。<br>  Rollup</p>
<ol start="2">
<li>Rollup 是一款 ES Modules 打包器， 从作用上来看，Rollup 与 Webpack 非常类似。不过相比于 Webpack，Rollup要小巧的多<br> 现在很多我们熟知的库都都使用它进行打包，比如：Vue、React和three.js等<br> Parcel<br> Parcel ，是一款完全零配置的前端打包器，它提供了 “傻瓜式” 的使用体验，只需了解简单的命令，就能构建前端应用程序<br> Parcel 跟 Webpack 一样都支持以任意类型文件作为打包入口，但建议使用		HTML文件作为入口，该HTML文件像平时一样正常编写代码、引用资源。<br> 模块化是一种处理复杂系统分解为更好的可管理模块的方式。可以用来分割、组织和打包应用。每个模块完成一个特定的子功能，所有的模块按某种方法组装起来，成为一个整体。<br> 在前端领域中，除了Webpack外，比较流行的模块打包工具还包括Rollup、Parcel、snowpack和最近风靡的Vite。</li>
</ol>
<p>  2.1. Rollup<br>  Rollup 是一款 ES Modules 打包器，可以将小块代码编译成大块复杂的代码，例如 library 或应用程序。从作用上来看，Rollup 与 Webpack 非常类似。不过相比于 Webpack，Rollup 要小巧的多。现在很多苦都使用它进行打包，比如：Vue、React和three.js等。<br>  使用之前，可以使用npm install –global rollup 命令进行安装。Rollup 可以通过命令行接口(command line interface)配合可选配置文件(optional configuration file)来调用，或者可以通过 JavaScript API来调用。运行 rollup –help 可以查看可用的选项和参数。<br>  2.2. Parcel<br>  Parcel ，是一款完全零配置的前端打包器，它提供了 “傻瓜式” 的使用体验，只需了解简单的命令，就能构建前端应用程序。<br>  2.3.  Vite<br>  Vite是Vue的作者尤雨溪开发的Web开发构建工具，它是一个基于浏览器原生ES模块导入的开发服务器，在开发环境下，利用浏览器去解析import，在服务器端按需编译返回，完全跳过了打包这个概念，服务器随启随用。同时不仅对Vue文件提供了支持，还支持热更新，而且热更新的速度不会随着模块增多而变慢。<br>  Vite具有以下特点： - 快速的冷启动 - 即时热模块更新（HMR，Hot Module Replacement） - 真正按需编译<br>  Vite由两部分组成： - 一个开发服务器，它基于 原生 ES 模块 提供了丰富的内建功能，如速度快到惊人的 [模块热更新HMR。 - 一套构建指令，它使用 Rollup打包你的代码，并且它是预配置的，可以输出用于生产环境的优化过的静态资源。<br>  Vite在开发阶段可以直接启动开发服务器，不需要进行打包操作，也就意味着不需要分析模块的依赖、不需要编译，因此启动速度非常快。当浏览器请求某个模块的时候，根据需要对模块的内容进行编译，大大缩短了编译时间。工作原理如下图所示。<br>  在热模块HMR方面，当修改一个模块的时候，仅需让浏览器重新请求该模块即可，无须像Webpack那样需要把该模块的相关依赖模块全部编译一次，因此效率也更高。<br>3. webpack，rollup，parcel优劣？(了解)<br>    对比</p>
<p>  Webpack<br>  Rollup<br>  Parcel<br>  功能</p>
<p>为处理资源管理和分割代码而生，可以用来处理任何类型的文件，灵活，插件多。<br>    用标准化的格式（es6）来写代码，通过减少死代码尽可能地缩小包体积。<br>    用标准化的格式（es6）来写代码，通过减少死代码尽可能地缩小包体积。<br>配置<br>    webpack需要配config文件，指明entry, output, plugin，transformations。<br>    rollup需要配config文件，指明entry, output, plugin，transformations。rollup 有对import&#x2F;export所做的node polyfills，webpack没有。rollup支持相对路径，而webpack没有，所以得使用</p>
<pre><code>parcel则是完全开箱可用的，不用配置。
</code></pre>
<p>入口文件<br>    webpack只支持js文件作为入口文件，如果要以其他格式的文件作为入口，比如html文件为入口，如要加第三方Plugin。<br>    rollup可以用html作为入口文件，但也需要plugin，比如rollup-plugin-html-entry。<br>    parcel可以用index.html作为入口文件，而且它会通过看index.html的script tag里包含的什么自己找到要打包生成哪些js文件。<br>transformations<br>    transformations指的是把其他文件转化成js文件的过程，需要经过transformation才能够被打包。webpack使用Loaders来处理。<br>    rollup使用plugins来处理。<br>    parcel会自动去转换，当找到配置文件比如.babelrc, .postcssrc后就会自动转。<br>摇树优化<br>    摇树优化是webpack的一大特性。需要1，用import&#x2F;export语法，2，在package.json中加副作用的入口，3，加上支持去除死代码的缩小器（uglifyjsplugin）。<br>    rollup会统计引入的代码并排除掉那些没有被用到的。这使您可以在现有工具和模块的基础上构建，而无需添加额外的依赖项或膨胀项目的大小。<br>    parcel不支持摇树优化。<br>dev server<br>    webpack用webpack-dev-server。<br>rollup用rollup-plugin-serve和rollup-plugin-livereload共同作用。<br>    parcel内置的有dev server<br>热更新<br>    webpack的 wepack-dev-server支持hot模式。<br>    rollup不支持hmr。<br>    parcel有内置的hmr。<br>代码分割<br>    webpack通过在entry中手动设置，使用CommonsChunkPlugin，和模块内的内联函数动态引入来做代码分割。<br>    rollup有实验性的代码分割特性。它是用es模块在浏览器中的模块加载机制本身来分割代码的。需要把experimentalCodeSplitting 和 experimentalDynamicImport 设为true。<br>    parcel支持0配置的代码分割。主要是通过动态improt。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/12/webpack/webpack%E4%B8%8E%E5%85%B6%E4%BB%96%E6%89%93%E5%8C%85%E5%B7%A5%E5%85%B7%E7%9A%84%E5%8C%BA%E5%88%AB/" data-id="cl7k9sbj200h798u0aqcd4b3r" data-title="webpack与其他打包工具的区别" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-webpack/webpack模块联邦" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/07/webpack/webpack%E6%A8%A1%E5%9D%97%E8%81%94%E9%82%A6/" class="article-date">
  <time class="dt-published" datetime="2020-12-07T07:24:58.000Z" itemprop="datePublished">2020-12-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/07/webpack/webpack%E6%A8%A1%E5%9D%97%E8%81%94%E9%82%A6/">webpack模块联邦</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>多个独立的构建可以组成一个应用程序，这些独立的构建之间不应该存在依赖关系，因此可以单独开发和部署它们。<br>这通常被称作微前端，但并不仅限于此。<br>Webpack5 模块联邦可以让 Webpack 达到了线上 Runtime 的效果，让代码直接在项目间利用 CDN 直接共享，不再需要本地安装 Npm 包、构建再发布了！<br>我们知道 Webpack 可以通过 DLL 或者 Externals 做代码共享时 Common Chunk，但不同应用和项目间这个任务就变得困难了，我们几乎无法在项目之间做到按需热插拔。</p>
<p>早期NPM方式共享模块   代码的共享是将依赖作为library安装到我们的项目里进行webpack打包并且构建上线<br>对于项目 Home 与 Search，需要共享一个模块时，最常见的办法就是将其抽成通用依赖并分别安装在各自项目中。虽然 Monorepo 可以一定程度解决重复安装和修改困难的问题，但依然需要走本地编译。</p>
<p>真正 Runtime 的方式可能是 UMD 方式共享代码模块，即将模块用 Webpack UMD模式打包，并输出到其他项目中。这是非常普遍的模块共享方式：<br>对于项目 Home 与 Search，直接利用 UMD 包复用一个模块。但这种技术方案问题也很明显，就是包体积无法达到本地编译时的优化效果，且库之间容易冲突。</p>
<p>微前端：micro-frontends (MFE) 也是最近比较火的模块共享管理方式，微前端就是要解决多项目并存问题，多项目并存的最大问题就是模块共享，模块之间是不能有冲突。  对于微前端我们还要考虑样式冲突，声明周期管理冲突等问题，我们先不考虑这些   想把问题聚焦在资源加载的方式上   微前端一般有两种打包方式：1.子应用独立打包，模块实现解耦，但这种方式无法抽取公共的依赖，2.整体应用打一个打包 很好的解决我们上面第一种方式的问题，但是打包效率速度实在是太慢了。不具备水平的扩展能力。<br>由于微前端还要考虑样式冲突、生命周期管理，所以本文只聚焦在资源加载方式上。微前端一般有两种打包方式：</p>
<ol>
<li>子应用独立打包，模块更解耦，但无法抽取公共依赖等。</li>
<li>整体应用一起打包，很好解决上面的问题，但打包速度实在是太慢了，不具备水平扩展能力。</li>
</ol>
<p>终于提到本文的主角了，模块联邦方式作为 Webpack5 内置核心特性之一的 FederatedModule：<br>这个方案是直接将一个应用的包应用于另一个应用，同时具备整体应用一起打包的公共依赖抽取能力。  比如：我们直接可以在Search应用里直接使用已经发布到线上的Home应用的组件。</p>
<p><strong>应用案例</strong><br>本案例模拟三个应用： Nav 、 Search 及 Home 。每个应用都是独立的，又通过模块邦联系到了一起。<br>比如Home需要使用Nav组件共享出来的header，Search可能要使用Header和Home组件构建出来的HomeList。<br>模块联邦将他们共享的模块暴露出来进行引用。<br>1、Nav 导航<br>src&#x2F;header.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const Header = () =&gt; &#123;</span><br><span class="line"> const header = document.createElement(&#x27;h1&#x27;)</span><br><span class="line"> header.textContent = &#x27;公共头部内容&#x27;</span><br><span class="line"> return header</span><br><span class="line">&#125;</span><br><span class="line">export default Header</span><br></pre></td></tr></table></figure>
<p>src&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">import Header from &#x27;./Header&#x27;</span><br><span class="line">const div = document.createElement(&#x27;div&#x27;)</span><br><span class="line">div.appendChild(Header())</span><br><span class="line">document.body.appendChild(div)</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const &#123;</span><br><span class="line"> ModuleFederationPlugin</span><br><span class="line">&#125; = require(&#x27;webpack&#x27;).container</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new ModuleFederationPlugin(&#123;</span><br><span class="line">   // 模块联邦名字</span><br><span class="line">   name: &#x27;nav&#x27;,</span><br><span class="line">   // 外部访问的资源名字</span><br><span class="line">   filename: &#x27;remoteEntry.js&#x27;,</span><br><span class="line">   // 引用的外部资源列表</span><br><span class="line">   remotes: &#123;&#125;,</span><br><span class="line">   // 暴露给外部资源列表</span><br><span class="line">   exposes: &#123;</span><br><span class="line">    &#x27;./Header&#x27;: &#x27;./src/Header.js&#x27;,   // 暴露 Header组件  key：可以定义成./Header 这个./Header并不代表是我当前引用下的某个路径   而是将来在别人用的时候基于这个路径来拼接url，值是正真的我们本地项目的应用</span><br><span class="line">  &#125;,</span><br><span class="line">   // 共享模块，如lodash</span><br><span class="line">   shared: &#123;&#125;,   // 如果我们的 header模块里有共享的第三方模块比如：lodash等，我们可以把他放到这里在打包的时候可以把第三方的共享的模块打到单独的一个包里。</span><br><span class="line"> &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>应用 webpack 运行服务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[felix] nav $ npx webpack serve --port 3003</span><br></pre></td></tr></table></figure>

<p>2、Home 首页<br>src&#x2F;HomeList</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const HomeList = (num) =&gt; &#123;</span><br><span class="line"> let str = &#x27;&lt;ul&gt;&#x27;</span><br><span class="line"> for (let i = 0; i &lt; num; i++) &#123;</span><br><span class="line">  str += &#x27;&lt;li&gt;item &#x27; + i + &#x27;&lt;/li&gt;&#x27;</span><br><span class="line">&#125;</span><br><span class="line"> str += &#x27;&lt;/ul&gt;&#x27;</span><br><span class="line"> return str</span><br><span class="line">&#125;</span><br><span class="line">export default HomeList</span><br></pre></td></tr></table></figure>
<p>src&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import HomeList from &#x27;./HomeList&#x27;</span><br><span class="line">remotes: &#123;</span><br><span class="line">    nav</span><br><span class="line">	(&#x27;nav/Header&#x27;)：remotes: &#123; nav &#125;Header    exposes: &#123;./Header&#x27;:&#x27;&#x27;&#125;</span><br><span class="line">import(&#x27;nav/Header&#x27;).then((Header) =&gt; &#123;  //引用模块联邦的组件  这样导入别人组件的时候需要通过异步的方式因为 网络共享或者是模块载入 是由延迟的，所以要通过promise的方式（异步模块加载的形式）去引用它。</span><br><span class="line"> const body = document.createElement(&#x27;div&#x27;)</span><br><span class="line"> body.appendChild(Header.default())</span><br><span class="line"> document.body.appendChild(body)</span><br><span class="line"> document.body.innerHTML += HomeList(5)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const &#123;</span><br><span class="line"> ModuleFederationPlugin</span><br><span class="line">&#125; = require(&#x27;webpack&#x27;).container</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new ModuleFederationPlugin(&#123;</span><br><span class="line">   name: &quot;home&quot;,</span><br><span class="line">   filename: &quot;remoteEntry.js&quot;,</span><br><span class="line">   remotes: &#123;</span><br><span class="line">    nav: &quot;nav@http://localhost:3003/remoteEntry.js&quot;,    // 引用第三方或别人写好的应用的路径。远端的服务路径</span><br><span class="line">  &#125;,</span><br><span class="line">   exposes: &#123;</span><br><span class="line">    &#x27;./HomeList&#x27;: &#x27;./src/HomeList.js&#x27;,</span><br><span class="line">  &#125;,</span><br><span class="line">   shared: &#123;&#125;,</span><br><span class="line"> &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>应用 webpack 运行服务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[felix] nav $ npx webpack serve --port 3001</span><br></pre></td></tr></table></figure>

<p>3、search 搜索<br>src&#x2F;index</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Promise.all([import(&#x27;nav/Header&#x27;), import(&#x27;home/HomeList&#x27;)])</span><br><span class="line">.then(([&#123;</span><br><span class="line">  default: Header</span><br><span class="line">&#125;, &#123;</span><br><span class="line">  default: HomeList</span><br><span class="line">&#125;]) =&gt; &#123;</span><br><span class="line">  document.body.appendChild(Header())</span><br><span class="line">  document.body.innerHTML += HomeList(4)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>webpack.config.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const HtmlWebpackPlugin = require(&#x27;html-webpack-plugin&#x27;)</span><br><span class="line">const &#123;</span><br><span class="line"> ModuleFederationPlugin</span><br><span class="line">&#125; = require(&#x27;webpack&#x27;).container</span><br><span class="line">module.exports = &#123;</span><br><span class="line"> mode: &#x27;production&#x27;,</span><br><span class="line"> entry: &#x27;./src/index.js&#x27;,</span><br><span class="line"> plugins: [</span><br><span class="line">  new HtmlWebpackPlugin(),</span><br><span class="line">  new ModuleFederationPlugin(&#123;</span><br><span class="line">   name: &#x27;search&#x27;,</span><br><span class="line">   filename: &#x27;remoteEntry.js&#x27;,</span><br><span class="line">   remotes: &#123;</span><br><span class="line">    nav: &quot;nav@http://localhost:3003/remoteEntry.js&quot;,</span><br><span class="line">    home: &quot;home@http://localhost:3001/remoteEntry.js&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">   exposes: &#123;&#125;,</span><br><span class="line">   shared: &#123;&#125;,</span><br><span class="line"> &#125;),</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>应用 webpack 运行服务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[felix] nav $ npx webpack serve --port 3002</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/07/webpack/webpack%E6%A8%A1%E5%9D%97%E8%81%94%E9%82%A6/" data-id="cl7k9sbj700hq98u0bbajdjta" data-title="webpack模块联邦" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/http/">http</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/liunx/">liunx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">移动端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/%E9%97%AE%E9%A2%98/">问题</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/%E9%9F%B3%E8%A7%86%E9%A2%91/">音视频</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">前端性能优化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%9F%E7%90%86/">原理</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%8E%9F%E7%90%86/React/">React</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/%E7%AE%97%E6%B3%95/">算法</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BE%AE%E5%89%8D%E7%AB%AF/">微前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">数据可视化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/">架构模式</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/%E6%A1%86%E6%9E%B6/">框架</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A1%86%E6%9E%B6/">框架</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%A1%86%E6%9E%B6/React/">React</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Event-Loop/" rel="tag">Event Loop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Graphviz/" rel="tag">Graphviz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mock/" rel="tag">Mock</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/" rel="tag">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RESTful/" rel="tag">RESTful</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redux/" rel="tag">Redux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/async-await/" rel="tag">async&#x2F;await</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/echart/" rel="tag">echart</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eslint/" rel="tag">eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/glup/" rel="tag">glup</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/http/" rel="tag">http</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/" rel="tag">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/" rel="tag">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qiankun/" rel="tag">qiankun</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/" rel="tag">typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vs-code/" rel="tag">vs code</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue3/" rel="tag">vue3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/" rel="tag">xml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%89%8D%E7%AB%AF/" rel="tag">前端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8A%93%E5%8C%85/" rel="tag">抓包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" rel="tag">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">浏览器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" rel="tag">移动端</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Event-Loop/" style="font-size: 10px;">Event Loop</a> <a href="/tags/Graphviz/" style="font-size: 10px;">Graphviz</a> <a href="/tags/Mock/" style="font-size: 10px;">Mock</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/RESTful/" style="font-size: 10px;">RESTful</a> <a href="/tags/React/" style="font-size: 19.29px;">React</a> <a href="/tags/Redux/" style="font-size: 11.43px;">Redux</a> <a href="/tags/async-await/" style="font-size: 10px;">async/await</a> <a href="/tags/css/" style="font-size: 13.57px;">css</a> <a href="/tags/echart/" style="font-size: 10px;">echart</a> <a href="/tags/es6/" style="font-size: 16.43px;">es6</a> <a href="/tags/eslint/" style="font-size: 10px;">eslint</a> <a href="/tags/git/" style="font-size: 15.71px;">git</a> <a href="/tags/glup/" style="font-size: 10.71px;">glup</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/html/" style="font-size: 14.29px;">html</a> <a href="/tags/http/" style="font-size: 17.14px;">http</a> <a href="/tags/javascript/" style="font-size: 18.57px;">javascript</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10.71px;">nginx</a> <a href="/tags/python/" style="font-size: 10.71px;">python</a> <a href="/tags/qiankun/" style="font-size: 10px;">qiankun</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/typescript/" style="font-size: 12.14px;">typescript</a> <a href="/tags/vs-code/" style="font-size: 11.43px;">vs code</a> <a href="/tags/vue/" style="font-size: 20px;">vue</a> <a href="/tags/vue3/" style="font-size: 10px;">vue3</a> <a href="/tags/webpack/" style="font-size: 17.86px;">webpack</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a> <a href="/tags/%E4%BC%98%E5%8C%96/" style="font-size: 13.57px;">优化</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 10.71px;">前端</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15px;">小程序</a> <a href="/tags/%E6%8A%93%E5%8C%85/" style="font-size: 10px;">抓包</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 10px;">操作系统</a> <a href="/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" style="font-size: 10px;">正则表达式</a> <a href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 12.86px;">浏览器</a> <a href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF/" style="font-size: 10.71px;">移动端</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/04/12/%E5%BE%AE%E5%89%8D%E7%AB%AF/qiankun%E5%BE%AE%E5%89%8D%E7%AB%AF/">qiankun微前端</a>
          </li>
        
          <li>
            <a href="/2022/01/12/%E5%B7%A5%E5%85%B7/git-stach/">git-stach</a>
          </li>
        
          <li>
            <a href="/2021/10/16/Vue/vue3%E4%BC%98%E5%8C%96/">vue3优化</a>
          </li>
        
          <li>
            <a href="/2021/10/11/Vue/Vue3-%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87%E3%80%81%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E4%BC%98%E5%8C%96/">Vue3-设计目标、做了哪些优化</a>
          </li>
        
          <li>
            <a href="/2021/09/29/Vue/vue3-Treeshaking/">vue3-Treeshaking</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>